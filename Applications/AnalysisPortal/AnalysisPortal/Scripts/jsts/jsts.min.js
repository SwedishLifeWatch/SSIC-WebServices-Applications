jsts={version:"0.16.0",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},predicate:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.error={};jsts.error.IllegalArgumentError=function(_1){this.name="IllegalArgumentError";this.message=_1;};jsts.error.IllegalArgumentError.prototype=new Error();jsts.error.TopologyError=function(_2,pt){this.name="TopologyError";this.message=pt?_2+" [ "+pt+" ]":_2;};jsts.error.TopologyError.prototype=new Error();jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError";this.message="Abstract method called, should be implemented in subclass.";};jsts.error.AbstractMethodInvocationError.prototype=new Error();jsts.error.NotImplementedError=function(){this.name="NotImplementedError";this.message="This method has not yet been implemented.";};jsts.error.NotImplementedError.prototype=new Error();jsts.error.NotRepresentableError=function(_3){this.name="NotRepresentableError";this.message=_3;};jsts.error.NotRepresentableError.prototype=new Error();jsts.error.LocateFailureError=function(_4){this.name="LocateFailureError";this.message=_4;};jsts.error.LocateFailureError.prototype=new Error();if(typeof module!=="undefined"){module.exports=jsts;}jsts.geom.GeometryFilter=function(){};jsts.geom.GeometryFilter.prototype.filter=function(_5){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.util.PolygonExtracter=function(_6){this.comps=_6;};jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PolygonExtracter.prototype.comps=null;jsts.geom.util.PolygonExtracter.getPolygons=function(_7,_8){if(_8===undefined){_8=[];}if(_7 instanceof jsts.geom.Polygon){_8.push(_7);}else{if(_7 instanceof jsts.geom.GeometryCollection){_7.apply(new jsts.geom.util.PolygonExtracter(_8));}}return _8;};jsts.geom.util.PolygonExtracter.prototype.filter=function(_9){if(_9 instanceof jsts.geom.Polygon){this.comps.push(_9);}};jsts.io.WKTParser=function(_a){this.geometryFactory=_a||new jsts.geom.GeometryFactory();this.regExes={"typeStr":/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,"emptyTypeStr":/^\s*(\w+)\s*EMPTY\s*$/,"spaces":/\s+/,"parenComma":/\)\s*,\s*\(/,"doubleParenComma":/\)\s*\)\s*,\s*\(\s*\(/,"trimParens":/^\s*\(?(.*?)\)?\s*$/};};jsts.io.WKTParser.prototype.read=function(_b){var _c,_d,_e;_b=_b.replace(/[\n\r]/g," ");var _f=this.regExes.typeStr.exec(_b);if(_b.search("EMPTY")!==-1){_f=this.regExes.emptyTypeStr.exec(_b);_f[2]=undefined;}if(_f){_d=_f[1].toLowerCase();_e=_f[2];if(this.parse[_d]){_c=this.parse[_d].apply(this,[_e]);}}if(_c===undefined){throw new Error("Could not parse WKT "+_b);}return _c;};jsts.io.WKTParser.prototype.write=function(_10){return this.extractGeometry(_10);};jsts.io.WKTParser.prototype.extractGeometry=function(_11){var _12=_11.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[_12]){return null;}var _13=_12.toUpperCase();var _14;if(_11.isEmpty()){_14=_13+" EMPTY";}else{_14=_13+"("+this.extract[_12].apply(this,[_11])+")";}return _14;};jsts.io.WKTParser.prototype.extract={"coordinate":function(_15){return _15.x+" "+_15.y;},"point":function(_16){return _16.coordinate.x+" "+_16.coordinate.y;},"multipoint":function(_17){var _18=[];for(var i=0,len=_17.geometries.length;i<len;++i){_18.push("("+this.extract.point.apply(this,[_17.geometries[i]])+")");}return _18.join(",");},"linestring":function(_19){var _1a=[];for(var i=0,len=_19.points.length;i<len;++i){_1a.push(this.extract.coordinate.apply(this,[_19.points[i]]));}return _1a.join(",");},"multilinestring":function(_1b){var _1c=[];for(var i=0,len=_1b.geometries.length;i<len;++i){_1c.push("("+this.extract.linestring.apply(this,[_1b.geometries[i]])+")");}return _1c.join(",");},"polygon":function(_1d){var _1e=[];_1e.push("("+this.extract.linestring.apply(this,[_1d.shell])+")");for(var i=0,len=_1d.holes.length;i<len;++i){_1e.push("("+this.extract.linestring.apply(this,[_1d.holes[i]])+")");}return _1e.join(",");},"multipolygon":function(_1f){var _20=[];for(var i=0,len=_1f.geometries.length;i<len;++i){_20.push("("+this.extract.polygon.apply(this,[_1f.geometries[i]])+")");}return _20.join(",");},"geometrycollection":function(_21){var _22=[];for(var i=0,len=_21.geometries.length;i<len;++i){_22.push(this.extractGeometry.apply(this,[_21.geometries[i]]));}return _22.join(",");}};jsts.io.WKTParser.prototype.parse={"point":function(str){if(str===undefined){return this.geometryFactory.createPoint(null);}var _23=str.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(_23[0],_23[1]));},"multipoint":function(str){if(str===undefined){return this.geometryFactory.createMultiPoint(null);}var _24;var _25=str.trim().split(",");var _26=[];for(var i=0,len=_25.length;i<len;++i){_24=_25[i].replace(this.regExes.trimParens,"$1");_26.push(this.parse.point.apply(this,[_24]));}return this.geometryFactory.createMultiPoint(_26);},"linestring":function(str){if(str===undefined){return this.geometryFactory.createLineString(null);}var _27=str.trim().split(",");var _28=[];var _29;for(var i=0,len=_27.length;i<len;++i){_29=_27[i].trim().split(this.regExes.spaces);_28.push(new jsts.geom.Coordinate(_29[0],_29[1]));}return this.geometryFactory.createLineString(_28);},"linearring":function(str){if(str===undefined){return this.geometryFactory.createLinearRing(null);}var _2a=str.trim().split(",");var _2b=[];var _2c;for(var i=0,len=_2a.length;i<len;++i){_2c=_2a[i].trim().split(this.regExes.spaces);_2b.push(new jsts.geom.Coordinate(_2c[0],_2c[1]));}return this.geometryFactory.createLinearRing(_2b);},"multilinestring":function(str){if(str===undefined){return this.geometryFactory.createMultiLineString(null);}var _2d;var _2e=str.trim().split(this.regExes.parenComma);var _2f=[];for(var i=0,len=_2e.length;i<len;++i){_2d=_2e[i].replace(this.regExes.trimParens,"$1");_2f.push(this.parse.linestring.apply(this,[_2d]));}return this.geometryFactory.createMultiLineString(_2f);},"polygon":function(str){if(str===undefined){return this.geometryFactory.createPolygon(null);}var _30,_31,_32;var _33=str.trim().split(this.regExes.parenComma);var _34;var _35=[];for(var i=0,len=_33.length;i<len;++i){_30=_33[i].replace(this.regExes.trimParens,"$1");_31=this.parse.linestring.apply(this,[_30]);_32=this.geometryFactory.createLinearRing(_31.points);if(i===0){_34=_32;}else{_35.push(_32);}}return this.geometryFactory.createPolygon(_34,_35);},"multipolygon":function(str){if(str===undefined){return this.geometryFactory.createMultiPolygon(null);}var _36;var _37=str.trim().split(this.regExes.doubleParenComma);var _38=[];for(var i=0,len=_37.length;i<len;++i){_36=_37[i].replace(this.regExes.trimParens,"$1");_38.push(this.parse.polygon.apply(this,[_36]));}return this.geometryFactory.createMultiPolygon(_38);},"geometrycollection":function(str){if(str===undefined){return this.geometryFactory.createGeometryCollection(null);}str=str.replace(/,\s*([A-Za-z])/g,"|$1");var _39=str.trim().split("|");var _3a=[];for(var i=0,len=_39.length;i<len;++i){_3a.push(jsts.io.WKTParser.prototype.read.apply(this,[_39[i]]));}return this.geometryFactory.createGeometryCollection(_3a);}};jsts.index.ItemVisitor=function(){};jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.CGAlgorithms=function(){};jsts.algorithm.CGAlgorithms.CLOCKWISE=-1;jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE;jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1;jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.algorithm.CGAlgorithms.COLLINEAR=0;jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR;jsts.algorithm.CGAlgorithms.orientationIndex=function(p1,p2,q){var dx1,dy1,dx2,dy2;dx1=p2.x-p1.x;dy1=p2.y-p1.y;dx2=q.x-p2.x;dy2=q.y-p2.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(dx1,dy1,dx2,dy2);};jsts.algorithm.CGAlgorithms.isPointInRing=function(p,_3b){return jsts.algorithm.CGAlgorithms.locatePointInRing(p,_3b)!==jsts.geom.Location.EXTERIOR;};jsts.algorithm.CGAlgorithms.locatePointInRing=function(p,_3c){return jsts.algorithm.RayCrossingCounter.locatePointInRing(p,_3c);};jsts.algorithm.CGAlgorithms.isOnLine=function(p,pt){var _3d,i,il,p0,p1;_3d=new jsts.algorithm.RobustLineIntersector();for(i=1,il=pt.length;i<il;i++){p0=pt[i-1];p1=pt[i];_3d.computeIntersection(p,p0,p1);if(_3d.hasIntersection()){return true;}}return false;};jsts.algorithm.CGAlgorithms.isCCW=function(_3e){var _3f,_40,_41,p,_42,_43,_44,_45,i,_46,_47;_3f=_3e.length-1;if(_3f<3){throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");}_40=_3e[0];_41=0;i=1;for(i;i<=_3f;i++){p=_3e[i];if(p.y>_40.y){_40=p;_41=i;}}_42=_41;do{_42=_42-1;if(_42<0){_42=_3f;}}while(_3e[_42].equals2D(_40)&&_42!==_41);_43=_41;do{_43=(_43+1)%_3f;}while(_3e[_43].equals2D(_40)&&_43!==_41);_44=_3e[_42];_45=_3e[_43];if(_44.equals2D(_40)||_45.equals2D(_40)||_44.equals2D(_45)){return false;}_46=jsts.algorithm.CGAlgorithms.computeOrientation(_44,_40,_45);_47=false;if(_46===0){_47=(_44.x>_45.x);}else{_47=(_46>0);}return _47;};jsts.algorithm.CGAlgorithms.computeOrientation=function(p1,p2,q){return jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q);};jsts.algorithm.CGAlgorithms.distancePointLine=function(p,A,B){if(!(A instanceof jsts.geom.Coordinate)){jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments);}if(A.x===B.x&&A.y===B.y){return p.distance(A);}var r,s;r=((p.x-A.x)*(B.x-A.x)+(p.y-A.y)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));if(r<=0){return p.distance(A);}if(r>=1){return p.distance(B);}s=((A.y-p.y)*(B.x-A.x)-(A.x-p.x)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));return Math.abs(s)*Math.sqrt(((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y)));};jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(p,A,B){var s=((A.y-p.y)*(B.x-A.x)-(A.x-p.x)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));return Math.abs(s)*Math.sqrt(((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y)));};jsts.algorithm.CGAlgorithms.distancePointLine2=function(p,_48){var _49,i,il,_4a;if(_48.length===0){throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");}_49=p.distance(_48[0]);for(i=0,il=_48.length-1;i<il;i++){_4a=jsts.algorithm.CGAlgorithms.distancePointLine(p,_48[i],_48[i+1]);if(_4a<_49){_49=_4a;}}return _49;};jsts.algorithm.CGAlgorithms.distanceLineLine=function(A,B,C,D){if(A.equals(B)){return jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D);}if(C.equals(D)){return jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B);}var _4b,_4c,_4d,_4e,s,r;_4b=(A.y-C.y)*(D.x-C.x)-(A.x-C.x)*(D.y-C.y);_4c=(B.x-A.x)*(D.y-C.y)-(B.y-A.y)*(D.x-C.x);_4d=(A.y-C.y)*(B.x-A.x)-(A.x-C.x)*(B.y-A.y);_4e=(B.x-A.x)*(D.y-C.y)-(B.y-A.y)*(D.x-C.x);if((_4c===0)||(_4e===0)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(B,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(C,A,B),jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B))));}s=_4d/_4e;r=_4b/_4c;if((r<0)||(r>1)||(s<0)||(s>1)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(B,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(C,A,B),jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B))));}return 0;};jsts.algorithm.CGAlgorithms.signedArea=function(_4f){if(_4f.length<3){return 0;}var sum,i,il,bx,by,cx,cy;sum=0;for(i=0,il=_4f.length-1;i<il;i++){bx=_4f[i].x;by=_4f[i].y;cx=_4f[i+1].x;cy=_4f[i+1].y;sum+=(bx+cx)*(cy-by);}return -sum/2;};jsts.algorithm.CGAlgorithms.signedArea=function(_50){var n,sum,p,bx,by,i,cx,cy;n=_50.length;if(n<3){return 0;}sum=0;p=_50[0];bx=p.x;by=p.y;for(i=1;i<n;i++){p=_50[i];cx=p.x;cy=p.y;sum+=(bx+cx)*(cy-by);bx=cx;by=cy;}return -sum/2;};jsts.algorithm.CGAlgorithms.computeLength=function(pts){var n=pts.length,len,x0,y0,x1,y1,dx,dy,p,i,il;if(n<=1){return 0;}len=0;p=pts[0];x0=p.x;y0=p.y;i=1,il=n;for(i;i<n;i++){p=pts[i];x1=p.x;y1=p.y;dx=x1-x0;dy=y1-y0;len+=Math.sqrt(dx*dx+dy*dy);x0=x1;y0=y1;}return len;};jsts.algorithm.CGAlgorithms.length=function(){};jsts.algorithm.Angle=function(){};jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI;jsts.algorithm.Angle.PI_OVER_2=Math.PI/2;jsts.algorithm.Angle.PI_OVER_4=Math.PI/4;jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.CLOCKWISE;jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.COLLINEAR;jsts.algorithm.Angle.toDegrees=function(_51){return (_51*180)/Math.PI;};jsts.algorithm.Angle.toRadians=function(_52){return (_52*Math.PI)/180;};jsts.algorithm.Angle.angle=function(){if(arguments.length===1){return jsts.algorithm.Angle.angleFromOrigo(arguments[0]);}else{return jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1]);}};jsts.algorithm.Angle.angleBetweenCoords=function(p0,p1){var dx,dy;dx=p1.x-p0.x;dy=p1.y-p0.y;return Math.atan2(dy,dx);};jsts.algorithm.Angle.angleFromOrigo=function(p){return Math.atan2(p.y,p.x);};jsts.algorithm.Angle.isAcute=function(p0,p1,p2){var dx0,dy0,dx1,dy1,_53;dx0=p0.x-p1.x;dy0=p0.y-p1.y;dx1=p2.x-p1.x;dy1=p2.y-p1.y;_53=dx0*dx1+dy0*dy1;return _53>0;};jsts.algorithm.Angle.isObtuse=function(p0,p1,p2){var dx0,dy0,dx1,dy1,_54;dx0=p0.x-p1.x;dy0=p0.y-p1.y;dx1=p2.x-p1.x;dy1=p2.y-p1.y;_54=dx0*dx1+dy0*dy1;return _54<0;};jsts.algorithm.Angle.angleBetween=function(_55,_56,_57){var a1,a2;a1=jsts.algorithm.Angle.angle(_56,_55);a2=jsts.algorithm.Angle.angle(_56,_57);return jsts.algorithm.Angle.diff(a1,a2);};jsts.algorithm.Angle.angleBetweenOriented=function(_58,_59,_5a){var a1,a2,_5b;a1=jsts.algorithm.Angle.angle(_59,_58);a2=jsts.algorithm.Angle.angle(_59,_5a);_5b=a2-a1;if(_5b<=-Math.PI){return _5b+jsts.algorithm.Angle.PI_TIMES_2;}if(_5b>Math.PI){return _5b-jsts.algorithm.Angle.PI_TIMES_2;}return _5b;};jsts.algorithm.Angle.interiorAngle=function(p0,p1,p2){var _5c,_5d;_5c=jsts.algorithm.Angle.angle(p1,p0);_5d=jsts.algorithm.Angle.angle(p1,p2);return Math.abs(_5d-_5c);};jsts.algorithm.Angle.getTurn=function(_5e,_5f){var _60=Math.sin(_5f-_5e);if(_60>0){return jsts.algorithm.Angle.COUNTERCLOCKWISE;}if(_60<0){return jsts.algorithm.Angle.CLOCKWISE;}return jsts.algorithm.Angle.NONE;};jsts.algorithm.Angle.normalize=function(_61){while(_61>Math.PI){_61-=jsts.algorithm.Angle.PI_TIMES_2;}while(_61<=-Math.PI){_61+=jsts.algorithm.Angle.PI_TIMES_2;}return _61;};jsts.algorithm.Angle.normalizePositive=function(_62){if(_62<0){while(_62<0){_62+=jsts.algorithm.Angle.PI_TIMES_2;}if(_62>=jsts.algorithm.Angle.PI_TIMES_2){_62=0;}}else{while(_62>=jsts.algorithm.Angle.PI_TIMES_2){_62-=jsts.algorithm.Angle.PI_TIMES_2;}if(_62<0){_62=0;}}return _62;};jsts.algorithm.Angle.diff=function(_63,_64){var _65;if(_63<_64){_65=_64-_63;}else{_65=_63-_64;}if(_65>Math.PI){_65=(2*Math.PI)-_65;}return _65;};jsts.geom.GeometryComponentFilter=function(){};jsts.geom.GeometryComponentFilter.prototype.filter=function(_66){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.util.LinearComponentExtracter=function(_67,_68){this.lines=_67;this.isForcedToLineString=_68;};jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter();jsts.geom.util.LinearComponentExtracter.prototype.lines=null;jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=false;jsts.geom.util.LinearComponentExtracter.getLines=function(_69,_6a){if(arguments.length==1){return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);}else{if(arguments.length==2&&typeof _6a==="boolean"){return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);}else{if(arguments.length==2&&_69 instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);}else{if(arguments.length==3&&_69 instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);}else{if(arguments.length==3){return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);}}}}}for(var i=0;i<_69.length;i++){var g=_69[i];jsts.geom.util.LinearComponentExtracter.getLines3(g,_6a);}return _6a;};jsts.geom.util.LinearComponentExtracter.getLines2=function(_6b,_6c,_6d){for(var i=0;i<_6b.length;i++){var g=_6b[i];jsts.geom.util.LinearComponentExtracter.getLines4(g,_6c,_6d);}return _6c;};jsts.geom.util.LinearComponentExtracter.getLines3=function(_6e,_6f){if(_6e instanceof LineString){_6f.add(_6e);}else{_6e.apply(new jsts.geom.util.LinearComponentExtracter(_6f));}return _6f;};jsts.geom.util.LinearComponentExtracter.getLines4=function(_70,_71,_72){_70.apply(new jsts.geom.util.LinearComponentExtracter(_71,_72));return _71;};jsts.geom.util.LinearComponentExtracter.getLines5=function(_73){return jsts.geom.util.LinearComponentExtracter.getLines6(_73,false);};jsts.geom.util.LinearComponentExtracter.getLines6=function(_74,_75){var _76=[];_74.apply(new jsts.geom.util.LinearComponentExtracter(_76,_75));return _76;};jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(_77){this.isForcedToLineString=_77;};jsts.geom.util.LinearComponentExtracter.prototype.filter=function(_78){if(this.isForcedToLineString&&_78 instanceof jsts.geom.LinearRing){var _79=_78.getFactory().createLineString(_78.getCoordinateSequence());this.lines.push(_79);return;}if(_78 instanceof jsts.geom.LineString||_78 instanceof jsts.geom.LinearRing){this.lines.push(_78);}};jsts.geom.Location=function(){};jsts.geom.Location.INTERIOR=0;jsts.geom.Location.BOUNDARY=1;jsts.geom.Location.EXTERIOR=2;jsts.geom.Location.NONE=-1;jsts.geom.Location.toLocationSymbol=function(_7a){switch(_7a){case jsts.geom.Location.EXTERIOR:return "e";case jsts.geom.Location.BOUNDARY:return "b";case jsts.geom.Location.INTERIOR:return "i";case jsts.geom.Location.NONE:return "-";}throw new jsts.IllegalArgumentError("Unknown location value: "+_7a);};(function(){jsts.io.GeoJSONReader=function(_7b){this.geometryFactory=_7b||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.GeoJSONParser(this.geometryFactory);};jsts.io.GeoJSONReader.prototype.read=function(_7c){var _7d=this.parser.read(_7c);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(_7d);}return _7d;};jsts.io.GeoJSONReader.prototype.reducePrecision=function(_7e){var i,len;if(_7e.coordinate){this.precisionModel.makePrecise(_7e.coordinate);}else{if(_7e.points){for(i=0,len=_7e.points.length;i<len;i++){this.precisionModel.makePrecise(_7e.points[i]);}}else{if(_7e.geometries){for(i=0,len=_7e.geometries.length;i<len;i++){this.reducePrecision(_7e.geometries[i]);}}}}};})();jsts.geom.Geometry=function(_7f){this.factory=_7f;};jsts.geom.Geometry.prototype.envelope=null;jsts.geom.Geometry.prototype.factory=null;jsts.geom.Geometry.prototype.getGeometryType=function(){return "Geometry";};jsts.geom.Geometry.hasNonEmptyElements=function(_80){var i;for(i=0;i<_80.length;i++){if(!_80[i].isEmpty()){return true;}}return false;};jsts.geom.Geometry.hasNullElements=function(_81){var i;for(i=0;i<_81.length;i++){if(_81[i]===null){return true;}}return false;};jsts.geom.Geometry.prototype.getFactory=function(){if(this.factory===null||this.factory===undefined){this.factory=new jsts.geom.GeometryFactory();}return this.factory;};jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1;};jsts.geom.Geometry.prototype.getGeometryN=function(n){return this;};jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel();};jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var op=new jsts.operation.IsSimpleOp(this);return op.isSimple();};jsts.geom.Geometry.prototype.isValid=function(){var _82=new jsts.operation.valid.IsValidOp(this);return _82.isValid();};jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.distance=function(g){return jsts.operation.distance.DistanceOp.distance(this,g);};jsts.geom.Geometry.prototype.isWithinDistance=function(_83,_84){var _85=this.getEnvelopeInternal().distance(_83.getEnvelopeInternal());if(_85>_84){return false;}return DistanceOp.isWithinDistance(this,_83,_84);};jsts.geom.Geometry.prototype.isRectangle=function(){return false;};jsts.geom.Geometry.prototype.getArea=function(){return 0;};jsts.geom.Geometry.prototype.getLength=function(){return 0;};jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty()){return null;}var _86;var _87=null;var dim=this.getDimension();if(dim===0){_86=new jsts.algorithm.CentroidPoint();_86.add(this);_87=_86.getCentroid();}else{if(dim===1){_86=new jsts.algorithm.CentroidLine();_86.add(this);_87=_86.getCentroid();}else{_86=new jsts.algorithm.CentroidArea();_86.add(this);_87=_86.getCentroid();}}return this.createPointFromInternalCoord(_87,this);};jsts.geom.Geometry.prototype.getInteriorPoint=function(){var _88;var _89=null;var dim=this.getDimension();if(dim===0){_88=new jsts.algorithm.InteriorPointPoint(this);_89=_88.getInteriorPoint();}else{if(dim===1){_88=new jsts.algorithm.InteriorPointLine(this);_89=_88.getInteriorPoint();}else{_88=new jsts.algorithm.InteriorPointArea(this);_89=_88.getInteriorPoint();}}return this.createPointFromInternalCoord(_89,this);};jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal());};jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){if(this.envelope===null){this.envelope=this.computeEnvelopeInternal();}return this.envelope;};jsts.geom.Geometry.prototype.disjoint=function(g){return !this.intersects(g);};jsts.geom.Geometry.prototype.touches=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}return this.relate(g).isTouches(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.intersects=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}if(this.isRectangle()){return jsts.operation.predicate.RectangleIntersects.intersects(this,g);}if(g.isRectangle()){return jsts.operation.predicate.RectangleIntersects.intersects(g,this);}return this.relate(g).isIntersects();};jsts.geom.Geometry.prototype.crosses=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}return this.relate(g).isCrosses(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.within=function(g){return g.contains(this);};jsts.geom.Geometry.prototype.contains=function(g){if(!this.getEnvelopeInternal().contains(g.getEnvelopeInternal())){return false;}if(this.isRectangle()){return jsts.operation.predicate.RectangleContains.contains(this,g);}return this.relate(g).isContains();};jsts.geom.Geometry.prototype.overlaps=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}return this.relate(g).isOverlaps(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.covers=function(g){if(!this.getEnvelopeInternal().covers(g.getEnvelopeInternal())){return false;}if(this.isRectangle()){return true;}return this.relate(g).isCovers();};jsts.geom.Geometry.prototype.coveredBy=function(g){return g.covers(this);};jsts.geom.Geometry.prototype.relate=function(g,_8a){if(arguments.length===1){return this.relate2.apply(this,arguments);}return this.relate2(g).matches(_8a);};jsts.geom.Geometry.prototype.relate2=function(g){this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(g);return jsts.operation.relate.RelateOp.relate(this,g);};jsts.geom.Geometry.prototype.equalsTopo=function(g){if(!this.getEnvelopeInternal().equals(g.getEnvelopeInternal())){return false;}return this.relate(g).isEquals(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.equals=function(o){if(o instanceof jsts.geom.Geometry||o instanceof jsts.geom.LinearRing||o instanceof jsts.geom.Polygon||o instanceof jsts.geom.GeometryCollection||o instanceof jsts.geom.MultiPoint||o instanceof jsts.geom.MultiLineString||o instanceof jsts.geom.MultiPolygon){return this.equalsExact(o);}return false;};jsts.geom.Geometry.prototype.buffer=function(_8b,_8c,_8d){var _8e=new jsts.operation.buffer.BufferParameters(_8c,_8d);return jsts.operation.buffer.BufferOp.bufferOp2(this,_8b,_8e);};jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull();};jsts.geom.Geometry.prototype.intersection=function(_8f){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null);}if(_8f.isEmpty()){return this.getFactory().createGeometryCollection(null);}if(this.isGeometryCollection(this)){var g2=_8f;}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(_8f);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,_8f,jsts.operation.overlay.OverlayOp.INTERSECTION);};jsts.geom.Geometry.prototype.union=function(_90){if(arguments.length===0){return jsts.operation.union.UnaryUnionOp.union(this);}if(this.isEmpty()){return _90.clone();}if(_90.isEmpty()){return this.clone();}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(_90);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,_90,jsts.operation.overlay.OverlayOp.UNION);};jsts.geom.Geometry.prototype.difference=function(_91){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null);}if(_91.isEmpty()){return this.clone();}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(_91);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,_91,jsts.operation.overlay.OverlayOp.DIFFERENCE);};jsts.geom.Geometry.prototype.symDifference=function(_92){if(this.isEmpty()){return _92.clone();}if(_92.isEmpty()){return this.clone();}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(_92);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,_92,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE);};jsts.geom.Geometry.prototype.equalsExact=function(_93,_94){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.equalsNorm=function(g){if(g===null||g===undefined){return false;}return this.norm().equalsExact(g.norm());};jsts.geom.Geometry.prototype.apply=function(_95){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.norm=function(){var _96=this.clone();_96.normalize();return _96;};jsts.geom.Geometry.prototype.compareTo=function(o){var _97=o;if(this.getClassSortIndex()!==_97.getClassSortIndex()){return this.getClassSortIndex()-_97.getClassSortIndex();}if(this.isEmpty()&&_97.isEmpty()){return 0;}if(this.isEmpty()){return -1;}if(_97.isEmpty()){return 1;}return this.compareToSameClass(o);};jsts.geom.Geometry.prototype.isEquivalentClass=function(_98){if(this instanceof jsts.geom.Point&&_98 instanceof jsts.geom.Point){return true;}else{if(this instanceof jsts.geom.LineString&&(_98 instanceof jsts.geom.LineString|_98 instanceof jsts.geom.LinearRing)){return true;}else{if(this instanceof jsts.geom.LinearRing&&(_98 instanceof jsts.geom.LineString|_98 instanceof jsts.geom.LinearRing)){return true;}else{if(this instanceof jsts.geom.Polygon&&(_98 instanceof jsts.geom.Polygon)){return true;}else{if(this instanceof jsts.geom.MultiPoint&&(_98 instanceof jsts.geom.MultiPoint)){return true;}else{if(this instanceof jsts.geom.MultiLineString&&(_98 instanceof jsts.geom.MultiLineString)){return true;}else{if(this instanceof jsts.geom.MultiPolygon&&(_98 instanceof jsts.geom.MultiPolygon)){return true;}else{if(this instanceof jsts.geom.GeometryCollection&&(_98 instanceof jsts.geom.GeometryCollection)){return true;}}}}}}}}return false;};jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(g){if(g.isGeometryCollectionBase()){throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection");}};jsts.geom.Geometry.prototype.isGeometryCollection=function(){return (this instanceof jsts.geom.GeometryCollection);};jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return (this.CLASS_NAME==="jsts.geom.GeometryCollection");};jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.compareToSameClass=function(o){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.compare=function(a,b){var i=a.iterator();var j=b.iterator();while(i.hasNext()&&j.hasNext()){var _99=i.next();var _9a=j.next();var _9b=_99.compareTo(_9a);if(_9b!==0){return _9b;}}if(i.hasNext()){return 1;}if(j.hasNext()){return -1;}return 0;};jsts.geom.Geometry.prototype.equal=function(a,b,_9c){if(_9c===undefined||_9c===null||_9c===0){return a.equals(b);}return a.distance(b)<=_9c;};jsts.geom.Geometry.prototype.getClassSortIndex=function(){var _9d=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection];for(var i=0;i<_9d.length;i++){if(this instanceof _9d[i]){return i;}}jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this);return -1;};jsts.geom.Geometry.prototype.toString=function(){return new jsts.io.WKTWriter().write(this);};jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(_9e,_9f){_9f.getPrecisionModel().makePrecise(_9e);return _9f.getFactory().createPoint(_9e);};(function(){jsts.geom.Coordinate=function(x,y){if(typeof x==="number"){this.x=x;this.y=y;}else{if(x instanceof jsts.geom.Coordinate){this.x=parseFloat(x.x);this.y=parseFloat(x.y);}else{if(x===undefined||x===null){this.x=0;this.y=0;}else{if(typeof x==="string"){this.x=parseFloat(x);this.y=parseFloat(y);}}}}};jsts.geom.Coordinate.prototype.setCoordinate=function(_a0){this.x=_a0.x;this.y=_a0.y;};jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y);};jsts.geom.Coordinate.prototype.distance=function(p){var dx=this.x-p.x;var dy=this.y-p.y;return Math.sqrt(dx*dx+dy*dy);};jsts.geom.Coordinate.prototype.equals2D=function(_a1){if(this.x!==_a1.x){return false;}if(this.y!==_a1.y){return false;}return true;};jsts.geom.Coordinate.prototype.equals=function(_a2){if(!_a2 instanceof jsts.geom.Coordinate||_a2===undefined){return false;}return this.equals2D(_a2);};jsts.geom.Coordinate.prototype.compareTo=function(_a3){if(this.x<_a3.x){return -1;}if(this.x>_a3.x){return 1;}if(this.y<_a3.y){return -1;}if(this.y>_a3.y){return 1;}return 0;};jsts.geom.Coordinate.prototype.toString=function(){return "("+this.x+", "+this.y+")";};})();jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments);};jsts.geom.Envelope.prototype.minx=null;jsts.geom.Envelope.prototype.maxx=null;jsts.geom.Envelope.prototype.miny=null;jsts.geom.Envelope.prototype.maxy=null;jsts.geom.Envelope.prototype.init=function(){if(typeof arguments[0]==="number"&&arguments.length===4){this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]);}else{if(arguments[0] instanceof jsts.geom.Coordinate&&arguments.length===1){this.initFromCoordinate(arguments[0]);}else{if(arguments[0] instanceof jsts.geom.Coordinate&&arguments.length===2){this.initFromCoordinates(arguments[0],arguments[1]);}else{if(arguments[0] instanceof jsts.geom.Envelope&&arguments.length===1){this.initFromEnvelope(arguments[0]);}else{this.setToNull();}}}}};jsts.geom.Envelope.prototype.initFromValues=function(x1,x2,y1,y2){if(x1<x2){this.minx=x1;this.maxx=x2;}else{this.minx=x2;this.maxx=x1;}if(y1<y2){this.miny=y1;this.maxy=y2;}else{this.miny=y2;this.maxy=y1;}};jsts.geom.Envelope.prototype.initFromCoordinates=function(p1,p2){this.initFromValues(p1.x,p2.x,p1.y,p2.y);};jsts.geom.Envelope.prototype.initFromCoordinate=function(p){this.initFromValues(p.x,p.x,p.y,p.y);};jsts.geom.Envelope.prototype.initFromEnvelope=function(env){this.minx=env.minx;this.maxx=env.maxx;this.miny=env.miny;this.maxy=env.maxy;};jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0;this.maxx=-1;this.miny=0;this.maxy=-1;};jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx;};jsts.geom.Envelope.prototype.getHeight=function(){if(this.isNull()){return 0;}return this.maxy-this.miny;};jsts.geom.Envelope.prototype.getWidth=function(){if(this.isNull()){return 0;}return this.maxx-this.minx;};jsts.geom.Envelope.prototype.getMinX=function(){return this.minx;};jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx;};jsts.geom.Envelope.prototype.getMinY=function(){return this.miny;};jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy;};jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight();};jsts.geom.Envelope.prototype.expandToInclude=function(){if(arguments[0] instanceof jsts.geom.Coordinate){this.expandToIncludeCoordinate(arguments[0]);}else{if(arguments[0] instanceof jsts.geom.Envelope){this.expandToIncludeEnvelope(arguments[0]);}else{this.expandToIncludeValues(arguments[0],arguments[1]);}}};jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(p){this.expandToIncludeValues(p.x,p.y);};jsts.geom.Envelope.prototype.expandToIncludeValues=function(x,y){if(this.isNull()){this.minx=x;this.maxx=x;this.miny=y;this.maxy=y;}else{if(x<this.minx){this.minx=x;}if(x>this.maxx){this.maxx=x;}if(y<this.miny){this.miny=y;}if(y>this.maxy){this.maxy=y;}}};jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(_a4){if(_a4.isNull()){return;}if(this.isNull()){this.minx=_a4.getMinX();this.maxx=_a4.getMaxX();this.miny=_a4.getMinY();this.maxy=_a4.getMaxY();}else{if(_a4.minx<this.minx){this.minx=_a4.minx;}if(_a4.maxx>this.maxx){this.maxx=_a4.maxx;}if(_a4.miny<this.miny){this.miny=_a4.miny;}if(_a4.maxy>this.maxy){this.maxy=_a4.maxy;}}};jsts.geom.Envelope.prototype.expandBy=function(){if(arguments.length===1){this.expandByDistance(arguments[0]);}else{this.expandByDistances(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.expandByDistance=function(_a5){this.expandByDistances(_a5,_a5);};jsts.geom.Envelope.prototype.expandByDistances=function(_a6,_a7){if(this.isNull()){return;}this.minx-=_a6;this.maxx+=_a6;this.miny-=_a7;this.maxy+=_a7;if(this.minx>this.maxx||this.miny>this.maxy){this.setToNull();}};jsts.geom.Envelope.prototype.translate=function(_a8,_a9){if(this.isNull()){return;}this.init(this.minx+_a8,this.maxx+_a8,this.miny+_a9,this.maxy+_a9);};jsts.geom.Envelope.prototype.centre=function(){if(this.isNull()){return null;}return new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2);};jsts.geom.Envelope.prototype.intersection=function(env){if(this.isNull()||env.isNull()||!this.intersects(env)){return new jsts.geom.Envelope();}var _aa=this.minx>env.minx?this.minx:env.minx;var _ab=this.miny>env.miny?this.miny:env.miny;var _ac=this.maxx<env.maxx?this.maxx:env.maxx;var _ad=this.maxy<env.maxy?this.maxy:env.maxy;return new jsts.geom.Envelope(_aa,_ac,_ab,_ad);};jsts.geom.Envelope.prototype.intersects=function(){if(arguments[0] instanceof jsts.geom.Envelope){return this.intersectsEnvelope(arguments[0]);}else{if(arguments[0] instanceof jsts.geom.Coordinate){return this.intersectsCoordinate(arguments[0]);}else{return this.intersectsValues(arguments[0],arguments[1]);}}};jsts.geom.Envelope.prototype.intersectsEnvelope=function(_ae){if(this.isNull()||_ae.isNull()){return false;}var _af=!(_ae.minx>this.maxx||_ae.maxx<this.minx||_ae.miny>this.maxy||_ae.maxy<this.miny);return _af;};jsts.geom.Envelope.prototype.intersectsCoordinate=function(p){return this.intersectsValues(p.x,p.y);};jsts.geom.Envelope.prototype.intersectsValues=function(x,y){if(this.isNull()){return false;}return !(x>this.maxx||x<this.minx||y>this.maxy||y<this.miny);};jsts.geom.Envelope.prototype.contains=function(){if(arguments[0] instanceof jsts.geom.Envelope){return this.containsEnvelope(arguments[0]);}else{if(arguments[0] instanceof jsts.geom.Coordinate){return this.containsCoordinate(arguments[0]);}else{return this.containsValues(arguments[0],arguments[1]);}}};jsts.geom.Envelope.prototype.containsEnvelope=function(_b0){return this.coversEnvelope(_b0);};jsts.geom.Envelope.prototype.containsCoordinate=function(p){return this.coversCoordinate(p);};jsts.geom.Envelope.prototype.containsValues=function(x,y){return this.coversValues(x,y);};jsts.geom.Envelope.prototype.covers=function(){if(arguments[0] instanceof jsts.geom.Envelope){return this.coversEnvelope(arguments[0]);}else{if(arguments[0] instanceof jsts.geom.Coordinate){return this.coversCoordinate(arguments[0]);}else{return this.coversValues(arguments[0],arguments[1]);}}};jsts.geom.Envelope.prototype.coversValues=function(x,y){if(this.isNull()){return false;}return x>=this.minx&&x<=this.maxx&&y>=this.miny&&y<=this.maxy;};jsts.geom.Envelope.prototype.coversCoordinate=function(p){return this.coversValues(p.x,p.y);};jsts.geom.Envelope.prototype.coversEnvelope=function(_b1){if(this.isNull()||_b1.isNull()){return false;}return _b1.minx>=this.minx&&_b1.maxx<=this.maxx&&_b1.miny>=this.miny&&_b1.maxy<=this.maxy;};jsts.geom.Envelope.prototype.distance=function(env){if(this.intersects(env)){return 0;}var dx=0;if(this.maxx<env.minx){dx=env.minx-this.maxx;}if(this.minx>env.maxx){dx=this.minx-env.maxx;}var dy=0;if(this.maxy<env.miny){dy=env.miny-this.maxy;}if(this.miny>env.maxy){dy=this.miny-env.maxy;}if(dx===0){return dy;}if(dy===0){return dx;}return Math.sqrt(dx*dx+dy*dy);};jsts.geom.Envelope.prototype.equals=function(_b2){if(this.isNull()){return _b2.isNull();}return this.maxx===_b2.maxx&&this.maxy===_b2.maxy&&this.minx===_b2.minx&&this.miny===_b2.miny;};jsts.geom.Envelope.prototype.toString=function(){return "Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]";};jsts.geom.Envelope.intersects=function(p1,p2,q){if(arguments.length===4){return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);}var xc1=p1.x<p2.x?p1.x:p2.x;var xc2=p1.x>p2.x?p1.x:p2.x;var yc1=p1.y<p2.y?p1.y:p2.y;var yc2=p1.y>p2.y?p1.y:p2.y;if(((q.x>=xc1)&&(q.x<=xc2))&&((q.y>=yc1)&&(q.y<=yc2))){return true;}return false;};jsts.geom.Envelope.intersectsEnvelope=function(p1,p2,q1,q2){var _b3=Math.min(q1.x,q2.x);var _b4=Math.max(q1.x,q2.x);var _b5=Math.min(p1.x,p2.x);var _b6=Math.max(p1.x,p2.x);if(_b5>_b4){return false;}if(_b6<_b3){return false;}_b3=Math.min(q1.y,q2.y);_b4=Math.max(q1.y,q2.y);_b5=Math.min(p1.y,p2.y);_b6=Math.max(p1.y,p2.y);if(_b5>_b4){return false;}if(_b6<_b3){return false;}return true;};jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy);};jsts.geom.util.GeometryCombiner=function(_b7){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(_b7);this.inputGeoms=_b7;};jsts.geom.util.GeometryCombiner.combine=function(_b8){if(arguments.length>1){return this.combine2.apply(this,arguments);}var _b9=new jsts.geom.util.GeometryCombiner(_b8);return _b9.combine();};jsts.geom.util.GeometryCombiner.combine2=function(){var _ba=new javascript.util.ArrayList();Array.prototype.slice.call(arguments).forEach(function(a){_ba.add(a);});var _bb=new jsts.geom.util.GeometryCombiner(_ba);return _bb.combine();};jsts.geom.util.GeometryCombiner.prototype.geomFactory=null;jsts.geom.util.GeometryCombiner.prototype.skipEmpty=false;jsts.geom.util.GeometryCombiner.prototype.inputGeoms;jsts.geom.util.GeometryCombiner.extractFactory=function(_bc){if(_bc.isEmpty()){return null;}return _bc.iterator().next().getFactory();};jsts.geom.util.GeometryCombiner.prototype.combine=function(){var _bd=new javascript.util.ArrayList(),i;for(i=this.inputGeoms.iterator();i.hasNext();){var g=i.next();this.extractElements(g,_bd);}if(_bd.size()===0){if(this.geomFactory!==null){return this.geomFactory.createGeometryCollection(null);}return null;}return this.geomFactory.buildGeometry(_bd);};jsts.geom.util.GeometryCombiner.prototype.extractElements=function(_be,_bf){if(_be===null){return;}for(var i=0;i<_be.getNumGeometries();i++){var _c0=_be.getGeometryN(i);if(this.skipEmpty&&_c0.isEmpty()){continue;}_bf.add(_c0);}};jsts.geom.PrecisionModel=function(_c1){if(typeof _c1==="number"){this.modelType=jsts.geom.PrecisionModel.FIXED;this.scale=_c1;return;}this.modelType=_c1||jsts.geom.PrecisionModel.FLOATING;if(this.modelType===jsts.geom.PrecisionModel.FIXED){this.scale=1;}};jsts.geom.PrecisionModel.FLOATING="FLOATING";jsts.geom.PrecisionModel.FIXED="FIXED";jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE";jsts.geom.PrecisionModel.prototype.scale=null;jsts.geom.PrecisionModel.prototype.modelType=null;jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE;};jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale;};jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType;};jsts.geom.PrecisionModel.prototype.equals=function(_c2){return true;if(!(_c2 instanceof jsts.geom.PrecisionModel)){return false;}var _c3=_c2;return this.modelType===_c3.modelType&&this.scale===_c3.scale;};jsts.geom.PrecisionModel.prototype.makePrecise=function(val){if(val instanceof jsts.geom.Coordinate){this.makePrecise2(val);return;}if(isNaN(val)){return val;}if(this.modelType===jsts.geom.PrecisionModel.FIXED){return Math.round(val*this.scale)/this.scale;}return val;};jsts.geom.PrecisionModel.prototype.makePrecise2=function(_c4){if(this.modelType===jsts.geom.PrecisionModel.FLOATING){return;}_c4.x=this.makePrecise(_c4.x);_c4.y=this.makePrecise(_c4.y);};jsts.geom.PrecisionModel.prototype.compareTo=function(o){var _c5=o;return 0;};jsts.geom.CoordinateFilter=function(){};jsts.geom.CoordinateFilter.prototype.filter=function(_c6){throw new jsts.error.AbstractMethodInvocationError();};jsts.simplify.DouglasPeuckerLineSimplifier=function(pts){this.pts=pts;this.seg=new jsts.geom.LineSegment();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.pts=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.usePt=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.distanceTolerance=null;jsts.simplify.DouglasPeuckerLineSimplifier.simplify=function(pts,_c7){var _c8=new jsts.simplify.DouglasPeuckerLineSimplifier(pts);_c8.setDistanceTolerance(_c7);return _c8.simplify();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.setDistanceTolerance=function(_c9){this.distanceTolerance=_c9;};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplify=function(){this.usePt=[];for(var i=0;i<this.pts.length;i++){this.usePt[i]=true;}this.simplifySection(0,this.pts.length-1);var _ca=new jsts.geom.CoordinateList();for(var j=0;j<this.pts.length;j++){if(this.usePt[j]){_ca.add(new jsts.geom.Coordinate(this.pts[j]));}}return _ca.toCoordinateArray();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.seg=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplifySection=function(i,j){if(i+1==j){return;}this.seg.p0=this.pts[i];this.seg.p1=this.pts[j];var _cb=-1;var _cc=i;for(var k=i+1;k<j;k++){var _cd=this.seg.distance(this.pts[k]);if(_cd>_cb){_cb=_cd;_cc=k;}}if(_cb<=this.distanceTolerance){for(var l=i+1;l<j;l++){this.usePt[l]=false;}}else{this.simplifySection(i,_cc);this.simplifySection(_cc,j);}};jsts.geomgraph.EdgeIntersection=function(_ce,_cf,_d0){this.coord=new jsts.geom.Coordinate(_ce);this.segmentIndex=_cf;this.dist=_d0;};jsts.geomgraph.EdgeIntersection.prototype.coord=null;jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null;jsts.geomgraph.EdgeIntersection.prototype.dist=null;jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord;};jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex;};jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist;};jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(_d1){return this.compare(_d1.segmentIndex,_d1.dist);};jsts.geomgraph.EdgeIntersection.prototype.compare=function(_d2,_d3){if(this.segmentIndex<_d2){return -1;}if(this.segmentIndex>_d2){return 1;}if(this.dist<_d3){return -1;}if(this.dist>_d3){return 1;}return 0;};jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(_d4){if(this.segmentIndex===0&&this.dist===0){return true;}if(this.segmentIndex===_d4){return true;}return false;};jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return ""+this.segmentIndex+this.dist;};(function(){var _d5=jsts.geomgraph.EdgeIntersection;var _d6=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(_d7){this.nodeMap=new _d6();this.edge=_d7;};jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null;jsts.geomgraph.EdgeIntersectionList.prototype.edge=null;jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(pt){for(var it=this.iterator();it.hasNext();){var ei=it.next();if(ei.coord.equals(pt)){return true;}}return false;};jsts.geomgraph.EdgeIntersectionList.prototype.add=function(_d8,_d9,_da){var _db=new _d5(_d8,_d9,_da);var ei=this.nodeMap.get(_db);if(ei!==null){return ei;}this.nodeMap.put(_db,_db);return _db;};jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator();};jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var _dc=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[_dc],_dc,0);};jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(_dd){this.addEndpoints();var it=this.iterator();var _de=it.next();while(it.hasNext()){var ei=it.next();var _df=this.createSplitEdge(_de,ei);_dd.add(_df);_de=ei;}};jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(ei0,ei1){var _e0=ei1.segmentIndex-ei0.segmentIndex+2;var _e1=this.edge.pts[ei1.segmentIndex];var _e2=ei1.dist>0||!ei1.coord.equals2D(_e1);if(!_e2){_e0--;}var pts=[];var ipt=0;pts[ipt++]=new jsts.geom.Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++){pts[ipt++]=this.edge.pts[i];}if(_e2){pts[ipt]=ei1.coord;}return new jsts.geomgraph.Edge(pts,new jsts.geomgraph.Label(this.edge.label));};})();(function(){var _e3=function(_e4){this.message=_e4;};_e3.prototype=new Error();_e3.prototype.name="AssertionFailedException";jsts.util.AssertionFailedException=_e3;})();(function(){var _e5=jsts.util.AssertionFailedException;jsts.util.Assert=function(){};jsts.util.Assert.isTrue=function(_e6,_e7){if(!_e6){if(_e7===null){throw new _e5();}else{throw new _e5(_e7);}}};jsts.util.Assert.equals=function(_e8,_e9,_ea){if(!_e9.equals(_e8)){throw new _e5("Expected "+_e8+" but encountered "+_e9+(_ea!=null?": "+_ea:""));}};jsts.util.Assert.shouldNeverReachHere=function(_eb){throw new _e5("Should never reach here"+(_eb!=null?": "+_eb:""));};})();(function(){var _ec=jsts.geom.Location;var _ed=jsts.util.Assert;var _ee=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(arg){this.li=new jsts.algorithm.RobustLineIntersector();this.ptLocator=new jsts.algorithm.PointLocator();this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory());this.isolatedEdges=new _ee();this.arg=arg;};jsts.operation.relate.RelateComputer.prototype.li=null;jsts.operation.relate.RelateComputer.prototype.ptLocator=null;jsts.operation.relate.RelateComputer.prototype.arg=null;jsts.operation.relate.RelateComputer.prototype.nodes=null;jsts.operation.relate.RelateComputer.prototype.im=null;jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null;jsts.operation.relate.RelateComputer.prototype.invalidPoint=null;jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var im=new jsts.geom.IntersectionMatrix();im.set(_ec.EXTERIOR,_ec.EXTERIOR,2);if(!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal())){this.computeDisjointIM(im);return im;}this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);var _ef=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,false);this.computeIntersectionNodes(0);this.computeIntersectionNodes(1);this.copyNodesAndLabels(0);this.copyNodesAndLabels(1);this.labelIsolatedNodes();this.computeProperIntersectionIM(_ef,im);var _f0=new jsts.operation.relate.EdgeEndBuilder();var ee0=_f0.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(ee0);var ee1=_f0.computeEdgeEnds(this.arg[1].getEdgeIterator());this.insertEdgeEnds(ee1);this.labelNodeEdges();this.labelIsolatedEdges(0,1);this.labelIsolatedEdges(1,0);this.updateIM(im);return im;};jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(ee){for(var i=ee.iterator();i.hasNext();){var e=i.next();this.nodes.add(e);}};jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(_f1,im){var _f2=this.arg[0].getGeometry().getDimension();var _f3=this.arg[1].getGeometry().getDimension();var _f4=_f1.hasProperIntersection();var _f5=_f1.hasProperInteriorIntersection();if(_f2===2&&_f3===2){if(_f4){im.setAtLeast("212101212");}}else{if(_f2===2&&_f3===1){if(_f4){im.setAtLeast("FFF0FFFF2");}if(_f5){im.setAtLeast("1FFFFF1FF");}}else{if(_f2===1&&_f3===2){if(_f4){im.setAtLeast("F0FFFFFF2");}if(_f5){im.setAtLeast("1F1FFFFFF");}}else{if(_f2===1&&_f3===1){if(_f5){im.setAtLeast("0FFFFFFFF");}}}}}};jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(_f6){for(var i=this.arg[_f6].getNodeIterator();i.hasNext();){var _f7=i.next();var _f8=this.nodes.addNode(_f7.getCoordinate());_f8.setLabel(_f6,_f7.getLabel().getLocation(_f6));}};jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(_f9){for(var i=this.arg[_f9].getEdgeIterator();i.hasNext();){var e=i.next();var _fa=e.getLabel().getLocation(_f9);for(var _fb=e.getEdgeIntersectionList().iterator();_fb.hasNext();){var ei=_fb.next();var n=this.nodes.addNode(ei.coord);if(_fa===_ec.BOUNDARY){n.setLabelBoundary(_f9);}else{if(n.getLabel().isNull(_f9)){n.setLabel(_f9,_ec.INTERIOR);}}}}};jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(_fc){for(var i=this.arg[_fc].getEdgeIterator();i.hasNext();){var e=i.next();var _fd=e.getLabel().getLocation(_fc);for(var _fe=e.getEdgeIntersectionList().iterator();_fe.hasNext();){var ei=_fe.next();var n=this.nodes.find(ei.coord);if(n.getLabel().isNull(_fc)){if(_fd===_ec.BOUNDARY){n.setLabelBoundary(_fc);}else{n.setLabel(_fc,_ec.INTERIOR);}}}}};jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(im){var ga=this.arg[0].getGeometry();if(!ga.isEmpty()){im.set(_ec.INTERIOR,_ec.EXTERIOR,ga.getDimension());im.set(_ec.BOUNDARY,_ec.EXTERIOR,ga.getBoundaryDimension());}var gb=this.arg[1].getGeometry();if(!gb.isEmpty()){im.set(_ec.EXTERIOR,_ec.INTERIOR,gb.getDimension());im.set(_ec.EXTERIOR,_ec.BOUNDARY,gb.getBoundaryDimension());}};jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var ni=this.nodes.iterator();ni.hasNext();){var _ff=ni.next();_ff.getEdges().computeLabelling(this.arg);}};jsts.operation.relate.RelateComputer.prototype.updateIM=function(im){for(var ei=this.isolatedEdges.iterator();ei.hasNext();){var e=ei.next();e.updateIM(im);}for(var ni=this.nodes.iterator();ni.hasNext();){var node=ni.next();node.updateIM(im);node.updateIMFromEdges(im);}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(_100,_101){for(var ei=this.arg[_100].getEdgeIterator();ei.hasNext();){var e=ei.next();if(e.isIsolated()){this.labelIsolatedEdge(e,_101,this.arg[_101].getGeometry());this.isolatedEdges.add(e);}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(e,_102,_103){if(_103.getDimension()>0){var loc=this.ptLocator.locate(e.getCoordinate(),_103);e.getLabel().setAllLocations(_102,loc);}else{e.getLabel().setAllLocations(_102,_ec.EXTERIOR);}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var ni=this.nodes.iterator();ni.hasNext();){var n=ni.next();var _104=n.getLabel();_ed.isTrue(_104.getGeometryCount()>0,"node with empty label found");if(n.isIsolated()){if(_104.isNull(0)){this.labelIsolatedNode(n,0);}else{this.labelIsolatedNode(n,1);}}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(n,_105){var loc=this.ptLocator.locate(n.getCoordinate(),this.arg[_105].getGeometry());n.getLabel().setAllLocations(_105,loc);};})();(function(){var _106=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(_107){this.label=_107;};jsts.geomgraph.GraphComponent.prototype.label=null;jsts.geomgraph.GraphComponent.prototype._isInResult=false;jsts.geomgraph.GraphComponent.prototype._isCovered=false;jsts.geomgraph.GraphComponent.prototype._isCoveredSet=false;jsts.geomgraph.GraphComponent.prototype._isVisited=false;jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label;};jsts.geomgraph.GraphComponent.prototype.setLabel=function(_108){if(arguments.length===2){this.setLabel2.apply(this,arguments);return;}this.label=_108;};jsts.geomgraph.GraphComponent.prototype.setInResult=function(_109){this._isInResult=_109;};jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult;};jsts.geomgraph.GraphComponent.prototype.setCovered=function(_10a){this._isCovered=_10a;this._isCoveredSet=true;};jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered;};jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet;};jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited;};jsts.geomgraph.GraphComponent.prototype.setVisited=function(_10b){this._isVisited=_10b;};jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.computeIM=function(im){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.updateIM=function(im){_106.isTrue(this.label.getGeometryCount()>=2,"found partial label");this.computeIM(im);};})();jsts.geomgraph.Node=function(_10c,_10d){this.coord=_10c;this.edges=_10d;this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE);};jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Node.prototype.coord=null;jsts.geomgraph.Node.prototype.edges=null;jsts.geomgraph.Node.prototype.isIsolated=function(){return (this.label.getGeometryCount()==1);};jsts.geomgraph.Node.prototype.setLabel2=function(_10e,_10f){if(this.label===null){this.label=new jsts.geomgraph.Label(_10e,_10f);}else{this.label.setLocation(_10e,_10f);}};jsts.geomgraph.Node.prototype.setLabelBoundary=function(_110){var loc=jsts.geom.Location.NONE;if(this.label!==null){loc=this.label.getLocation(_110);}var _111;switch(loc){case jsts.geom.Location.BOUNDARY:_111=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:_111=jsts.geom.Location.BOUNDARY;break;default:_111=jsts.geom.Location.BOUNDARY;break;}this.label.setLocation(_110,_111);};jsts.geomgraph.Node.prototype.add=function(e){this.edges.insert(e);e.setNode(this);};jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord;};jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var it=this.getEdges().getEdges().iterator();it.hasNext();){var de=it.next();if(de.getEdge().isInResult()){return true;}}return false;};jsts.geom.Point=function(_112,_113){this.factory=_113;if(_112===undefined){return;}this.coordinate=_112;};jsts.geom.Point.prototype=new jsts.geom.Geometry();jsts.geom.Point.constructor=jsts.geom.Point;jsts.geom.Point.CLASS_NAME="jsts.geom.Point";jsts.geom.Point.prototype.coordinate=null;jsts.geom.Point.prototype.getX=function(){return this.coordinate.x;};jsts.geom.Point.prototype.getY=function(){return this.coordinate.y;};jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate;};jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate];};jsts.geom.Point.prototype.getCoordinateSequence=function(){return this.isEmpty()?[]:[this.coordinate];};jsts.geom.Point.prototype.isEmpty=function(){return this.coordinate===null;};jsts.geom.Point.prototype.equalsExact=function(_114,_115){if(!this.isEquivalentClass(_114)){return false;}if(this.isEmpty()&&_114.isEmpty()){return true;}return this.equal(_114.getCoordinate(),this.getCoordinate(),_115);};jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1;};jsts.geom.Point.prototype.isSimple=function(){return true;};jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null);};jsts.geom.Point.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope();}return new jsts.geom.Envelope(this.coordinate);};jsts.geom.Point.prototype.apply=function(_116){if(_116 instanceof jsts.geom.GeometryFilter||_116 instanceof jsts.geom.GeometryComponentFilter){_116.filter(this);}else{if(_116 instanceof jsts.geom.CoordinateFilter){if(this.isEmpty()){return;}_116.filter(this.getCoordinate());}}};jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory);};jsts.geom.Point.prototype.getDimension=function(){return 0;};jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE;};jsts.geom.Point.prototype.reverse=function(){return this.clone();};jsts.geom.Point.prototype.isValid=function(){if(!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())){return false;}return true;};jsts.geom.Point.prototype.normalize=function(){};jsts.geom.Point.prototype.compareToSameClass=function(_117){var _118=_117;return this.getCoordinate().compareTo(_118.getCoordinate());};jsts.geom.Point.prototype.getGeometryType=function(){return "Point";};jsts.geom.Point.prototype.hashCode=function(){return "Point_"+this.coordinate.hashCode();};jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point";jsts.geom.Dimension=function(){};jsts.geom.Dimension.P=0;jsts.geom.Dimension.L=1;jsts.geom.Dimension.A=2;jsts.geom.Dimension.FALSE=-1;jsts.geom.Dimension.TRUE=-2;jsts.geom.Dimension.DONTCARE=-3;jsts.geom.Dimension.toDimensionSymbol=function(_119){switch(_119){case jsts.geom.Dimension.FALSE:return "F";case jsts.geom.Dimension.TRUE:return "T";case jsts.geom.Dimension.DONTCARE:return "*";case jsts.geom.Dimension.P:return "0";case jsts.geom.Dimension.L:return "1";case jsts.geom.Dimension.A:return "2";}throw new jsts.IllegalArgumentError("Unknown dimension value: "+_119);};jsts.geom.Dimension.toDimensionValue=function(_11a){switch(_11a.toUpperCase()){case "F":return jsts.geom.Dimension.FALSE;case "T":return jsts.geom.Dimension.TRUE;case "*":return jsts.geom.Dimension.DONTCARE;case "0":return jsts.geom.Dimension.P;case "1":return jsts.geom.Dimension.L;case "2":return jsts.geom.Dimension.A;}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+_11a);};(function(){var _11b=jsts.geom.Dimension;jsts.geom.LineString=function(_11c,_11d){this.factory=_11d;this.points=_11c||[];};jsts.geom.LineString.prototype=new jsts.geom.Geometry();jsts.geom.LineString.constructor=jsts.geom.LineString;jsts.geom.LineString.prototype.points=null;jsts.geom.LineString.prototype.getCoordinates=function(){return this.points;};jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points;};jsts.geom.LineString.prototype.getCoordinateN=function(n){return this.points[n];};jsts.geom.LineString.prototype.getCoordinate=function(){if(this.isEmpty()){return null;}return this.getCoordinateN(0);};jsts.geom.LineString.prototype.getDimension=function(){return 1;};jsts.geom.LineString.prototype.getBoundaryDimension=function(){if(this.isClosed()){return _11b.FALSE;}return 0;};jsts.geom.LineString.prototype.isEmpty=function(){return this.points.length===0;};jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length;};jsts.geom.LineString.prototype.getPointN=function(n){return this.getFactory().createPoint(this.points[n]);};jsts.geom.LineString.prototype.getStartPoint=function(){if(this.isEmpty()){return null;}return this.getPointN(0);};jsts.geom.LineString.prototype.getEndPoint=function(){if(this.isEmpty()){return null;}return this.getPointN(this.getNumPoints()-1);};jsts.geom.LineString.prototype.isClosed=function(){if(this.isEmpty()){return false;}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1));};jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple();};jsts.geom.LineString.prototype.getGeometryType=function(){return "LineString";};jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points);};jsts.geom.LineString.prototype.getBoundary=function(){return (new jsts.operation.BoundaryOp(this)).getBoundary();};jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope();}var env=new jsts.geom.Envelope();this.points.forEach(function(_11e){env.expandToInclude(_11e);});return env;};jsts.geom.LineString.prototype.equalsExact=function(_11f,_120){if(!this.isEquivalentClass(_11f)){return false;}if(this.points.length!==_11f.points.length){return false;}if(this.isEmpty()&&_11f.isEmpty()){return true;}return this.points.reduce(function(_121,_122,i){return _121&&jsts.geom.Geometry.prototype.equal(_122,_11f.points[i],_120);});};jsts.geom.LineString.prototype.isEquivalentClass=function(_123){return _123 instanceof jsts.geom.LineString;};jsts.geom.LineString.prototype.compareToSameClass=function(o){var line=o;var i=0,il=this.points.length;var j=0,jl=line.points.length;while(i<il&&j<jl){var _124=this.points[i].compareTo(line.points[j]);if(_124!==0){return _124;}i++;j++;}if(i<il){return 1;}if(j<jl){return -1;}return 0;};jsts.geom.LineString.prototype.apply=function(_125){if(_125 instanceof jsts.geom.GeometryFilter||_125 instanceof jsts.geom.GeometryComponentFilter){_125.filter(this);}else{if(_125 instanceof jsts.geom.CoordinateFilter){for(var i=0,len=this.points.length;i<len;i++){_125.filter(this.points[i]);}}else{if(_125 instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}}}};jsts.geom.LineString.prototype.apply2=function(_126){if(this.points.length===0){return;}for(var i=0;i<this.points.length;i++){_126.filter(this.points,i);if(_126.isDone()){break;}}if(_126.isGeometryChanged()){}};jsts.geom.LineString.prototype.clone=function(){var _127=[];for(var i=0,len=this.points.length;i<len;i++){_127.push(this.points[i].clone());}return this.factory.createLineString(_127);};jsts.geom.LineString.prototype.normalize=function(){var i,il,j,ci,cj,len;len=this.points.length;il=parseInt(len/2);for(i=0;i<il;i++){j=len-1-i;ci=this.points[i];cj=this.points[j];if(!ci.equals(cj)){if(ci.compareTo(cj)>0){this.points.reverse();}return;}}};jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString";})();(function(){jsts.geom.Polygon=function(_128,_129,_12a){this.shell=_128||_12a.createLinearRing(null);this.holes=_129||[];this.factory=_12a;};jsts.geom.Polygon.prototype=new jsts.geom.Geometry();jsts.geom.Polygon.constructor=jsts.geom.Polygon;jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate();};jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty()){return [];}var _12b=[];var k=-1;var _12c=this.shell.getCoordinates();for(var x=0;x<_12c.length;x++){k++;_12b[k]=_12c[x];}for(var i=0;i<this.holes.length;i++){var _12d=this.holes[i].getCoordinates();for(var j=0;j<_12d.length;j++){k++;_12b[k]=_12d[j];}}return _12b;};jsts.geom.Polygon.prototype.getNumPoints=function(){var _12e=this.shell.getNumPoints();for(var i=0;i<this.holes.length;i++){_12e+=this.holes[i].getNumPoints();}return _12e;};jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty();};jsts.geom.Polygon.prototype.isRectangle=function(){if(this.getNumInteriorRing()!=0){return false;}if(this.shell==null){return false;}if(this.shell.getNumPoints()!=5){return false;}var seq=this.shell.getCoordinateSequence();var env=this.getEnvelopeInternal();for(var i=0;i<5;i++){var x=seq[i].x;if(!(x==env.getMinX()||x==env.getMaxX())){return false;}var y=seq[i].y;if(!(y==env.getMinY()||y==env.getMaxY())){return false;}}var _12f=seq[0].x;var _130=seq[0].y;for(var i=1;i<=4;i++){var x=seq[i].x;var y=seq[i].y;var _131=x!=_12f;var _132=y!=_130;if(_131==_132){return false;}_12f=x;_130=y;}return true;};jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell;};jsts.geom.Polygon.prototype.getInteriorRingN=function(n){return this.holes[n];};jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length;};jsts.geom.Polygon.prototype.getArea=function(){var area=0;area+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var i=0;i<this.holes.length;i++){area-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[i].getCoordinateSequence()));}return area;};jsts.geom.Polygon.prototype.getLength=function(){var len=0;len+=this.shell.getLength();for(var i=0;i<this.holes.length;i++){len+=this.holes[i].getLength();}return len;};jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null);}var _133=[];_133[0]=this.shell.clone();for(var i=0,len=this.holes.length;i<len;i++){_133[i+1]=this.holes[i].clone();}if(_133.length<=1){return _133[0];}return this.getFactory().createMultiLineString(_133);};jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal();};jsts.geom.Polygon.prototype.getDimension=function(){return 2;};jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1;};jsts.geom.Polygon.prototype.equalsExact=function(_134,_135){if(!this.isEquivalentClass(_134)){return false;}if(this.isEmpty()&&_134.isEmpty()){return true;}if(this.isEmpty()!==_134.isEmpty()){return false;}if(!this.shell.equalsExact(_134.shell,_135)){return false;}if(this.holes.length!==_134.holes.length){return false;}if(this.holes.length!==_134.holes.length){return false;}for(var i=0;i<this.holes.length;i++){if(!(this.holes[i]).equalsExact(_134.holes[i],_135)){return false;}}return true;};jsts.geom.Polygon.prototype.compareToSameClass=function(o){return this.shell.compareToSameClass(o.shell);};jsts.geom.Polygon.prototype.apply=function(_136){if(_136 instanceof jsts.geom.GeometryComponentFilter){_136.filter(this);this.shell.apply(_136);for(var i=0,len=this.holes.length;i<len;i++){this.holes[i].apply(_136);}}else{if(_136 instanceof jsts.geom.GeometryFilter){_136.filter(this);}else{if(_136 instanceof jsts.geom.CoordinateFilter){this.shell.apply(_136);for(var i=0,len=this.holes.length;i<len;i++){this.holes[i].apply(_136);}}else{if(_136 instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}}}}};jsts.geom.Polygon.prototype.apply2=function(_137){this.shell.apply(_137);if(!_137.isDone()){for(var i=0;i<this.holes.length;i++){this.holes[i].apply(_137);if(_137.isDone()){break;}}}if(_137.isGeometryChanged()){}};jsts.geom.Polygon.prototype.clone=function(){var _138=[];for(var i=0,len=this.holes.length;i<len;i++){_138.push(this.holes[i].clone());}return this.factory.createPolygon(this.shell.clone(),_138);};jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,true);for(var i=0,len=this.holes.length;i<len;i++){this.normalize2(this.holes[i],false);}this.holes.sort();};jsts.geom.Polygon.prototype.normalize2=function(ring,_139){if(ring.isEmpty()){return;}var _13a=ring.points.slice(0,ring.points.length-1);var _13b=jsts.geom.CoordinateArrays.minCoordinate(ring.points);jsts.geom.CoordinateArrays.scroll(_13a,_13b);ring.points=_13a.concat();ring.points[_13a.length]=_13a[0];if(jsts.algorithm.CGAlgorithms.isCCW(ring.points)===_139){ring.points.reverse();}};jsts.geom.Polygon.prototype.getGeometryType=function(){return "Polygon";};jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon";})();(function(){var _13c=jsts.geom.Geometry;var _13d=javascript.util.TreeSet;var _13e=javascript.util.Arrays;jsts.geom.GeometryCollection=function(_13f,_140){this.geometries=_13f||[];this.factory=_140;};jsts.geom.GeometryCollection.prototype=new _13c();jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection;jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var i=0,len=this.geometries.length;i<len;i++){var _141=this.getGeometryN(i);if(!_141.isEmpty()){return false;}}return true;};jsts.geom.GeometryCollection.prototype.getArea=function(){var area=0;for(var i=0,len=this.geometries.length;i<len;i++){area+=this.getGeometryN(i).getArea();}return area;};jsts.geom.GeometryCollection.prototype.getLength=function(){var _142=0;for(var i=0,len=this.geometries.length;i<len;i++){_142+=this.getGeometryN(i).getLength();}return _142;};jsts.geom.GeometryCollection.prototype.getCoordinate=function(){if(this.isEmpty()){return null;}return this.getGeometryN(0).getCoordinate();};jsts.geom.GeometryCollection.prototype.getCoordinates=function(){var _143=[];var k=-1;for(var i=0,len=this.geometries.length;i<len;i++){var _144=this.getGeometryN(i);var _145=_144.getCoordinates();for(var j=0;j<_145.length;j++){k++;_143[k]=_145[j];}}return _143;};jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length;};jsts.geom.GeometryCollection.prototype.getGeometryN=function(n){var _146=this.geometries[n];if(_146 instanceof jsts.geom.Coordinate){_146=new jsts.geom.Point(_146);}return _146;};jsts.geom.GeometryCollection.prototype.getNumPoints=function(n){var _147=0;for(var i=0;i<this.geometries.length;i++){_147+=this.geometries[i].getNumPoints();}return _147;};jsts.geom.GeometryCollection.prototype.equalsExact=function(_148,_149){if(!this.isEquivalentClass(_148)){return false;}if(this.geometries.length!==_148.geometries.length){return false;}for(var i=0,len=this.geometries.length;i<len;i++){var _14a=this.getGeometryN(i);if(!_14a.equalsExact(_148.getGeometryN(i),_149)){return false;}}return true;};jsts.geom.GeometryCollection.prototype.clone=function(){var _14b=[];for(var i=0,len=this.geometries.length;i<len;i++){_14b.push(this.geometries[i].clone());}return this.factory.createGeometryCollection(_14b);};jsts.geom.GeometryCollection.prototype.normalize=function(){for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).normalize();}this.geometries.sort();};jsts.geom.GeometryCollection.prototype.compareToSameClass=function(o){var _14c=new _13d(_13e.asList(this.geometries));var _14d=new _13d(_13e.asList(o.geometries));return this.compare(_14c,_14d);};jsts.geom.GeometryCollection.prototype.apply=function(_14e){if(_14e instanceof jsts.geom.GeometryFilter||_14e instanceof jsts.geom.GeometryComponentFilter){_14e.filter(this);for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).apply(_14e);}}else{if(_14e instanceof jsts.geom.CoordinateFilter){for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).apply(_14e);}}else{if(_14e instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}}}};jsts.geom.GeometryCollection.prototype.apply2=function(_14f){if(this.geometries.length==0){return;}for(var i=0;i<this.geometries.length;i++){this.geometries[i].apply(_14f);if(_14f.isDone()){break;}}if(_14f.isGeometryChanged()){}};jsts.geom.GeometryCollection.prototype.getDimension=function(){var _150=jsts.geom.Dimension.FALSE;for(var i=0,len=this.geometries.length;i<len;i++){var _151=this.getGeometryN(i);_150=Math.max(_150,_151.getDimension());}return _150;};jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){var _152=new jsts.geom.Envelope();for(var i=0,len=this.geometries.length;i<len;i++){var _153=this.getGeometryN(i);_152.expandToInclude(_153.getEnvelopeInternal());}return _152;};jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection";})();jsts.algorithm.Centroid=function(_154){this.areaBasePt=null;this.triangleCent3=new jsts.geom.Coordinate();this.areasum2=0;this.cg3=new jsts.geom.Coordinate();this.lineCentSum=new jsts.geom.Coordinate();this.totalLength=0;this.ptCount=0;this.ptCentSum=new jsts.geom.Coordinate();this.add(_154);};jsts.algorithm.Centroid.getCentroid=function(_155){var cent=new jsts.algorithm.Centroid(_155);return cent.getCentroid();};jsts.algorithm.Centroid.centroid3=function(p1,p2,p3,c){c.x=p1.x+p2.x+p3.x;c.y=p1.y+p2.y+p3.y;};jsts.algorithm.Centroid.area2=function(p1,p2,p3){return (p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y);};jsts.algorithm.Centroid.prototype.add=function(geom){if(geom.isEmpty()){return;}if(geom instanceof jsts.geom.Point){this.addPoint(geom.getCoordinate());}else{if(geom instanceof jsts.geom.LineString){this.addLineSegments(geom.getCoordinates());}else{if(geom instanceof jsts.geom.Polygon){this.addPolygon(geom);}else{if(geom instanceof jsts.geom.GeometryCollection){for(var i=0;i<geom.getNumGeometries();i++){this.add(geom.getGeometryN(i));}}}}}};jsts.algorithm.Centroid.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();if(Math.abs(this.areasum2)>0){cent.x=this.cg3.x/3/this.areasum2;cent.y=this.cg3.y/3/this.areasum2;}else{if(this.totalLength>0){cent.x=this.lineCentSum.x/this.totalLength;cent.y=this.lineCentSum.y/this.totalLength;}else{if(this.ptCount>0){cent.x=this.ptCentSum.x/this.ptCount;cent.y=this.ptCentSum.y/this.ptCount;}else{return null;}}}return cent;};jsts.algorithm.Centroid.prototype.setBasePoint=function(_156){if(this.areaBasePt===null){this.areaBasePt=_156;}};jsts.algorithm.Centroid.prototype.addPolygon=function(poly){this.addShell(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.addHole(poly.getInteriorRingN(i).getCoordinates());}};jsts.algorithm.Centroid.prototype.addShell=function(pts){if(pts.length>0){this.setBasePoint(pts[0]);}var _157=!jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.areaBasePt,pts[i],pts[i+1],_157);}this.addLineSegments(pts);};jsts.algorithm.Centroid.prototype.addHole=function(pts){var _158=jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.areaBasePt,pts[i],pts[i+1],_158);}this.addLineSegments(pts);};jsts.algorithm.Centroid.prototype.addTriangle=function(p0,p1,p2,_159){var sign=(_159)?1:-1;jsts.algorithm.Centroid.centroid3(p0,p1,p2,this.triangleCent3);var _15a=jsts.algorithm.Centroid.area2(p0,p1,p2);this.cg3.x+=sign*_15a*this.triangleCent3.x;this.cg3.y+=sign*_15a*this.triangleCent3.y;this.areasum2+=sign*_15a;};jsts.algorithm.Centroid.prototype.addLineSegments=function(pts){var _15b=0;for(var i=0;i<pts.length-1;i++){var _15c=pts[i].distance(pts[i+1]);if(_15c===0){continue;}_15b+=_15c;var midx=(pts[i].x+pts[i+1].x)/2;this.lineCentSum.x+=_15c*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.lineCentSum.y+=_15c*midy;}this.totalLength+=_15b;if(_15b===0&&pts.length>0){this.addPoint(pts[0]);}};jsts.algorithm.Centroid.prototype.addPoint=function(pt){this.ptCount+=1;this.ptCentSum.x+=pt.x;this.ptCentSum.y+=pt.y;};(function(){var _15d=function(_15e){this.deList=new javascript.util.ArrayList();this.factory=_15e;};_15d.findEdgeRingContaining=function(_15f,_160){var _161=_15f.getRing();var _162=_161.getEnvelopeInternal();var _163=_161.getCoordinateN(0);var _164=null;var _165=null;for(var it=_160.iterator();it.hasNext();){var _166=it.next();var _167=_166.getRing();var _168=_167.getEnvelopeInternal();if(_164!=null){_165=_164.getRing().getEnvelopeInternal();}var _169=false;if(_168.equals(_162)){continue;}_163=jsts.geom.CoordinateArrays.ptNotInList(_161.getCoordinates(),_167.getCoordinates());if(_168.contains(_162)&&jsts.algorithm.CGAlgorithms.isPointInRing(_163,_167.getCoordinates())){_169=true;}if(_169){if(_164==null||_165.contains(_168)){_164=_166;}}}return _164;};_15d.ptNotInList=function(_16a,pts){for(var i=0;i<_16a.length;i++){var _16b=_16a[i];if(!isInList(_16b,pts)){return _16b;}}return null;};_15d.isInList=function(pt,pts){for(var i=0;i<pts.length;i++){if(pt.equals(pts[i])){return true;}}return false;};_15d.prototype.factory=null;_15d.prototype.deList=null;_15d.prototype.ring=null;_15d.prototype.ringPts=null;_15d.prototype.holes=null;_15d.prototype.add=function(de){this.deList.add(de);};_15d.prototype.isHole=function(){var ring=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(ring.getCoordinates());};_15d.prototype.addHole=function(hole){if(this.holes==null){this.holes=new javascript.util.ArrayList();}this.holes.add(hole);};_15d.prototype.getPolygon=function(){var _16c=null;if(this.holes!=null){_16c=[];for(var i=0;i<this.holes.size();i++){_16c[i]=this.holes.get(i);}}var poly=this.factory.createPolygon(this.ring,_16c);return poly;};_15d.prototype.isValid=function(){this.getCoordinates();if(this.ringPts.length<=3){return false;}this.getRing();return this.ring.isValid();};_15d.prototype.getCoordinates=function(){if(this.ringPts==null){var _16d=new jsts.geom.CoordinateList();for(var i=this.deList.iterator();i.hasNext();){var de=i.next();var edge=de.getEdge();_15d.addEdge(edge.getLine().getCoordinates(),de.getEdgeDirection(),_16d);}this.ringPts=_16d.toCoordinateArray();}return this.ringPts;};_15d.prototype.getLineString=function(){this.getCoordinates();return this.factory.createLineString(this.ringPts);};_15d.prototype.getRing=function(){if(this.ring!=null){return this.ring;}this.getCoordinates();if(this.ringPts.length<3){console.log(this.ringPts);}try{this.ring=this.factory.createLinearRing(this.ringPts);}catch(ex){console.log(this.ringPts);}return this.ring;};_15d.addEdge=function(_16e,_16f,_170){if(_16f){for(var i=0;i<_16e.length;i++){_170.add(_16e[i],false);}}else{for(var i=_16e.length-1;i>=0;i--){_170.add(_16e[i],false);}}};jsts.operation.polygonize.EdgeRing=_15d;})();(function(){var _171=function(){};_171.setVisited=function(i,_172){while(i.hasNext()){var comp=i.next();comp.setVisited(_172);}};_171.setMarked=function(i,_173){while(i.hasNext()){var comp=i.next();comp.setMarked(_173);}};_171.getComponentWithVisitedState=function(i,_174){while(i.hasNext()){var comp=i.next();if(comp.isVisited()==_174){return comp;}}return null;};_171.prototype._isMarked=false;_171.prototype._isVisited=false;_171.prototype.data;_171.prototype.isVisited=function(){return this._isVisited;};_171.prototype.setVisited=function(_175){this._isVisited=_175;};_171.prototype.isMarked=function(){return this._isMarked;};_171.prototype.setMarked=function(_176){this._isMarked=_176;};_171.prototype.setContext=function(data){this.data=data;};_171.prototype.getContext=function(){return data;};_171.prototype.setData=function(data){this.data=data;};_171.prototype.getData=function(){return data;};_171.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.planargraph.GraphComponent=_171;})();(function(){var _177=jsts.planargraph.GraphComponent;var Edge=function(de0,de1){if(de0===undefined){return;}this.setDirectedEdges(de0,de1);};Edge.prototype=new _177();Edge.prototype.dirEdge=null;Edge.prototype.setDirectedEdges=function(de0,de1){this.dirEdge=[de0,de1];de0.setEdge(this);de1.setEdge(this);de0.setSym(de1);de1.setSym(de0);de0.getFromNode().addOutEdge(de0);de1.getFromNode().addOutEdge(de1);};Edge.prototype.getDirEdge=function(i){if(i instanceof jsts.planargraph.Node){this.getDirEdge2(i);}return this.dirEdge[i];};Edge.prototype.getDirEdge2=function(_178){if(this.dirEdge[0].getFromNode()==_178){return this.dirEdge[0];}if(this.dirEdge[1].getFromNode()==_178){return this.dirEdge[1];}return null;};Edge.prototype.getOppositeNode=function(node){if(this.dirEdge[0].getFromNode()==node){return this.dirEdge[0].getToNode();}if(this.dirEdge[1].getFromNode()==node){return this.dirEdge[1].getToNode();}return null;};Edge.prototype.remove=function(){this.dirEdge=null;};Edge.prototype.isRemoved=function(){return dirEdge==null;};jsts.planargraph.Edge=Edge;})();jsts.operation.polygonize.PolygonizeEdge=function(line){this.line=line;};jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge();jsts.operation.polygonize.PolygonizeEdge.prototype.line=null;jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line;};(function(){var _179=javascript.util.ArrayList;var _17a=jsts.planargraph.GraphComponent;var _17b=function(from,to,_17c,_17d){if(from===undefined){return;}this.from=from;this.to=to;this.edgeDirection=_17d;this.p0=from.getCoordinate();this.p1=_17c;var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(dx,dy);this.angle=Math.atan2(dy,dx);};_17b.prototype=new _17a();_17b.toEdges=function(_17e){var _17f=new _179();for(var i=_17e.iterator();i.hasNext();){_17f.add((i.next()).parentEdge);}return _17f;};_17b.prototype.parentEdge=null;_17b.prototype.from=null;_17b.prototype.to=null;_17b.prototype.p0=null;_17b.prototype.p1=null;_17b.prototype.sym=null;_17b.prototype.edgeDirection=null;_17b.prototype.quadrant=null;_17b.prototype.angle=null;_17b.prototype.getEdge=function(){return this.parentEdge;};_17b.prototype.setEdge=function(_180){this.parentEdge=_180;};_17b.prototype.getQuadrant=function(){return this.quadrant;};_17b.prototype.getDirectionPt=function(){return this.p1;};_17b.prototype.getEdgeDirection=function(){return this.edgeDirection;};_17b.prototype.getFromNode=function(){return this.from;};_17b.prototype.getToNode=function(){return this.to;};_17b.prototype.getCoordinate=function(){return this.from.getCoordinate();};_17b.prototype.getAngle=function(){return this.angle;};_17b.prototype.getSym=function(){return this.sym;};_17b.prototype.setSym=function(sym){this.sym=sym;};_17b.prototype.remove=function(){this.sym=null;this.parentEdge=null;};_17b.prototype.isRemoved=function(){return this.parentEdge==null;};_17b.prototype.compareTo=function(obj){var de=obj;return this.compareDirection(de);};_17b.prototype.compareDirection=function(e){if(this.quadrant>e.quadrant){return 1;}if(this.quadrant<e.quadrant){return -1;}return jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1);};jsts.planargraph.DirectedEdge=_17b;})();(function(){var _181=jsts.planargraph.DirectedEdge;var _182=function(from,to,_183,_184){_181.apply(this,arguments);};_182.prototype=new _181();_182.prototype.edgeRing=null;_182.prototype.next=null;_182.prototype.label=-1;_182.prototype.getLabel=function(){return this.label;};_182.prototype.setLabel=function(_185){this.label=_185;};_182.prototype.getNext=function(){return this.next;};_182.prototype.setNext=function(next){this.next=next;};_182.prototype.isInRing=function(){return this.edgeRing!=null;};_182.prototype.setRing=function(_186){this.edgeRing=_186;};jsts.operation.polygonize.PolygonizeDirectedEdge=_182;})();(function(){var _187=javascript.util.ArrayList;var _188=function(){this.outEdges=new _187();};_188.prototype.outEdges=null;_188.prototype.sorted=false;_188.prototype.add=function(de){this.outEdges.add(de);this.sorted=false;};_188.prototype.remove=function(de){this.outEdges.remove(de);};_188.prototype.iterator=function(){this.sortEdges();return this.outEdges.iterator();};_188.prototype.getDegree=function(){return this.outEdges.size();};_188.prototype.getCoordinate=function(){var it=iterator();if(!it.hasNext()){return null;}var e=it.next();return e.getCoordinate();};_188.prototype.getEdges=function(){this.sortEdges();return this.outEdges;};_188.prototype.sortEdges=function(){if(!this.sorted){var _189=this.outEdges.toArray();_189.sort(function(a,b){return a.compareTo(b);});this.outEdges=javascript.util.Arrays.asList(_189);this.sorted=true;}};_188.prototype.getIndex=function(edge){if(edge instanceof jsts.planargraph.DirectedEdge){return this.getIndex2(edge);}else{if(typeof (edge)==="number"){return this.getIndex3(edge);}}this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var de=this.outEdges.get(i);if(de.getEdge()==edge){return i;}}return -1;};_188.prototype.getIndex2=function(_18a){this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var de=this.outEdges.get(i);if(de==_18a){return i;}}return -1;};_188.prototype.getIndex3=function(i){var modi=toInt(i%this.outEdges.size());if(modi<0){modi+=this.outEdges.size();}return modi;};_188.prototype.getNextEdge=function(_18b){var i=this.getIndex(_18b);return this.outEdges.get(getIndex(i+1));};_188.prototype.getNextCWEdge=function(_18c){var i=this.getIndex(_18c);return this.outEdges.get(getIndex(i-1));};jsts.planargraph.DirectedEdgeStar=_188;})();(function(){var _18d=jsts.planargraph.GraphComponent;var _18e=jsts.planargraph.DirectedEdgeStar;var Node=function(pt,_18f){this.pt=pt;this.deStar=_18f||new _18e();};Node.prototype=new _18d();Node.getEdgesBetween=function(_190,_191){var _192=DirectedEdge.toEdges(_190.getOutEdges().getEdges());var _193=new javascript.util.HashSet(_192);var _194=DirectedEdge.toEdges(_191.getOutEdges().getEdges());_193.retainAll(_194);return _193;};Node.prototype.pt=null;Node.prototype.deStar=null;Node.prototype.getCoordinate=function(){return this.pt;};Node.prototype.addOutEdge=function(de){this.deStar.add(de);};Node.prototype.getOutEdges=function(){return this.deStar;};Node.prototype.getDegree=function(){return this.deStar.getDegree();};Node.prototype.getIndex=function(edge){return this.deStar.getIndex(edge);};Node.prototype.remove=function(de){if(de===undefined){return this.remove2();}this.deStar.remove(de);};Node.prototype.remove2=function(){this.pt=null;};Node.prototype.isRemoved=function(){return this.pt==null;};jsts.planargraph.Node=Node;})();(function(){var _195=function(){this.nodeMap=new javascript.util.TreeMap();};_195.prototype.nodeMap=null;_195.prototype.add=function(n){this.nodeMap.put(n.getCoordinate(),n);return n;};_195.prototype.remove=function(pt){return this.nodeMap.remove(pt);};_195.prototype.find=function(_196){return this.nodeMap.get(_196);};_195.prototype.iterator=function(){return this.nodeMap.values().iterator();};_195.prototype.values=function(){return this.nodeMap.values();};jsts.planargraph.NodeMap=_195;})();(function(){var _197=javascript.util.ArrayList;var _198=function(){this.edges=new javascript.util.HashSet();this.dirEdges=new javascript.util.HashSet();this.nodeMap=new jsts.planargraph.NodeMap();};_198.prototype.edges=null;_198.prototype.dirEdges=null;_198.prototype.nodeMap=null;_198.prototype.findNode=function(pt){return this.nodeMap.find(pt);};_198.prototype.add=function(node){if(node instanceof jsts.planargraph.Edge){return this.add2(node);}else{if(node instanceof jsts.planargraph.DirectedEdge){return this.add3(node);}}this.nodeMap.add(node);};_198.prototype.add2=function(edge){this.edges.add(edge);this.add(edge.getDirEdge(0));this.add(edge.getDirEdge(1));};_198.prototype.add3=function(_199){this.dirEdges.add(_199);};_198.prototype.nodeIterator=function(){return this.nodeMap.iterator();};_198.prototype.contains=function(e){if(e instanceof jsts.planargraph.DirectedEdge){return this.contains2(e);}return this.edges.contains(e);};_198.prototype.contains2=function(de){return this.dirEdges.contains(de);};_198.prototype.getNodes=function(){return this.nodeMap.values();};_198.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator();};_198.prototype.edgeIterator=function(){return this.edges.iterator();};_198.prototype.getEdges=function(){return this.edges;};_198.prototype.remove=function(edge){if(edge instanceof jsts.planargraph.DirectedEdge){return this.remove2(edge);}this.remove(edge.getDirEdge(0));this.remove(edge.getDirEdge(1));this.edges.remove(edge);this.edge.remove();};_198.prototype.remove2=function(de){if(de instanceof jsts.planargraph.Node){return this.remove3(de);}var sym=de.getSym();if(sym!=null){sym.setSym(null);}de.getFromNode().remove(de);de.remove();this.dirEdges.remove(de);};_198.prototype.remove3=function(node){var _19a=node.getOutEdges().getEdges();for(var i=_19a.iterator();i.hasNext();){var de=i.next();var sym=de.getSym();if(sym!=null){this.remove(sym);}this.dirEdges.remove(de);var edge=de.getEdge();if(edge!=null){this.edges.remove(edge);}}this.nodeMap.remove(node.getCoordinate());node.remove();};_198.prototype.findNodesOfDegree=function(_19b){var _19c=new _197();for(var i=this.nodeIterator();i.hasNext();){var node=i.next();if(node.getDegree()==_19b){_19c.add(node);}}return _19c;};jsts.planargraph.PlanarGraph=_198;})();(function(){var _19d=javascript.util.ArrayList;var _19e=javascript.util.Stack;var _19f=javascript.util.HashSet;var _1a0=jsts.util.Assert;var _1a1=jsts.operation.polygonize.EdgeRing;var _1a2=jsts.operation.polygonize.PolygonizeEdge;var _1a3=jsts.operation.polygonize.PolygonizeDirectedEdge;var _1a4=jsts.planargraph.PlanarGraph;var Node=jsts.planargraph.Node;var _1a5=function(_1a6){_1a4.apply(this);this.factory=_1a6;};_1a5.prototype=new _1a4();_1a5.getDegreeNonDeleted=function(node){var _1a7=node.getOutEdges().getEdges();var _1a8=0;for(var i=_1a7.iterator();i.hasNext();){var de=i.next();if(!de.isMarked()){_1a8++;}}return _1a8;};_1a5.getDegree=function(node,_1a9){var _1aa=node.getOutEdges().getEdges();var _1ab=0;for(var i=_1aa.iterator();i.hasNext();){var de=i.next();if(de.getLabel()==_1a9){_1ab++;}}return _1ab;};_1a5.deleteAllEdges=function(node){var _1ac=node.getOutEdges().getEdges();for(var i=_1ac.iterator();i.hasNext();){var de=i.next();de.setMarked(true);var sym=de.getSym();if(sym!=null){sym.setMarked(true);}}};_1a5.prototype.factory=null;_1a5.prototype.addEdge=function(line){if(line.isEmpty()){return;}var _1ad=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());if(_1ad.length<2){return;}var _1ae=_1ad[0];var _1af=_1ad[_1ad.length-1];var _1b0=this.getNode(_1ae);var nEnd=this.getNode(_1af);var de0=new _1a3(_1b0,nEnd,_1ad[1],true);var de1=new _1a3(nEnd,_1b0,_1ad[_1ad.length-2],false);var edge=new _1a2(line);edge.setDirectedEdges(de0,de1);this.add(edge);};_1a5.prototype.getNode=function(pt){var node=this.findNode(pt);if(node==null){node=new Node(pt);this.add(node);}return node;};_1a5.prototype.computeNextCWEdges=function(){for(var _1b1=this.nodeIterator();_1b1.hasNext();){var node=_1b1.next();_1a5.computeNextCWEdges(node);}};_1a5.prototype.convertMaximalToMinimalEdgeRings=function(_1b2){for(var i=_1b2.iterator();i.hasNext();){var de=i.next();var _1b3=de.getLabel();var _1b4=_1a5.findIntersectionNodes(de,_1b3);if(_1b4==null){continue;}for(var _1b5=_1b4.iterator();_1b5.hasNext();){var node=_1b5.next();_1a5.computeNextCCWEdges(node,_1b3);}}};_1a5.findIntersectionNodes=function(_1b6,_1b7){var de=_1b6;var _1b8=null;do{var node=de.getFromNode();if(_1a5.getDegree(node,_1b7)>1){if(_1b8==null){_1b8=new _19d();}_1b8.add(node);}de=de.getNext();_1a0.isTrue(de!=null,"found null DE in ring");_1a0.isTrue(de==_1b6||!de.isInRing(),"found DE already in ring");}while(de!=_1b6);return _1b8;};_1a5.prototype.getEdgeRings=function(){this.computeNextCWEdges();_1a5.label(this.dirEdges,-1);var _1b9=_1a5.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(_1b9);var _1ba=new _19d();for(var i=this.dirEdges.iterator();i.hasNext();){var de=i.next();if(de.isMarked()){continue;}if(de.isInRing()){continue;}var er=this.findEdgeRing(de);_1ba.add(er);}return _1ba;};_1a5.findLabeledEdgeRings=function(_1bb){var _1bc=new _19d();var _1bd=1;for(var i=_1bb.iterator();i.hasNext();){var de=i.next();if(de.isMarked()){continue;}if(de.getLabel()>=0){continue;}_1bc.add(de);var _1be=_1a5.findDirEdgesInRing(de);_1a5.label(_1be,_1bd);_1bd++;}return _1bc;};_1a5.prototype.deleteCutEdges=function(){this.computeNextCWEdges();_1a5.findLabeledEdgeRings(this.dirEdges);var _1bf=new _19d();for(var i=this.dirEdges.iterator();i.hasNext();){var de=i.next();if(de.isMarked()){continue;}var sym=de.getSym();if(de.getLabel()==sym.getLabel()){de.setMarked(true);sym.setMarked(true);var e=de.getEdge();_1bf.add(e.getLine());}}return _1bf;};_1a5.label=function(_1c0,_1c1){for(var i=_1c0.iterator();i.hasNext();){var de=i.next();de.setLabel(_1c1);}};_1a5.computeNextCWEdges=function(node){var _1c2=node.getOutEdges();var _1c3=null;var _1c4=null;for(var i=_1c2.getEdges().iterator();i.hasNext();){var _1c5=i.next();if(_1c5.isMarked()){continue;}if(_1c3==null){_1c3=_1c5;}if(_1c4!=null){var sym=_1c4.getSym();sym.setNext(_1c5);}_1c4=_1c5;}if(_1c4!=null){var sym=_1c4.getSym();sym.setNext(_1c3);}};_1a5.computeNextCCWEdges=function(node,_1c6){var _1c7=node.getOutEdges();var _1c8=null;var _1c9=null;var _1ca=_1c7.getEdges();for(var i=_1ca.size()-1;i>=0;i--){var de=_1ca.get(i);var sym=de.getSym();var _1cb=null;if(de.getLabel()==_1c6){_1cb=de;}var inDE=null;if(sym.getLabel()==_1c6){inDE=sym;}if(_1cb==null&&inDE==null){continue;}if(inDE!=null){_1c9=inDE;}if(_1cb!=null){if(_1c9!=null){_1c9.setNext(_1cb);_1c9=null;}if(_1c8==null){_1c8=_1cb;}}}if(_1c9!=null){_1a0.isTrue(_1c8!=null);_1c9.setNext(_1c8);}};_1a5.findDirEdgesInRing=function(_1cc){var de=_1cc;var _1cd=new _19d();do{_1cd.add(de);de=de.getNext();_1a0.isTrue(de!=null,"found null DE in ring");_1a0.isTrue(de==_1cc||!de.isInRing(),"found DE already in ring");}while(de!=_1cc);return _1cd;};_1a5.prototype.findEdgeRing=function(_1ce){var de=_1ce;var er=new _1a1(this.factory);do{er.add(de);de.setRing(er);de=de.getNext();_1a0.isTrue(de!=null,"found null DE in ring");_1a0.isTrue(de==_1ce||!de.isInRing(),"found DE already in ring");}while(de!=_1ce);return er;};_1a5.prototype.deleteDangles=function(){var _1cf=this.findNodesOfDegree(1);var _1d0=new _19f();var _1d1=new _19e();for(var i=_1cf.iterator();i.hasNext();){_1d1.push(i.next());}while(!_1d1.isEmpty()){var node=_1d1.pop();_1a5.deleteAllEdges(node);var _1d2=node.getOutEdges().getEdges();for(var i=_1d2.iterator();i.hasNext();){var de=i.next();de.setMarked(true);var sym=de.getSym();if(sym!=null){sym.setMarked(true);}var e=de.getEdge();_1d0.add(e.getLine());var _1d3=de.getToNode();if(_1a5.getDegreeNonDeleted(_1d3)==1){_1d1.push(_1d3);}}}return _1d0;};_1a5.prototype.computeDepthParity=function(){while(true){var de=null;if(de==null){return;}this.computeDepthParity(de);}};_1a5.prototype.computeDepthParity=function(de){};jsts.operation.polygonize.PolygonizeGraph=_1a5;})();jsts.index.strtree.Interval=function(){var _1d4;if(arguments.length===1){_1d4=arguments[0];return jsts.index.strtree.Interval(_1d4.min,_1d4.max);}else{if(arguments.length===2){jsts.util.Assert.isTrue(this.min<=this.max);this.min=arguments[0];this.max=arguments[1];}}};jsts.index.strtree.Interval.prototype.min=null;jsts.index.strtree.Interval.prototype.max=null;jsts.index.strtree.Interval.prototype.getCentre=function(){return (this.min+this.max)/2;};jsts.index.strtree.Interval.prototype.expandToInclude=function(_1d5){this.max=Math.max(this.max,_1d5.max);this.min=Math.min(this.min,_1d5.min);return this;};jsts.index.strtree.Interval.prototype.intersects=function(_1d6){return !(_1d6.min>this.max||_1d6.max<this.min);};jsts.index.strtree.Interval.prototype.equals=function(o){if(!(o instanceof jsts.index.strtree.Interval)){return false;}other=o;return this.min===other.min&&this.max===other.max;};jsts.geom.GeometryFactory=function(_1d7){this.precisionModel=_1d7||new jsts.geom.PrecisionModel();};jsts.geom.GeometryFactory.prototype.precisionModel=null;jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel;};jsts.geom.GeometryFactory.prototype.createPoint=function(_1d8){var _1d9=new jsts.geom.Point(_1d8,this);return _1d9;};jsts.geom.GeometryFactory.prototype.createLineString=function(_1da){var _1db=new jsts.geom.LineString(_1da,this);return _1db;};jsts.geom.GeometryFactory.prototype.createLinearRing=function(_1dc){var _1dd=new jsts.geom.LinearRing(_1dc,this);return _1dd;};jsts.geom.GeometryFactory.prototype.createPolygon=function(_1de,_1df){var _1e0=new jsts.geom.Polygon(_1de,_1df,this);return _1e0;};jsts.geom.GeometryFactory.prototype.createMultiPoint=function(_1e1){if(_1e1&&_1e1[0] instanceof jsts.geom.Coordinate){var _1e2=[];var i;for(i=0;i<_1e1.length;i++){_1e2.push(this.createPoint(_1e1[i]));}_1e1=_1e2;}return new jsts.geom.MultiPoint(_1e1,this);};jsts.geom.GeometryFactory.prototype.createMultiLineString=function(_1e3){return new jsts.geom.MultiLineString(_1e3,this);};jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(_1e4){return new jsts.geom.MultiPolygon(_1e4,this);};jsts.geom.GeometryFactory.prototype.buildGeometry=function(_1e5){var _1e6=null;var _1e7=false;var _1e8=false;for(var i=_1e5.iterator();i.hasNext();){var geom=i.next();var _1e9=geom.CLASS_NAME;if(_1e6===null){_1e6=_1e9;}if(!(_1e9===_1e6)){_1e7=true;}if(geom.isGeometryCollectionBase()){_1e8=true;}}if(_1e6===null){return this.createGeometryCollection(null);}if(_1e7||_1e8){return this.createGeometryCollection(_1e5.toArray());}var _1ea=_1e5.get(0);var _1eb=_1e5.size()>1;if(_1eb){if(_1ea instanceof jsts.geom.Polygon){return this.createMultiPolygon(_1e5.toArray());}else{if(_1ea instanceof jsts.geom.LineString){return this.createMultiLineString(_1e5.toArray());}else{if(_1ea instanceof jsts.geom.Point){return this.createMultiPoint(_1e5.toArray());}}}jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+_1ea);}return _1ea;};jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(_1ec){return new jsts.geom.GeometryCollection(_1ec,this);};jsts.geom.GeometryFactory.prototype.toGeometry=function(_1ed){if(_1ed.isNull()){return this.createPoint(null);}if(_1ed.getMinX()===_1ed.getMaxX()&&_1ed.getMinY()===_1ed.getMaxY()){return this.createPoint(new jsts.geom.Coordinate(_1ed.getMinX(),_1ed.getMinY()));}if(_1ed.getMinX()===_1ed.getMaxX()||_1ed.getMinY()===_1ed.getMaxY()){return this.createLineString([new jsts.geom.Coordinate(_1ed.getMinX(),_1ed.getMinY()),new jsts.geom.Coordinate(_1ed.getMaxX(),_1ed.getMaxY())]);}return this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(_1ed.getMinX(),_1ed.getMinY()),new jsts.geom.Coordinate(_1ed.getMinX(),_1ed.getMaxY()),new jsts.geom.Coordinate(_1ed.getMaxX(),_1ed.getMaxY()),new jsts.geom.Coordinate(_1ed.getMaxX(),_1ed.getMinY()),new jsts.geom.Coordinate(_1ed.getMinX(),_1ed.getMinY())]),null);};jsts.geomgraph.NodeFactory=function(){};jsts.geomgraph.NodeFactory.prototype.createNode=function(_1ee){return new jsts.geomgraph.Node(_1ee,null);};(function(){jsts.geomgraph.Position=function(){};jsts.geomgraph.Position.ON=0;jsts.geomgraph.Position.LEFT=1;jsts.geomgraph.Position.RIGHT=2;jsts.geomgraph.Position.opposite=function(_1ef){if(_1ef===jsts.geomgraph.Position.LEFT){return jsts.geomgraph.Position.RIGHT;}if(_1ef===jsts.geomgraph.Position.RIGHT){return jsts.geomgraph.Position.LEFT;}return _1ef;};})();jsts.geomgraph.TopologyLocation=function(){this.location=[];if(arguments.length===3){var on=arguments[0];var left=arguments[1];var _1f0=arguments[2];this.init(3);this.location[jsts.geomgraph.Position.ON]=on;this.location[jsts.geomgraph.Position.LEFT]=left;this.location[jsts.geomgraph.Position.RIGHT]=_1f0;}else{if(arguments[0] instanceof jsts.geomgraph.TopologyLocation){var gl=arguments[0];this.init(gl.location.length);if(gl!=null){for(var i=0;i<this.location.length;i++){this.location[i]=gl.location[i];}}}else{if(typeof arguments[0]==="number"){var on=arguments[0];this.init(1);this.location[jsts.geomgraph.Position.ON]=on;}else{if(arguments[0] instanceof Array){var _1f1=arguments[0];this.init(_1f1.length);}}}}};jsts.geomgraph.TopologyLocation.prototype.location=null;jsts.geomgraph.TopologyLocation.prototype.init=function(size){this.location[size-1]=null;this.setAllLocations(jsts.geom.Location.NONE);};jsts.geomgraph.TopologyLocation.prototype.get=function(_1f2){if(_1f2<this.location.length){return this.location[_1f2];}return jsts.geom.Location.NONE;};jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var i=0;i<this.location.length;i++){if(this.location[i]!==jsts.geom.Location.NONE){return false;}}return true;};jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE){return true;}}return false;};jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(le,_1f3){return this.location[_1f3]==le.location[_1f3];};jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1;};jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return this.location.length===1;};jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(this.location.length<=1){return;}var temp=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT];this.location[jsts.geomgraph.Position.RIGHT]=temp;};jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(_1f4){for(var i=0;i<this.location.length;i++){this.location[i]=_1f4;}};jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(_1f5){for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE){this.location[i]=_1f5;}}};jsts.geomgraph.TopologyLocation.prototype.setLocation=function(_1f6,_1f7){if(_1f7!==undefined){this.location[_1f6]=_1f7;}else{this.setLocation(jsts.geomgraph.Position.ON,_1f6);}};jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location;};jsts.geomgraph.TopologyLocation.prototype.setLocations=function(on,left,_1f8){this.location[jsts.geomgraph.Position.ON]=on;this.location[jsts.geomgraph.Position.LEFT]=left;this.location[jsts.geomgraph.Position.RIGHT]=_1f8;};jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(loc){for(var i=0;i<this.location.length;i++){if(this.location[i]!==loc){return false;}}return true;};jsts.geomgraph.TopologyLocation.prototype.merge=function(gl){if(gl.location.length>this.location.length){var _1f9=[];_1f9[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON];_1f9[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE;_1f9[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE;this.location=_1f9;}for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE&&i<gl.location.length){this.location[i]=gl.location[i];}}};jsts.geomgraph.Label=function(){this.elt=[];var _1fa,_1fb,_1fc,lbl,_1fd;if(arguments.length===4){_1fa=arguments[0];_1fb=arguments[1];_1fc=arguments[2];_1fd=arguments[3];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[_1fa].setLocations(_1fb,_1fc,_1fd);}else{if(arguments.length===3){_1fb=arguments[0];_1fc=arguments[1];_1fd=arguments[2];this.elt[0]=new jsts.geomgraph.TopologyLocation(_1fb,_1fc,_1fd);this.elt[1]=new jsts.geomgraph.TopologyLocation(_1fb,_1fc,_1fd);}else{if(arguments.length===2){_1fa=arguments[0];_1fb=arguments[1];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[_1fa].setLocation(_1fb);}else{if(arguments[0] instanceof jsts.geomgraph.Label){lbl=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(lbl.elt[0]);this.elt[1]=new jsts.geomgraph.TopologyLocation(lbl.elt[1]);}else{if(typeof arguments[0]==="number"){_1fb=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(_1fb);this.elt[1]=new jsts.geomgraph.TopologyLocation(_1fb);}}}}}};jsts.geomgraph.Label.toLineLabel=function(_1fe){var i,_1ff=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(i=0;i<2;i++){_1ff.setLocation(i,_1fe.getLocation(i));}return _1ff;};jsts.geomgraph.Label.prototype.elt=null;jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip();this.elt[1].flip();};jsts.geomgraph.Label.prototype.getLocation=function(_200,_201){if(arguments.length==1){return this.getLocation2.apply(this,arguments);}return this.elt[_200].get(_201);};jsts.geomgraph.Label.prototype.getLocation2=function(_202){return this.elt[_202].get(jsts.geomgraph.Position.ON);};jsts.geomgraph.Label.prototype.setLocation=function(_203,_204,_205){if(arguments.length==2){this.setLocation2.apply(this,arguments);return;}this.elt[_203].setLocation(_204,_205);};jsts.geomgraph.Label.prototype.setLocation2=function(_206,_207){this.elt[_206].setLocation(jsts.geomgraph.Position.ON,_207);};jsts.geomgraph.Label.prototype.setAllLocations=function(_208,_209){this.elt[_208].setAllLocations(_209);};jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(_20a,_20b){if(arguments.length==1){this.setAllLocationsIfNull2.apply(this,arguments);return;}this.elt[_20a].setAllLocationsIfNull(_20b);};jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(_20c){this.setAllLocationsIfNull(0,_20c);this.setAllLocationsIfNull(1,_20c);};jsts.geomgraph.Label.prototype.merge=function(lbl){var i;for(i=0;i<2;i++){if(this.elt[i]===null&&lbl.elt[i]!==null){this.elt[i]=new jsts.geomgraph.TopologyLocation(lbl.elt[i]);}else{this.elt[i].merge(lbl.elt[i]);}}};jsts.geomgraph.Label.prototype.getGeometryCount=function(){var _20d=0;if(!this.elt[0].isNull()){_20d++;}if(!this.elt[1].isNull()){_20d++;}return _20d;};jsts.geomgraph.Label.prototype.isNull=function(_20e){return this.elt[_20e].isNull();};jsts.geomgraph.Label.prototype.isAnyNull=function(_20f){return this.elt[_20f].isAnyNull();};jsts.geomgraph.Label.prototype.isArea=function(){if(arguments.length==1){return this.isArea2(arguments[0]);}return this.elt[0].isArea()||this.elt[1].isArea();};jsts.geomgraph.Label.prototype.isArea2=function(_210){return this.elt[_210].isArea();};jsts.geomgraph.Label.prototype.isLine=function(_211){return this.elt[_211].isLine();};jsts.geomgraph.Label.prototype.isEqualOnSide=function(lbl,side){return this.elt[0].isEqualOnSide(lbl.elt[0],side)&&this.elt[1].isEqualOnSide(lbl.elt[1],side);};jsts.geomgraph.Label.prototype.allPositionsEqual=function(_212,loc){return this.elt[_212].allPositionsEqual(loc);};jsts.geomgraph.Label.prototype.toLine=function(_213){if(this.elt[_213].isArea()){this.elt[_213]=new jsts.geomgraph.TopologyLocation(this.elt[_213].location[0]);}};jsts.geomgraph.EdgeRing=function(_214,_215){this.edges=[];this.pts=[];this.holes=[];this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);this.geometryFactory=_215;if(_214){this.computePoints(_214);this.computeRing();}};jsts.geomgraph.EdgeRing.prototype.startDe=null;jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1;jsts.geomgraph.EdgeRing.prototype.edges=null;jsts.geomgraph.EdgeRing.prototype.pts=null;jsts.geomgraph.EdgeRing.prototype.label=null;jsts.geomgraph.EdgeRing.prototype.ring=null;jsts.geomgraph.EdgeRing.prototype._isHole=null;jsts.geomgraph.EdgeRing.prototype.shell=null;jsts.geomgraph.EdgeRing.prototype.holes=null;jsts.geomgraph.EdgeRing.prototype.geometryFactory=null;jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return (this.label.getGeometryCount()==1);};jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole;};jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(i){return this.pts[i];};jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring;};jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label;};jsts.geomgraph.EdgeRing.prototype.isShell=function(){return this.shell===null;};jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell;};jsts.geomgraph.EdgeRing.prototype.setShell=function(_216){this.shell=_216;if(_216!==null){_216.addHole(this);}};jsts.geomgraph.EdgeRing.prototype.addHole=function(ring){this.holes.push(ring);};jsts.geomgraph.EdgeRing.prototype.toPolygon=function(_217){var _218=[];for(var i=0;i<this.holes.length;i++){_218[i]=this.holes[i].getLinearRing();}var poly=this.geometryFactory.createPolygon(this.getLinearRing(),_218);return poly;};jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(this.ring!==null){return;}var _219=[];for(var i=0;i<this.pts.length;i++){_219[i]=this.pts[i];}this.ring=this.geometryFactory.createLinearRing(_219);this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates());};jsts.geomgraph.EdgeRing.prototype.getNext=function(de){throw new jsts.error.AbstractInvocationError();};jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(de,er){throw new jsts.error.AbstractInvocationError();};jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeRing.prototype.computePoints=function(_21a){this.startDe=_21a;var de=_21a;var _21b=true;do{if(de===null){throw new jsts.error.TopologyError("Found null DirectedEdge");}if(de.getEdgeRing()===this){throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+de.getCoordinate());}this.edges.push(de);var _21c=de.getLabel();jsts.util.Assert.isTrue(_21c.isArea());this.mergeLabel(_21c);this.addPoints(de.getEdge(),de.isForward(),_21b);_21b=false;this.setEdgeRing(de,this);de=this.getNext(de);}while(de!==this.startDe);};jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){if(this.maxNodeDegree<0){this.computeMaxNodeDegree();}return this.maxNodeDegree;};jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var de=this.startDe;do{var node=de.getNode();var _21d=node.getEdges().getOutgoingDegree(this);if(_21d>this.maxNodeDegree){this.maxNodeDegree=_21d;}de=this.getNext(de);}while(de!==this.startDe);this.maxNodeDegree*=2;};jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var de=this.startDe;do{de.getEdge().setInResult(true);de=de.getNext();}while(de!=this.startDe);};jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(_21e){this.mergeLabel2(_21e,0);this.mergeLabel2(_21e,1);};jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(_21f,_220){var loc=_21f.getLocation(_220,jsts.geomgraph.Position.RIGHT);if(loc==jsts.geom.Location.NONE){return;}if(this.label.getLocation(_220)===jsts.geom.Location.NONE){this.label.setLocation(_220,loc);return;}};jsts.geomgraph.EdgeRing.prototype.addPoints=function(edge,_221,_222){var _223=edge.getCoordinates();if(_221){var _224=1;if(_222){_224=0;}for(var i=_224;i<_223.length;i++){this.pts.push(_223[i]);}}else{var _224=_223.length-2;if(_222){_224=_223.length-1;}for(var i=_224;i>=0;i--){this.pts.push(_223[i]);}}};jsts.geomgraph.EdgeRing.prototype.containsPoint=function(p){var _225=this.getLinearRing();var env=_225.getEnvelopeInternal();if(!env.contains(p)){return false;}if(!jsts.algorithm.CGAlgorithms.isPointInRing(p,_225.getCoordinates())){return false;}for(var i=0;i<this.holes.length;i++){var hole=this.holes[i];if(hole.containsPoint(p)){return false;}}return true;};(function(){jsts.geom.LinearRing=function(_226,_227){jsts.geom.LineString.apply(this,arguments);};jsts.geom.LinearRing.prototype=new jsts.geom.LineString();jsts.geom.LinearRing.constructor=jsts.geom.LinearRing;jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE;};jsts.geom.LinearRing.prototype.isSimple=function(){return true;};jsts.geom.LinearRing.prototype.getGeometryType=function(){return "LinearRing";};jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4;jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing";})();jsts.index.strtree.Boundable=function(){};jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractNode=function(_228){this.level=_228;this.childBoundables=[];};jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode;jsts.index.strtree.AbstractNode.prototype.childBoundables=null;jsts.index.strtree.AbstractNode.prototype.bounds=null;jsts.index.strtree.AbstractNode.prototype.level=null;jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables;};jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractNode.prototype.getBounds=function(){if(this.bounds===null){this.bounds=this.computeBounds();}return this.bounds;};jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level;};jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(_229){this.childBoundables.push(_229);};(function(){jsts.noding.Noder=function(){};jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc;jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc;})();(function(){var _22a=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){};jsts.noding.SinglePassNoder.prototype=new _22a();jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder;jsts.noding.SinglePassNoder.prototype.segInt=null;jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(_22b){this.segInt=_22b;};})();jsts.index.SpatialIndex=function(){};jsts.index.SpatialIndex.prototype.insert=function(_22c,item){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.SpatialIndex.prototype.query=function(_22d,_22e){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.SpatialIndex.prototype.remove=function(_22f,item){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree=function(_230){if(_230===undefined){return;}this.itemBoundables=[];jsts.util.Assert.isTrue(_230>1,"Node capacity must be greater than 1");this.nodeCapacity=_230;};jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){};jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(_231,_232){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.root=null;jsts.index.strtree.AbstractSTRtree.prototype.built=false;jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null;jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null;jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built);this.root=this.itemBoundables.length===0?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1);this.built=true;};jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(_233){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(_234,_235){jsts.util.Assert.isTrue(!(_234.length===0));var _236=[];_236.push(this.createNode(_235));var _237=[];for(var i=0;i<_234.length;i++){_237.push(_234[i]);}_237.sort(this.getComparator());for(var i=0;i<_237.length;i++){var _238=_237[i];if(this.lastNode(_236).getChildBoundables().length===this.getNodeCapacity()){_236.push(this.createNode(_235));}this.lastNode(_236).addChildBoundable(_238);}return _236;};jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(_239){return _239[_239.length-1];};jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(a,b){return a>b?1:a<b?-1:0;};jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(_23a,_23b){jsts.util.Assert.isTrue(!(_23a.length===0));var _23c=this.createParentBoundables(_23a,_23b+1);if(_23c.length===1){return _23c[0];}return this.createHigherLevels(_23c,_23b+1);};jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){if(!this.built){this.build();}return this.root;};jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity;};jsts.index.strtree.AbstractSTRtree.prototype.size=function(){if(arguments.length===1){return this.size2(arguments[0]);}if(!this.built){this.build();}if(this.itemBoundables.length===0){return 0;}return this.size2(root);};jsts.index.strtree.AbstractSTRtree.prototype.size2=function(node){var size=0;var _23d=node.getChildBoundables();for(var i=0;i<_23d.length;i++){var _23e=_23d[i];if(_23e instanceof jsts.index.strtree.AbstractNode){size+=this.size(_23e);}else{if(_23e instanceof jsts.index.strtree.ItemBoundable){size+=1;}}}return size;};jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){if(arguments.length===1){return this.depth2(arguments[0]);}if(!this.built){this.build();}if(this.itemBoundables.length===0){return 0;}return this.depth2(root);};jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){var _23f=0;var _240=node.getChildBoundables();for(var i=0;i<_240.length;i++){var _241=_240[i];if(_241 instanceof jsts.index.strtree.AbstractNode){var _242=this.depth(_241);if(_242>_23f){_23f=_242;}}}return _23f+1;};jsts.index.strtree.AbstractSTRtree.prototype.insert=function(_243,item){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built.");this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(_243,item));};jsts.index.strtree.AbstractSTRtree.prototype.query=function(_244){if(arguments.length>1){this.query2.apply(this,arguments);}if(!this.built){this.build();}var _245=[];if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null);return _245;}if(this.getIntersectsOp().intersects(this.root.getBounds(),_244)){this.query3(_244,this.root,_245);}return _245;};jsts.index.strtree.AbstractSTRtree.prototype.query2=function(_246,_247){if(arguments.length>2){this.query3.apply(this,arguments);}if(!this.built){this.build();}if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null);}if(this.getIntersectsOp().intersects(this.root.getBounds(),_246)){this.query4(_246,this.root,_247);}};jsts.index.strtree.AbstractSTRtree.prototype.query3=function(_248,node,_249){if(!(arguments[2] instanceof Array)){this.query4.apply(this,arguments);}var _24a=node.getChildBoundables();for(var i=0;i<_24a.length;i++){var _24b=_24a[i];if(!this.getIntersectsOp().intersects(_24b.getBounds(),_248)){continue;}if(_24b instanceof jsts.index.strtree.AbstractNode){this.query3(_248,_24b,_249);}else{if(_24b instanceof jsts.index.strtree.ItemBoundable){_249.push(_24b.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}}};jsts.index.strtree.AbstractSTRtree.prototype.query4=function(_24c,node,_24d){var _24e=node.getChildBoundables();for(var i=0;i<_24e.length;i++){var _24f=_24e[i];if(!this.getIntersectsOp().intersects(_24f.getBounds(),_24c)){continue;}if(_24f instanceof jsts.index.strtree.AbstractNode){this.query4(_24c,_24f,_24d);}else{if(_24f instanceof jsts.index.strtree.ItemBoundable){_24d.visitItem(_24f.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}}};jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(arguments.length===1){return this.itemsTree2.apply(this,arguments);}if(!this.built){this.build();}var _250=this.itemsTree2(this.root);if(_250===null){return [];}return _250;};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(node){var _251=[];var _252=node.getChildBoundables();for(var i=0;i<_252.length;i++){var _253=_252[i];if(_253 instanceof jsts.index.strtree.AbstractNode){var _254=this.itemsTree(_253);if(_254!=null){_251.push(_254);}}else{if(_253 instanceof jsts.index.strtree.ItemBoundable){_251.push(_253.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}}if(_251.length<=0){return null;}return _251;};jsts.index.strtree.AbstractSTRtree.prototype.remove=function(_255,item){if(!this.built){this.build();}if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()==null);}if(this.getIntersectsOp().intersects(this.root.getBounds(),_255)){return this.remove2(_255,this.root,item);}return false;};jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(_256,node,item){var _257=this.removeItem(node,item);if(_257){return true;}var _258=null;var _259=node.getChildBoundables();for(var i=0;i<_259.length;i++){var _25a=_259[i];if(!this.getIntersectsOp().intersects(_25a.getBounds(),_256)){continue;}if(_25a instanceof jsts.index.strtree.AbstractNode){_257=this.remove(_256,_25a,item);if(_257){_258=_25a;break;}}}if(_258!=null){if(_258.getChildBoundables().length===0){_259.splice(_259.indexOf(_258),1);}}return _257;};jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(node,item){var _25b=null;var _25c=node.getChildBoundables();for(var i=0;i<_25c.length;i++){var _25d=_25c[i];if(_25d instanceof jsts.index.strtree.ItemBoundable){if(_25d.getItem()===item){_25b=_25d;}}}if(_25b!==null){_25c.splice(_25c.indexOf(_25b),1);return true;}return false;};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(_25e){if(arguments.length>1){this.boundablesAtLevel2.apply(this,arguments);return;}var _25f=[];this.boundablesAtLevel2(_25e,this.root,_25f);return _25f;};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(_260,top,_261){jsts.util.Assert.isTrue(_260>-2);if(top.getLevel()===_260){_261.add(top);return;}var _262=node.getChildBoundables();for(var i=0;i<_262.length;i++){var _263=_262[i];if(_263 instanceof jsts.index.strtree.AbstractNode){this.boundablesAtLevel(_260,_263,_261);}else{jsts.util.Assert.isTrue(_263 instanceof jsts.index.strtree.ItemBoundable);if(_260===-1){_261.add(_263);}}}return;};jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.STRtree=function(_264){_264=_264||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY;jsts.index.strtree.AbstractSTRtree.call(this,_264);};jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree;jsts.index.strtree.STRtree.prototype.xComparator=function(o1,o2){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(o1.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(o2.getBounds()));};jsts.index.strtree.STRtree.prototype.yComparator=function(o1,o2){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(o1.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(o2.getBounds()));};jsts.index.strtree.STRtree.prototype.centreX=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinX(),e.getMaxX());};jsts.index.strtree.STRtree.prototype.centreY=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinY(),e.getMaxY());};jsts.index.strtree.STRtree.prototype.avg=function(a,b){return (a+b)/2;};jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(_265,_266){return _265.intersects(_266);}};jsts.index.strtree.STRtree.prototype.createParentBoundables=function(_267,_268){jsts.util.Assert.isTrue(!(_267.length===0));var _269=Math.ceil(_267.length/this.getNodeCapacity());var _26a=[];for(var i=0;i<_267.length;i++){_26a.push(_267[i]);}_26a.sort(this.xComparator);var _26b=this.verticalSlices(_26a,Math.ceil(Math.sqrt(_269)));return this.createParentBoundablesFromVerticalSlices(_26b,_268);};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(_26c,_26d){jsts.util.Assert.isTrue(_26c.length>0);var _26e=[];for(var i=0;i<_26c.length;i++){_26e=_26e.concat(this.createParentBoundablesFromVerticalSlice(_26c[i],_26d));}return _26e;};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(_26f,_270){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,_26f,_270);};jsts.index.strtree.STRtree.prototype.verticalSlices=function(_271,_272){var _273=Math.ceil(_271.length/_272);var _274=[];var i=0,_275,_276;for(var j=0;j<_272;j++){_274[j]=[];_275=0;while(i<_271.length&&_275<_273){_276=_271[i++];_274[j].push(_276);_275++;}}return _274;};jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10;jsts.index.strtree.STRtree.prototype.createNode=function(_277){var _278=new jsts.index.strtree.AbstractNode(_277);_278.computeBounds=function(){var _279=null;var _27a=this.getChildBoundables();for(var i=0;i<_27a.length;i++){var _27b=_27a[i];if(_279===null){_279=new jsts.geom.Envelope(_27b.getBounds());}else{_279.expandToInclude(_27b.getBounds());}}return _279;};return _278;};jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp;};jsts.index.strtree.STRtree.prototype.insert=function(_27c,item){if(_27c.isNull()){return;}jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,_27c,item);};jsts.index.strtree.STRtree.prototype.query=function(_27d,_27e){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments);};jsts.index.strtree.STRtree.prototype.remove=function(_27f,item){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,_27f,item);};jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this);};jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this);};jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator;};jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(_280){var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),_280);return this.nearestNeighbour4(bp);};jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(env,item,_281){var bnd=new jsts.index.strtree.ItemBoundable(env,item);var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),bnd,_281);return this.nearestNeighbour4(bp)[0];};jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(tree,_282){var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),tree.getRoot(),_282);return this.nearestNeighbour4(bp);};jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(_283){return this.nearestNeighbour5(_283,Double.POSITIVE_INFINITY);};jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(_284,_285){var _286=_285;var _287=null;var priQ=[];priQ.push(_284);while(!priQ.isEmpty()&&_286>0){var _288=priQ.pop();var _289=_288.getDistance();if(_289>=_286){break;}if(_288.isLeaves()){_286=_289;_287=_288;}else{_288.expandToQueue(priQ,_286);}}return [_287.getBoundable(0).getItem(),_287.getBoundable(1).getItem()];};jsts.noding.SegmentString=function(){};jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.size=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc;jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc;jsts.noding.NodableSegmentString=function(){};jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc;jsts.noding.NodedSegmentString=function(pts,data){this.nodeList=new jsts.noding.SegmentNodeList(this);this.pts=pts;this.data=data;};jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString();jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString;jsts.noding.NodedSegmentString.getNodedSubstrings=function(_28a){if(arguments.length===2){jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);return;}var _28b=new javascript.util.ArrayList();jsts.noding.NodedSegmentString.getNodedSubstrings2(_28a,_28b);return _28b;};jsts.noding.NodedSegmentString.getNodedSubstrings2=function(_28c,_28d){for(var i=_28c.iterator();i.hasNext();){var ss=i.next();ss.getNodeList().addSplitEdges(_28d);}};jsts.noding.NodedSegmentString.prototype.nodeList=null;jsts.noding.NodedSegmentString.prototype.pts=null;jsts.noding.NodedSegmentString.prototype.data=null;jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data;};jsts.noding.NodedSegmentString.prototype.setData=function(data){this.data=data;};jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList;};jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length;};jsts.noding.NodedSegmentString.prototype.getCoordinate=function(i){return this.pts[i];};jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts;};jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(_28e){if(_28e===this.pts.length-1){return -1;}return this.safeOctant(this.getCoordinate(_28e),this.getCoordinate(_28e+1));};jsts.noding.NodedSegmentString.prototype.safeOctant=function(p0,p1){if(p0.equals2D(p1)){return 0;}return jsts.noding.Octant.octant(p0,p1);};jsts.noding.NodedSegmentString.prototype.addIntersections=function(li,_28f,_290){for(var i=0;i<li.getIntersectionNum();i++){this.addIntersection(li,_28f,_290,i);}};jsts.noding.NodedSegmentString.prototype.addIntersection=function(li,_291,_292,_293){if(li instanceof jsts.geom.Coordinate){this.addIntersection2.apply(this,arguments);return;}var _294=new jsts.geom.Coordinate(li.getIntersection(_293));this.addIntersection2(_294,_291);};jsts.noding.NodedSegmentString.prototype.addIntersection2=function(_295,_296){this.addIntersectionNode(_295,_296);};jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(_297,_298){var _299=_298;var _29a=_299+1;if(_29a<this.pts.length){var _29b=this.pts[_29a];if(_297.equals2D(_29b)){_299=_29a;}}var ei=this.nodeList.add(_297,_299);return ei;};jsts.noding.NodedSegmentString.prototype.toString=function(){var _29c=new jsts.geom.GeometryFactory();return new jsts.io.WKTWriter().write(_29c.createLineString(this.pts));};jsts.index.chain.MonotoneChainBuilder=function(){};jsts.index.chain.MonotoneChainBuilder.toIntArray=function(list){var _29d=[];for(var i=0;i<list.length;i++){_29d[i]=list[i];}return _29d;};jsts.index.chain.MonotoneChainBuilder.getChains=function(pts){if(arguments.length===2){return jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments);}return jsts.index.chain.MonotoneChainBuilder.getChains2(pts,null);};jsts.index.chain.MonotoneChainBuilder.getChains2=function(pts,_29e){var _29f=[];var _2a0=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(pts);for(var i=0;i<_2a0.length-1;i++){var mc=new jsts.index.chain.MonotoneChain(pts,_2a0[i],_2a0[i+1],_29e);_29f.push(mc);}return _29f;};jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(pts){var _2a1=0;var _2a2=[];_2a2.push(_2a1);do{var last=jsts.index.chain.MonotoneChainBuilder.findChainEnd(pts,_2a1);_2a2.push(last);_2a1=last;}while(_2a1<pts.length-1);var _2a3=jsts.index.chain.MonotoneChainBuilder.toIntArray(_2a2);return _2a3;};jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(pts,_2a4){var _2a5=_2a4;while(_2a5<pts.length-1&&pts[_2a5].equals2D(pts[_2a5+1])){_2a5++;}if(_2a5>=pts.length-1){return pts.length-1;}var _2a6=jsts.geomgraph.Quadrant.quadrant(pts[_2a5],pts[_2a5+1]);var last=_2a4+1;while(last<pts.length){if(!pts[last-1].equals2D(pts[last])){var quad=jsts.geomgraph.Quadrant.quadrant(pts[last-1],pts[last]);if(quad!==_2a6){break;}}last++;}return last-1;};jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]];this.intPt=[null,null];this.pa=this.intPt[0];this.pb=this.intPt[1];this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.LineIntersector.NO_INTERSECTION=0;jsts.algorithm.LineIntersector.POINT_INTERSECTION=1;jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2;jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(_2a7){this.precisionModel=_2a7;};jsts.algorithm.LineIntersector.prototype.getEndpoint=function(_2a8,_2a9){return this.inputLines[_2a8][_2a9];};jsts.algorithm.LineIntersector.computeEdgeDistance=function(p,p0,p1){var dx=Math.abs(p1.x-p0.x);var dy=Math.abs(p1.y-p0.y);var dist=-1;if(p.equals(p0)){dist=0;}else{if(p.equals(p1)){if(dx>dy){dist=dx;}else{dist=dy;}}else{var pdx=Math.abs(p.x-p0.x);var pdy=Math.abs(p.y-p0.y);if(dx>dy){dist=pdx;}else{dist=pdy;}if(dist===0&&!p.equals(p0)){dist=Math.max(pdx,pdy);}}}if(dist===0&&!p.equals(p0)){throw new jsts.error.IllegalArgumentError("Bad distance calculation");}return dist;};jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(p,p1,p2){var dx=p.x-p1.x;var dy=p.y-p1.y;var dist=Math.sqrt(dx*dx+dy*dy);if(!(dist===0&&!p.equals(p1))){throw new jsts.error.IllegalArgumentError("Invalid distance calculation");}return dist;};jsts.algorithm.LineIntersector.prototype.result=null;jsts.algorithm.LineIntersector.prototype.inputLines=null;jsts.algorithm.LineIntersector.prototype.intPt=null;jsts.algorithm.LineIntersector.prototype.intLineIndex=null;jsts.algorithm.LineIntersector.prototype._isProper=null;jsts.algorithm.LineIntersector.prototype.pa=null;jsts.algorithm.LineIntersector.prototype.pb=null;jsts.algorithm.LineIntersector.prototype.precisionModel=null;jsts.algorithm.LineIntersector.prototype.computeIntersection=function(p,p1,p2){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;};jsts.algorithm.LineIntersector.prototype.computeIntersection=function(p1,p2,p3,p4){this.inputLines[0][0]=p1;this.inputLines[0][1]=p2;this.inputLines[1][0]=p3;this.inputLines[1][1]=p4;this.result=this.computeIntersect(p1,p2,p3,p4);};jsts.algorithm.LineIntersector.prototype.computeIntersect=function(p1,p2,q1,q2){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper;};jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result;};jsts.algorithm.LineIntersector.prototype.getIntersection=function(_2aa){return this.intPt[_2aa];};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){if(this.intLineIndex===null){this.intLineIndex=[[],[]];this.computeIntLineIndex(0);this.computeIntLineIndex(1);}};jsts.algorithm.LineIntersector.prototype.isIntersection=function(pt){var i;for(i=0;i<this.result;i++){if(this.intPt[i].equals2D(pt)){return true;}}return false;};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){if(arguments.length===1){return this.isInteriorIntersection2.apply(this,arguments);}if(this.isInteriorIntersection(0)){return true;}if(this.isInteriorIntersection(1)){return true;}return false;};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(_2ab){var i;for(i=0;i<this.result;i++){if(!(this.intPt[i].equals2D(this.inputLines[_2ab][0])||this.intPt[i].equals2D(this.inputLines[_2ab][1]))){return true;}}return false;};jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper;};jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(_2ac,_2ad){this.computeIntLineIndex();return this.intPt[intLineIndex[_2ac][_2ad]];};jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(_2ae,_2af){this.computeIntLineIndex();return this.intLineIndex[_2ae][_2af];};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(_2b0){var _2b1=this.getEdgeDistance(_2b0,0);var _2b2=this.getEdgeDistance(_2b0,1);if(_2b1>_2b2){this.intLineIndex[_2b0][0]=0;this.intLineIndex[_2b0][1]=1;}else{this.intLineIndex[_2b0][0]=1;this.intLineIndex[_2b0][1]=0;}};jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(_2b3,_2b4){var dist=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[_2b4],this.inputLines[_2b3][0],this.inputLines[_2b3][1]);return dist;};jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this);};jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector();jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(p,p1,p2){if(arguments.length===4){jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments);return;}this._isProper=false;if(jsts.geom.Envelope.intersects(p1,p2,p)){if((jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,p)===0)&&(jsts.algorithm.CGAlgorithms.orientationIndex(p2,p1,p)===0)){this._isProper=true;if(p.equals(p1)||p.equals(p2)){this._isProper=false;}this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION;return;}}this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(p1,p2,q1,q2){this._isProper=false;if(!jsts.geom.Envelope.intersects(p1,p2,q1,q2)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}var Pq1=jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q1);var Pq2=jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q2);if((Pq1>0&&Pq2>0)||(Pq1<0&&Pq2<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}var Qp1=jsts.algorithm.CGAlgorithms.orientationIndex(q1,q2,p1);var Qp2=jsts.algorithm.CGAlgorithms.orientationIndex(q1,q2,p2);if((Qp1>0&&Qp2>0)||(Qp1<0&&Qp2<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}var _2b5=Pq1===0&&Pq2===0&&Qp1===0&&Qp2===0;if(_2b5){return this.computeCollinearIntersection(p1,p2,q1,q2);}if(Pq1===0||Pq2===0||Qp1===0||Qp2===0){this._isProper=false;if(p1.equals2D(q1)||p1.equals2D(q2)){this.intPt[0]=p1;}else{if(p2.equals2D(q1)||p2.equals2D(q2)){this.intPt[0]=p2;}else{if(Pq1===0){this.intPt[0]=new jsts.geom.Coordinate(q1);}else{if(Pq2===0){this.intPt[0]=new jsts.geom.Coordinate(q2);}else{if(Qp1===0){this.intPt[0]=new jsts.geom.Coordinate(p1);}else{if(Qp2===0){this.intPt[0]=new jsts.geom.Coordinate(p2);}}}}}}}else{this._isProper=true;this.intPt[0]=this.intersection(p1,p2,q1,q2);}return jsts.algorithm.LineIntersector.POINT_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(p1,p2,q1,q2){var _2b6=jsts.geom.Envelope.intersects(p1,p2,q1);var _2b7=jsts.geom.Envelope.intersects(p1,p2,q2);var _2b8=jsts.geom.Envelope.intersects(q1,q2,p1);var _2b9=jsts.geom.Envelope.intersects(q1,q2,p2);if(_2b6&&_2b7){this.intPt[0]=q1;this.intPt[1]=q2;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}if(_2b8&&_2b9){this.intPt[0]=p1;this.intPt[1]=p2;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}if(_2b6&&_2b8){this.intPt[0]=q1;this.intPt[1]=p1;return q1.equals(p1)&&!_2b7&&!_2b9?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}if(_2b6&&_2b9){this.intPt[0]=q1;this.intPt[1]=p2;return q1.equals(p2)&&!_2b7&&!_2b8?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}if(_2b7&&_2b8){this.intPt[0]=q2;this.intPt[1]=p1;return q2.equals(p1)&&!_2b6&&!_2b9?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}if(_2b7&&_2b9){this.intPt[0]=q2;this.intPt[1]=p2;return q2.equals(p2)&&!_2b6&&!_2b8?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}return jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.intersection=function(p1,p2,q1,q2){var _2ba=this.intersectionWithNormalization(p1,p2,q1,q2);if(!this.isInSegmentEnvelopes(_2ba)){_2ba=jsts.algorithm.CentralEndpointIntersector.getIntersection(p1,p2,q1,q2);}if(this.precisionModel!==null){this.precisionModel.makePrecise(_2ba);}return _2ba;};jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(p1,p2,q1,q2){var n1=new jsts.geom.Coordinate(p1);var n2=new jsts.geom.Coordinate(p2);var n3=new jsts.geom.Coordinate(q1);var n4=new jsts.geom.Coordinate(q2);var _2bb=new jsts.geom.Coordinate();this.normalizeToEnvCentre(n1,n2,n3,n4,_2bb);var _2bc=this.safeHCoordinateIntersection(n1,n2,n3,n4);_2bc.x+=_2bb.x;_2bc.y+=_2bb.y;return _2bc;};jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(p1,p2,q1,q2){var _2bd=null;try{_2bd=jsts.algorithm.HCoordinate.intersection(p1,p2,q1,q2);}catch(e){if(e instanceof jsts.error.NotRepresentableError){_2bd=jsts.algorithm.CentralEndpointIntersector.getIntersection(p1,p2,q1,q2);}else{throw e;}}return _2bd;};jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(n1,n2,n3,n4,_2be){_2be.x=this.smallestInAbsValue(n1.x,n2.x,n3.x,n4.x);_2be.y=this.smallestInAbsValue(n1.y,n2.y,n3.y,n4.y);n1.x-=_2be.x;n1.y-=_2be.y;n2.x-=_2be.x;n2.y-=_2be.y;n3.x-=_2be.x;n3.y-=_2be.y;n4.x-=_2be.x;n4.y-=_2be.y;};jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(n00,n01,n10,n11,_2bf){var _2c0=n00.x<n01.x?n00.x:n01.x;var _2c1=n00.y<n01.y?n00.y:n01.y;var _2c2=n00.x>n01.x?n00.x:n01.x;var _2c3=n00.y>n01.y?n00.y:n01.y;var _2c4=n10.x<n11.x?n10.x:n11.x;var _2c5=n10.y<n11.y?n10.y:n11.y;var _2c6=n10.x>n11.x?n10.x:n11.x;var _2c7=n10.y>n11.y?n10.y:n11.y;var _2c8=_2c0>_2c4?_2c0:_2c4;var _2c9=_2c2<_2c6?_2c2:_2c6;var _2ca=_2c1>_2c5?_2c1:_2c5;var _2cb=_2c3<_2c7?_2c3:_2c7;var _2cc=(_2c8+_2c9)/2;var _2cd=(_2ca+_2cb)/2;_2bf.x=_2cc;_2bf.y=_2cd;n00.x-=_2bf.x;n00.y-=_2bf.y;n01.x-=_2bf.x;n01.y-=_2bf.y;n10.x-=_2bf.x;n10.y-=_2bf.y;n11.x-=_2bf.x;n11.y-=_2bf.y;};jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(x1,x2,x3,x4){var x=x1;var xabs=Math.abs(x);if(Math.abs(x2)<xabs){x=x2;xabs=Math.abs(x2);}if(Math.abs(x3)<xabs){x=x3;xabs=Math.abs(x3);}if(Math.abs(x4)<xabs){x=x4;}return x;};jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(_2ce){var env0=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]);var env1=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return env0.contains(_2ce)&&env1.contains(_2ce);};jsts.algorithm.HCoordinate=function(){this.x=0;this.y=0;this.w=1;if(arguments.length===1){this.initFrom1Coordinate(arguments[0]);}else{if(arguments.length===2&&arguments[0] instanceof jsts.geom.Coordinate){this.initFrom2Coordinates(arguments[0],arguments[1]);}else{if(arguments.length===2&&arguments[0] instanceof jsts.algorithm.HCoordinate){this.initFrom2HCoordinates(arguments[0],arguments[1]);}else{if(arguments.length===2){this.initFromXY(arguments[0],arguments[1]);}else{if(arguments.length===3){this.initFromXYW(arguments[0],arguments[1],arguments[2]);}else{if(arguments.length===4){this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3]);}}}}}}};jsts.algorithm.HCoordinate.intersection=function(p1,p2,q1,q2){var px,py,pw,qx,qy,qw,x,y,w,xInt,yInt;px=p1.y-p2.y;py=p2.x-p1.x;pw=p1.x*p2.y-p2.x*p1.y;qx=q1.y-q2.y;qy=q2.x-q1.x;qw=q1.x*q2.y-q2.x*q1.y;x=py*qw-qy*pw;y=qx*pw-px*qw;w=px*qy-qx*py;xInt=x/w;yInt=y/w;if(!isFinite(xInt)||!isFinite(yInt)){throw new jsts.error.NotRepresentableError();}return new jsts.geom.Coordinate(xInt,yInt);};jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(p){this.x=p.x;this.y=p.y;this.w=1;};jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(p1,p2){this.x=p1.y-p2.y;this.y=p2.x-p1.x;this.w=p1.x*p2.y-p2.x*p1.y;};jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(p1,p2){this.x=p1.y*p2.w-p2.y*p1.w;this.y=p2.x*p1.w-p1.x*p2.w;this.w=p1.x*p2.y-p2.x*p1.y;};jsts.algorithm.HCoordinate.prototype.initFromXYW=function(x,y,w){this.x=x;this.y=y;this.w=w;};jsts.algorithm.HCoordinate.prototype.initFromXY=function(x,y){this.x=x;this.y=y;this.w=1;};jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(p1,p2,q1,q2){var px,py,pw,qx,qy,qw;px=p1.y-p2.y;py=p2.x-p1.x;pw=p1.x*p2.y-p2.x*p1.y;qx=q1.y-q2.y;qy=q2.x-q1.x;qw=q1.x*q2.y-q2.x*q1.y;this.x=py*qw-qy*pw;this.y=qx*pw-px*qw;this.w=px*qy-qx*py;};jsts.algorithm.HCoordinate.prototype.getX=function(){var a=this.x/this.w;if(!isFinite(a)){throw new jsts.error.NotRepresentableError();}return a;};jsts.algorithm.HCoordinate.prototype.getY=function(){var a=this.y/this.w;if(!isFinite(a)){throw new jsts.error.NotRepresentableError();}return a;};jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var p=new jsts.geom.Coordinate();p.x=this.getX();p.y=this.getY();return p;};jsts.geom.LineSegment=function(){if(arguments.length===0){this.p0=new jsts.geom.Coordinate();this.p1=new jsts.geom.Coordinate();}else{if(arguments.length===1){this.p0=arguments[0].p0;this.p1=arguments[0].p1;}else{if(arguments.length===2){this.p0=arguments[0];this.p1=arguments[1];}else{if(arguments.length===4){this.p0=new jsts.geom.Coordinate(arguments[0],arguments[1]);this.p1=new jsts.geom.Coordinate(arguments[2],arguments[3]);}}}}};jsts.geom.LineSegment.prototype.p0=null;jsts.geom.LineSegment.prototype.p1=null;jsts.geom.LineSegment.midPoint=function(p0,p1){return new jsts.geom.Coordinate((p0.x+p1.x)/2,(p0.y+p1.y)/2);};jsts.geom.LineSegment.prototype.getCoordinate=function(i){if(i===0){return this.p0;}return this.p1;};jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1);};jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y;};jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x;};jsts.geom.LineSegment.prototype.orientationIndex=function(arg){if(arg instanceof jsts.geom.LineSegment){return this.orientationIndex1(arg);}else{if(arg instanceof jsts.geom.Coordinate){return this.orientationIndex2(arg);}}};jsts.geom.LineSegment.prototype.orientationIndex1=function(seg){var _2cf=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p0);var _2d0=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p1);if(_2cf>=0&&_2d0>=0){return Math.max(_2cf,_2d0);}if(_2cf<=0&&_2d0<=0){return Math.max(_2cf,_2d0);}return 0;};jsts.geom.LineSegment.prototype.orientationIndex2=function(p){return jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,p);};jsts.geom.LineSegment.prototype.reverse=function(){var temp=this.p0;this.p0=this.p1;this.p1=temp;};jsts.geom.LineSegment.prototype.normalize=function(){if(this.p1.compareTo(this.p0)<0){this.reverse();}};jsts.geom.LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x);};jsts.geom.LineSegment.prototype.midPoint=function(){return jsts.geom.LineSegment.midPoint(this.p0,this.p1);};jsts.geom.LineSegment.prototype.distance=function(arg){if(arg instanceof jsts.geom.LineSegment){return this.distance1(arg);}else{if(arg instanceof jsts.geom.Coordinate){return this.distance2(arg);}}};jsts.geom.LineSegment.prototype.distance1=function(ls){return jsts.algorithm.CGAlgorithms.distanceLineLine(this.p0,this.p1,ls.p0,ls.p1);};jsts.geom.LineSegment.prototype.distance2=function(p){return jsts.algorithm.CGAlgorithms.distancePointLine(p,this.p0,this.p1);};jsts.geom.LineSegment.prototype.pointAlong=function(_2d1){var _2d2=new jsts.geom.Coordinate();_2d2.x=this.p0.x+_2d1*(this.p1.x-this.p0.x);_2d2.y=this.p0.y+_2d1*(this.p1.y-this.p0.y);return _2d2;};jsts.geom.LineSegment.prototype.pointAlongOffset=function(_2d3,_2d4){var segx=this.p0.x+_2d3*(this.p1.x-this.p0.x);var segy=this.p0.y+_2d3*(this.p1.y-this.p0.y);var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;var len=Math.sqrt(dx*dx+dy*dy);var ux=0;var uy=0;if(_2d4!==0){if(len<=0){throw "Cannot compute offset from zero-length line segment";}ux=_2d4*dx/len;uy=_2d4*dy/len;}var _2d5=segx-uy;var _2d6=segy+ux;var _2d7=new jsts.geom.Coordinate(_2d5,_2d6);return _2d7;};jsts.geom.LineSegment.prototype.projectionFactor=function(p){if(p.equals(this.p0)){return 0;}if(p.equals(this.p1)){return 1;}var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;var len2=dx*dx+dy*dy;var r=((p.x-this.p0.x)*dx+(p.y-this.p0.y)*dy)/len2;return r;};jsts.geom.LineSegment.prototype.segmentFraction=function(_2d8){var _2d9=this.projectionFactor(_2d8);if(_2d9<0){_2d9=0;}else{if(_2d9>1||isNaN(_2d9)){_2d9=1;}}return _2d9;};jsts.geom.LineSegment.prototype.project=function(arg){if(arg instanceof jsts.geom.Coordinate){return this.project1(arg);}else{if(arg instanceof jsts.geom.LineSegment){return this.project2(arg);}}};jsts.geom.LineSegment.prototype.project1=function(p){if(p.equals(this.p0)||p.equals(this.p1)){return new jsts.geom.Coordinate(p);}var r=this.projectionFactor(p);var _2da=new jsts.geom.Coordinate();_2da.x=this.p0.x+r*(this.p1.x-this.p0.x);_2da.y=this.p0.y+r*(this.p1.y-this.p0.y);return _2da;};jsts.geom.LineSegment.prototype.project2=function(seg){var pf0=this.projectionFactor(seg.p0);var pf1=this.projectionFactor(seg.p1);if(pf0>=1&&pf1>=1){return null;}if(pf0<=0&&pf1<=0){return null;}var _2db=this.project(seg.p0);if(pf0<0){_2db=p0;}if(pf0>1){_2db=p1;}var _2dc=this.project(seg.p1);if(pf1<0){_2dc=p0;}if(pf1>1){_2dc=p1;}return new jsts.geom.LineSegment(_2db,_2dc);};jsts.geom.LineSegment.prototype.closestPoint=function(p){var _2dd=this.projectionFactor(p);if(_2dd>0&&_2dd<1){return this.project(p);}var _2de=this.p0.distance(p);var _2df=this.p1.distance(p);if(_2de<_2df){return this.p0;}return this.p1;};jsts.geom.LineSegment.prototype.closestPoints=function(line){var _2e0=this.intersection(line);if(_2e0!==null){return [_2e0,_2e0];}var _2e1=[];var _2e2=Number.MAX_VALUE;var dist;var _2e3=this.closestPoint(line.p0);_2e2=_2e3.distance(line.p0);_2e1[0]=_2e3;_2e1[1]=line.p0;var _2e4=this.closestPoint(line.p1);dist=_2e4.distance(line.p1);if(dist<_2e2){_2e2=dist;_2e1[0]=_2e4;_2e1[1]=line.p1;}var _2e5=line.closestPoint(this.p0);dist=_2e5.distance(this.p0);if(dist<_2e2){_2e2=dist;_2e1[0]=this.p0;_2e1[1]=_2e5;}var _2e6=line.closestPoint(this.p1);dist=_2e6.distance(this.p1);if(dist<_2e2){_2e2=dist;_2e1[0]=this.p1;_2e1[1]=_2e6;}return _2e1;};jsts.geom.LineSegment.prototype.intersection=function(line){var li=new jsts.algorithm.RobustLineIntersector();li.computeIntersection(this.p0,this.p1,line.p0,line.p1);if(li.hasIntersection()){return li.getIntersection(0);}return null;};jsts.geom.LineSegment.prototype.setCoordinates=function(ls){if(ls instanceof jsts.geom.Coordinate){this.setCoordinates2.apply(this,arguments);return;}this.setCoordinates2(ls.p0,ls.p1);};jsts.geom.LineSegment.prototype.setCoordinates2=function(p0,p1){this.p0.x=p0.x;this.p0.y=p0.y;this.p1.x=p1.x;this.p1.y=p1.y;};jsts.geom.LineSegment.prototype.distancePerpendicular=function(p){return jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular(p,this.p0,this.p1);};jsts.geom.LineSegment.prototype.lineIntersection=function(line){try{var _2e7=jsts.algorithm.HCoordinate.intersection(this.p0,this.p1,line.p0,line.p1);return _2e7;}catch(ex){}return null;};jsts.geom.LineSegment.prototype.toGeometry=function(_2e8){return _2e8.createLineString([this.p0,this.p1]);};jsts.geom.LineSegment.prototype.equals=function(o){if(!(o instanceof jsts.geom.LineSegment)){return false;}return this.p0.equals(o.p0)&&this.p1.equals(o.p1);};jsts.geom.LineSegment.prototype.compareTo=function(o){var _2e9=this.p0.compareTo(o.p0);if(_2e9!==0){return _2e9;}return this.p1.compareTo(o.p1);};jsts.geom.LineSegment.prototype.equalsTopo=function(_2ea){return this.p0.equals(_2ea.p0)&&this.p1.equals(_2ea.p1)||this.p0.equals(_2ea.p1)&&this.p1.equals(_2ea.p0);};jsts.geom.LineSegment.prototype.toString=function(){return "LINESTRING("+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")";};jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.tempEnv2=new jsts.geom.Envelope();this.overlapSeg1=new jsts.geom.LineSegment();this.overlapSeg2=new jsts.geom.LineSegment();};jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(mc1,_2eb,mc2,_2ec){this.mc1.getLineSegment(_2eb,this.overlapSeg1);this.mc2.getLineSegment(_2ec,this.overlapSeg2);this.overlap2(this.overlapSeg1,this.overlapSeg2);};jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(seg1,seg2){};(function(){var _2ed=jsts.index.chain.MonotoneChainOverlapAction;var _2ee=jsts.noding.SinglePassNoder;var _2ef=jsts.index.strtree.STRtree;var _2f0=jsts.noding.NodedSegmentString;var _2f1=jsts.index.chain.MonotoneChainBuilder;var _2f2=function(si){this.si=si;};_2f2.prototype=new _2ed();_2f2.constructor=_2f2;_2f2.prototype.si=null;_2f2.prototype.overlap=function(mc1,_2f3,mc2,_2f4){var ss1=mc1.getContext();var ss2=mc2.getContext();this.si.processIntersections(ss1,_2f3,ss2,_2f4);};jsts.noding.MCIndexNoder=function(){this.monoChains=[];this.index=new _2ef();};jsts.noding.MCIndexNoder.prototype=new _2ee();jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder;jsts.noding.MCIndexNoder.prototype.monoChains=null;jsts.noding.MCIndexNoder.prototype.index=null;jsts.noding.MCIndexNoder.prototype.idCounter=0;jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null;jsts.noding.MCIndexNoder.prototype.nOverlaps=0;jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains;};jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index;};jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return _2f0.getNodedSubstrings(this.nodedSegStrings);};jsts.noding.MCIndexNoder.prototype.computeNodes=function(_2f5){this.nodedSegStrings=_2f5;for(var i=_2f5.iterator();i.hasNext();){this.add(i.next());}this.intersectChains();};jsts.noding.MCIndexNoder.prototype.intersectChains=function(){var _2f6=new _2f2(this.segInt);for(var i=0;i<this.monoChains.length;i++){var _2f7=this.monoChains[i];var _2f8=this.index.query(_2f7.getEnvelope());for(var j=0;j<_2f8.length;j++){var _2f9=_2f8[j];if(_2f9.getId()>_2f7.getId()){_2f7.computeOverlaps(_2f9,_2f6);this.nOverlaps++;}if(this.segInt.isDone()){return;}}}};jsts.noding.MCIndexNoder.prototype.add=function(_2fa){var _2fb=_2f1.getChains(_2fa.getCoordinates(),_2fa);for(var i=0;i<_2fb.length;i++){var mc=_2fb[i];mc.setId(this.idCounter++);this.index.insert(mc.getEnvelope(),mc);this.monoChains.push(mc);}};})();jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree();};jsts.simplify.LineSegmentIndex.prototype.index=null;jsts.simplify.LineSegmentIndex.prototype.add=function(line){if(line instanceof jsts.geom.LineSegment){this.add2(line);return;}var segs=line.getSegments();for(var i=0;i<segs.length;i++){var seg=segs[i];this.add2(seg);}};jsts.simplify.LineSegmentIndex.prototype.add2=function(seg){this.index.insert(new jsts.geom.Envelope(seg.p0,seg.p1),seg);};jsts.simplify.LineSegmentIndex.prototype.remove=function(seg){this.index.remove(new jsts.geom.Envelope(seg.p0,seg.p1),seg);};jsts.simplify.LineSegmentIndex.prototype.query=function(_2fc){var env=new jsts.geom.Envelope(_2fc.p0,_2fc.p1);var _2fd=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(_2fc);this.index.query(env,_2fd);var _2fe=_2fd.getItems();return _2fe;};jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(_2ff){this.items=[];this.querySeg=_2ff;};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor();jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(item){var seg=item;if(jsts.geom.Envelope.intersects(seg.p0,seg.p1,this.querySeg.p0,this.querySeg.p1)){this.items.push(item);}};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items;};jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap();this.edgeList=null;this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE];};jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null;jsts.geomgraph.EdgeEndStar.prototype.edgeList=null;jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null;jsts.geomgraph.EdgeEndStar.prototype.insert=function(e){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(e,obj){this.edgeMap.put(e,obj);this.edgeList=null;};jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var it=this.iterator();if(!it.hasNext()){return null;}var e=it.next();return e.getCoordinate();};jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size();};jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator();};jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){if(this.edgeList===null){this.edgeList=new javascript.util.ArrayList(this.edgeMap.values());}return this.edgeList;};jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(ee){this.getEdges();var i=this.edgeList.indexOf(ee);var _300=i-1;if(i===0){_300=this.edgeList.length-1;}return this.edgeList[_300];};jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(_301){this.computeEdgeEndLabels(_301[0].getBoundaryNodeRule());this.propagateSideLabels(0);this.propagateSideLabels(1);var _302=[false,false];for(var it=this.iterator();it.hasNext();){var e=it.next();var _303=e.getLabel();for(var _304=0;_304<2;_304++){if(_303.isLine(_304)&&_303.getLocation(_304)===jsts.geom.Location.BOUNDARY){_302[_304]=true;}}}for(var it=this.iterator();it.hasNext();){var e=it.next();var _303=e.getLabel();for(var _304=0;_304<2;_304++){if(_303.isAnyNull(_304)){var loc=jsts.geom.Location.NONE;if(_302[_304]){loc=jsts.geom.Location.EXTERIOR;}else{var p=e.getCoordinate();loc=this.getLocation(_304,p,_301);}_303.setAllLocationsIfNull(_304,loc);}}}};jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(_305){for(var it=this.iterator();it.hasNext();){var ee=it.next();ee.computeLabel(_305);}};jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(_306,p,geom){if(this.ptInAreaLocation[_306]===jsts.geom.Location.NONE){this.ptInAreaLocation[_306]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(p,geom[_306].getGeometry());}return this.ptInAreaLocation[_306];};jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(_307){this.computeEdgeEndLabels(_307.getBoundaryNodeRule());return this.checkAreaLabelsConsistent(0);};jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(_308){var _309=this.getEdges();if(_309.size()<=0){return true;}var _30a=_309.size()-1;var _30b=_309.get(_30a).getLabel();var _30c=_30b.getLocation(_308,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(_30c!=jsts.geom.Location.NONE,"Found unlabelled area edge");var _30d=_30c;for(var it=this.iterator();it.hasNext();){var e=it.next();var _30e=e.getLabel();jsts.util.Assert.isTrue(_30e.isArea(_308),"Found non-area edge");var _30f=_30e.getLocation(_308,jsts.geomgraph.Position.LEFT);var _310=_30e.getLocation(_308,jsts.geomgraph.Position.RIGHT);if(_30f===_310){return false;}if(_310!==_30d){return false;}_30d=_30f;}return true;};jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(_311){var _312=jsts.geom.Location.NONE;for(var it=this.iterator();it.hasNext();){var e=it.next();var _313=e.getLabel();if(_313.isArea(_311)&&_313.getLocation(_311,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE){_312=_313.getLocation(_311,jsts.geomgraph.Position.LEFT);}}if(_312===jsts.geom.Location.NONE){return;}var _314=_312;for(var it=this.iterator();it.hasNext();){var e=it.next();var _313=e.getLabel();if(_313.getLocation(_311,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE){_313.setLocation(_311,jsts.geomgraph.Position.ON,_314);}if(_313.isArea(_311)){var _315=_313.getLocation(_311,jsts.geomgraph.Position.LEFT);var _316=_313.getLocation(_311,jsts.geomgraph.Position.RIGHT);if(_316!==jsts.geom.Location.NONE){if(_316!==_314){throw new jsts.error.TopologyError("side location conflict",e.getCoordinate());}if(_315===jsts.geom.Location.NONE){jsts.util.Assert.shouldNeverReachHere("found single null side (at "+e.getCoordinate()+")");}_314=_315;}else{jsts.util.Assert.isTrue(_313.getLocation(_311,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side");_313.setLocation(_311,jsts.geomgraph.Position.RIGHT,_314);_313.setLocation(_311,jsts.geomgraph.Position.LEFT,_314);}}}};jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(_317){this.iterator();for(var i=0;i<this.edgeList.size();i++){var e=this.edgeList.get(i);if(e===_317){return i;}}return -1;};jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments);};jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar();jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(e){var eb=this.edgeMap.get(e);if(eb===null){eb=new jsts.operation.relate.EdgeEndBundle(e);this.insertEdgeEnd(e,eb);}else{eb.insert(e);}};jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(im){for(var it=this.iterator();it.hasNext();){var esb=it.next();esb.updateIM(im);}};jsts.index.ArrayListVisitor=function(){this.items=[];};jsts.index.ArrayListVisitor.prototype.visitItem=function(item){this.items.push(item);};jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items;};jsts.algorithm.distance.DistanceToPoint=function(){};jsts.algorithm.distance.DistanceToPoint.computeDistance=function(geom,pt,_318){if(geom instanceof jsts.geom.LineString){jsts.algorithm.distance.DistanceToPoint.computeDistance2(geom,pt,_318);}else{if(geom instanceof jsts.geom.Polygon){jsts.algorithm.distance.DistanceToPoint.computeDistance4(geom,pt,_318);}else{if(geom instanceof jsts.geom.GeometryCollection){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);jsts.algorithm.distance.DistanceToPoint.computeDistance(g,pt,_318);}}else{_318.setMinimum(geom.getCoordinate(),pt);}}}};jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(line,pt,_319){var _31a=new jsts.geom.LineSegment();var _31b=line.getCoordinates();for(var i=0;i<_31b.length-1;i++){_31a.setCoordinates(_31b[i],_31b[i+1]);var _31c=_31a.closestPoint(pt);_319.setMinimum(_31c,pt);}};jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(_31d,pt,_31e){var _31f=_31d.closestPoint(pt);_31e.setMinimum(_31f,pt);};jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(poly,pt,_320){jsts.algorithm.distance.DistanceToPoint.computeDistance2(poly.getExteriorRing(),pt,_320);for(var i=0;i<poly.getNumInteriorRing();i++){jsts.algorithm.distance.DistanceToPoint.computeDistance2(poly.getInteriorRingN(i),pt,_320);}};jsts.index.strtree.ItemBoundable=function(_321,item){this.bounds=_321;this.item=item;};jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable;jsts.index.strtree.ItemBoundable.prototype.bounds=null;jsts.index.strtree.ItemBoundable.prototype.item=null;jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds;};jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item;};(function(){var _322=javascript.util.ArrayList;var _323=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new _322();this.ocaMap=new _323();};jsts.geomgraph.EdgeList.prototype.edges=null;jsts.geomgraph.EdgeList.prototype.ocaMap=null;jsts.geomgraph.EdgeList.prototype.add=function(e){this.edges.add(e);var oca=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(oca,e);};jsts.geomgraph.EdgeList.prototype.addAll=function(_324){for(var i=_324.iterator();i.hasNext();){this.add(i.next());}};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(e){var oca=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());var _325=this.ocaMap.get(oca);return _325;};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator();};jsts.geomgraph.EdgeList.prototype.get=function(i){return this.edges.get(i);};jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(e){for(var i=0;i<this.edges.size();i++){if(this.edges.get(i).equals(e)){return i;}}return -1;};})();jsts.operation.IsSimpleOp=function(geom){this.geom=geom;};jsts.operation.IsSimpleOp.prototype.geom=null;jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=true;jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null;jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(geom){this.geom=geom;};jsts.operation.IsSimpleOp.prototype.isSimple=function(){this.nonSimpleLocation=null;if(this.geom instanceof jsts.geom.LineString){return this.isSimpleLinearGeometry(this.geom);}if(this.geom instanceof jsts.geom.MultiLineString){return this.isSimpleLinearGeometry(this.geom);}if(this.geom instanceof jsts.geom.MultiPoint){return this.isSimpleMultiPoint(this.geom);}return true;};jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(mp){if(mp.isEmpty()){return true;}var _326=[];for(var i=0;i<mp.getNumGeometries();i++){var pt=mp.getGeometryN(i);var p=pt.getCoordinate();for(var j=0;j<_326.length;j++){var _327=_326[j];if(p.equals2D(_327)){this.nonSimpleLocation=p;return false;}}_326.push(p);}return true;};jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(geom){if(geom.isEmpty()){return true;}var _328=new jsts.geomgraph.GeometryGraph(0,geom);var li=new jsts.algorithm.RobustLineIntersector();var si=_328.computeSelfNodes(li,true);if(!si.hasIntersection()){return true;}if(si.hasProperIntersection()){this.nonSimpleLocation=si.getProperIntersectionPoint();return false;}if(this.hasNonEndpointIntersection(_328)){return false;}if(this.isClosedEndpointsInInterior){if(this.hasClosedEndpointIntersection(_328)){return false;}}return true;};jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(_329){for(var i=_329.getEdgeIterator();i.hasNext();){var e=i.next();var _32a=e.getMaximumSegmentIndex();for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();if(!ei.isEndPoint(_32a)){this.nonSimpleLocation=ei.getCoordinate();return true;}}}return false;};jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(_32b){var _32c=new javascript.util.TreeMap();for(var i=_32b.getEdgeIterator();i.hasNext();){var e=i.next();var _32d=e.getMaximumSegmentIndex();var _32e=e.isClosed();var p0=e.getCoordinate(0);this.addEndpoint(_32c,p0,_32e);var p1=e.getCoordinate(e.getNumPoints()-1);this.addEndpoint(_32c,p1,_32e);}for(var i=_32c.values().iterator();i.hasNext();){var _32f=i.next();if(_32f.isClosed&&_32f.degree!=2){this.nonSimpleLocation=_32f.getCoordinate();return true;}}return false;};jsts.operation.IsSimpleOp.EndpointInfo=function(pt){this.pt=pt;this.isClosed=false;this.degree=0;};jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt;};jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(_330){this.degree++;this.isClosed=this.isClosed||_330;};jsts.operation.IsSimpleOp.prototype.addEndpoint=function(_331,p,_332){var _333=_331.get(p);if(_333===null){_333=new jsts.operation.IsSimpleOp.EndpointInfo(p);_331.put(p,_333);}_333.addEndpoint(_332);};(function(){var _334=function(){this.snapTolerance=0;this.seg=new jsts.geom.LineSegment();this.allowSnappingToSourceVertices=false;this.isClosed=false;this.srcPts=[];if(arguments[0] instanceof jsts.geom.LineString){this.initFromLine.apply(this,arguments);}else{this.initFromPoints.apply(this,arguments);}};_334.prototype.initFromLine=function(_335,_336){this.initFromPoints(_335.getCoordinates(),_336);};_334.prototype.initFromPoints=function(_337,_338){this.srcPts=_337;this.isClosed=this.calcIsClosed(_337);this.snapTolerance=_338;};_334.prototype.setAllowSnappingToSourceVertices=function(_339){this.allowSnappingToSourceVertices=_339;};_334.prototype.calcIsClosed=function(pts){if(pts.length<=1){return false;}return pts[0].equals(pts[pts.length-1]);};_334.prototype.snapTo=function(_33a){var _33b=new jsts.geom.CoordinateList(this.srcPts);this.snapVertices(_33b,_33a);this.snapSegments(_33b,_33a);return _33b.toCoordinateArray();};_334.prototype.snapVertices=function(_33c,_33d){var end=this.isClosed?_33c.size()-1:_33c.size(),i=0,_33e,_33f;for(i;i<end;i++){_33e=_33c.get(i);_33f=this.findSnapForVertex(_33e,_33d);if(_33f!==null){_33c.set(i,new jsts.geom.Coordinate(_33f));if(i===0&&this.isClosed){_33c.set(_33c.size()-1,new jsts.geom.Coordinate(_33f));}}}};_334.prototype.findSnapForVertex=function(pt,_340){var i=0,il=_340.length;for(i=0;i<il;i++){if(pt.equals(_340[i])){return null;}if(pt.distance(_340[i])<this.snapTolerance){return _340[i];}}return null;};_334.prototype.snapSegments=function(_341,_342){if(_342.length===0){return;}var _343=_342.length,i,_344,_345;if(_342.length>1&&_342[0].equals2D(_342[_342.length-1])){_343=_342.length-1;}i=0;for(i;i<_343;i++){_344=_342[i];_345=this.findSegmentIndexToSnap(_344,_341);if(_345>=0){_341.add(_345+1,new jsts.geom.Coordinate(_344),false);}}};_334.prototype.findSegmentIndexToSnap=function(_346,_347){var _348=Number.MAX_VALUE,_349=-1,i=0,dist;for(i;i<_347.size()-1;i++){this.seg.p0=_347.get(i);this.seg.p1=_347.get(i+1);if(this.seg.p0.equals(_346)||this.seg.p1.equals(_346)){if(this.allowSnappingToSourceVertices){continue;}else{return -1;}}dist=this.seg.distance(_346);if(dist<this.snapTolerance&&dist<_348){_348=dist;_349=i;}}return _349;};jsts.operation.overlay.snap.LineStringSnapper=_334;})();(function(){var _34a=javascript.util.ArrayList;var _34b=jsts.geom.GeometryComponentFilter;var _34c=jsts.geom.LineString;var _34d=jsts.operation.polygonize.EdgeRing;var _34e=jsts.operation.polygonize.PolygonizeGraph;var _34f=function(){var that=this;var _350=function(){};_350.prototype=new _34b();_350.prototype.filter=function(g){if(g instanceof _34c){that.add(g);}};this.lineStringAdder=new _350();this.dangles=new _34a();this.cutEdges=new _34a();this.invalidRingLines=new _34a();};_34f.prototype.lineStringAdder=null;_34f.prototype.graph=null;_34f.prototype.dangles=null;_34f.prototype.cutEdges=null;_34f.prototype.invalidRingLines=null;_34f.prototype.holeList=null;_34f.prototype.shellList=null;_34f.prototype.polyList=null;_34f.prototype.add=function(_351){if(_351 instanceof jsts.geom.LineString){return this.add3(_351);}else{if(_351 instanceof jsts.geom.Geometry){return this.add2(_351);}}for(var i=_351.iterator();i.hasNext();){var _352=i.next();this.add2(_352);}};_34f.prototype.add2=function(g){g.apply(this.lineStringAdder);};_34f.prototype.add3=function(line){if(this.graph==null){this.graph=new _34e(line.getFactory());}this.graph.addEdge(line);};_34f.prototype.getPolygons=function(){this.polygonize();return this.polyList;};_34f.prototype.getDangles=function(){this.polygonize();return this.dangles;};_34f.prototype.getCutEdges=function(){this.polygonize();return this.cutEdges;};_34f.prototype.getInvalidRingLines=function(){this.polygonize();return this.invalidRingLines;};_34f.prototype.polygonize=function(){if(this.polyList!=null){return;}this.polyList=new _34a();if(this.graph==null){return;}this.dangles=this.graph.deleteDangles();this.cutEdges=this.graph.deleteCutEdges();var _353=this.graph.getEdgeRings();var _354=new _34a();this.invalidRingLines=new _34a();this.findValidRings(_353,_354,this.invalidRingLines);this.findShellsAndHoles(_354);_34f.assignHolesToShells(this.holeList,this.shellList);this.polyList=new _34a();for(var i=this.shellList.iterator();i.hasNext();){var er=i.next();this.polyList.add(er.getPolygon());}};_34f.prototype.findValidRings=function(_355,_356,_357){for(var i=_355.iterator();i.hasNext();){var er=i.next();if(er.isValid()){_356.add(er);}else{_357.add(er.getLineString());}}};_34f.prototype.findShellsAndHoles=function(_358){this.holeList=new _34a();this.shellList=new _34a();for(var i=_358.iterator();i.hasNext();){var er=i.next();if(er.isHole()){this.holeList.add(er);}else{this.shellList.add(er);}}};_34f.assignHolesToShells=function(_359,_35a){for(var i=_359.iterator();i.hasNext();){var _35b=i.next();_34f.assignHoleToShell(_35b,_35a);}};_34f.assignHoleToShell=function(_35c,_35d){var _35e=_34d.findEdgeRingContaining(_35c,_35d);if(_35e!=null){_35e.addHole(_35c.getRing());}};jsts.operation.polygonize.Polygonizer=_34f;})();(function(){var _35f=javascript.util.ArrayList;var _360=function(){};_360.prototype.inputGeom=null;_360.prototype.factory=null;_360.prototype.pruneEmptyGeometry=true;_360.prototype.preserveGeometryCollectionType=true;_360.prototype.preserveCollections=false;_360.prototype.reserveType=false;_360.prototype.getInputGeometry=function(){return this.inputGeom;};_360.prototype.transform=function(_361){this.inputGeom=_361;this.factory=_361.getFactory();if(_361 instanceof jsts.geom.Point){return this.transformPoint(_361,null);}if(_361 instanceof jsts.geom.MultiPoint){return this.transformMultiPoint(_361,null);}if(_361 instanceof jsts.geom.LinearRing){return this.transformLinearRing(_361,null);}if(_361 instanceof jsts.geom.LineString){return this.transformLineString(_361,null);}if(_361 instanceof jsts.geom.MultiLineString){return this.transformMultiLineString(_361,null);}if(_361 instanceof jsts.geom.Polygon){return this.transformPolygon(_361,null);}if(_361 instanceof jsts.geom.MultiPolygon){return this.transformMultiPolygon(_361,null);}if(_361 instanceof jsts.geom.GeometryCollection){return this.transformGeometryCollection(_361,null);}throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+_361.getClass().getName());};_360.prototype.createCoordinateSequence=function(_362){return this.factory.getCoordinateSequenceFactory().create(_362);};_360.prototype.copy=function(seq){return seq.clone();};_360.prototype.transformCoordinates=function(_363,_364){return this.copy(_363);};_360.prototype.transformPoint=function(geom,_365){return this.factory.createPoint(this.transformCoordinates(geom.getCoordinateSequence(),geom));};_360.prototype.transformMultiPoint=function(geom,_366){var _367=new _35f();for(var i=0;i<geom.getNumGeometries();i++){var _368=this.transformPoint(geom.getGeometryN(i),geom);if(_368==null){continue;}if(_368.isEmpty()){continue;}_367.add(_368);}return this.factory.buildGeometry(_367);};_360.prototype.transformLinearRing=function(geom,_369){var seq=this.transformCoordinates(geom.getCoordinateSequence(),geom);var _36a=seq.length;if(_36a>0&&_36a<4&&!this.preserveType){return this.factory.createLineString(seq);}return this.factory.createLinearRing(seq);};_360.prototype.transformLineString=function(geom,_36b){return this.factory.createLineString(this.transformCoordinates(geom.getCoordinateSequence(),geom));};_360.prototype.transformMultiLineString=function(geom,_36c){var _36d=new _35f();for(var i=0;i<geom.getNumGeometries();i++){var _36e=this.transformLineString(geom.getGeometryN(i),geom);if(_36e==null){continue;}if(_36e.isEmpty()){continue;}_36d.add(_36e);}return this.factory.buildGeometry(_36d);};_360.prototype.transformPolygon=function(geom,_36f){var _370=true;var _371=this.transformLinearRing(geom.getExteriorRing(),geom);if(_371==null||!(_371 instanceof jsts.geom.LinearRing)||_371.isEmpty()){_370=false;}var _372=new _35f();for(var i=0;i<geom.getNumInteriorRing();i++){var hole=this.transformLinearRing(geom.getInteriorRingN(i),geom);if(hole==null||hole.isEmpty()){continue;}if(!(hole instanceof jsts.geom.LinearRing)){_370=false;}_372.add(hole);}if(_370){return this.factory.createPolygon(_371,_372.toArray());}else{var _373=new _35f();if(_371!=null){_373.add(_371);}_373.addAll(_372);return this.factory.buildGeometry(_373);}};_360.prototype.transformMultiPolygon=function(geom,_374){var _375=new _35f();for(var i=0;i<geom.getNumGeometries();i++){var _376=this.transformPolygon(geom.getGeometryN(i),geom);if(_376==null){continue;}if(_376.isEmpty()){continue;}_375.add(_376);}return this.factory.buildGeometry(_375);};_360.prototype.transformGeometryCollection=function(geom,_377){var _378=new _35f();for(var i=0;i<geom.getNumGeometries();i++){var _379=this.transform(geom.getGeometryN(i));if(_379==null){continue;}if(this.pruneEmptyGeometry&&_379.isEmpty()){continue;}_378.add(_379);}if(this.preserveGeometryCollectionType){return this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(_378));}return this.factory.buildGeometry(_378);};jsts.geom.util.GeometryTransformer=_360;})();(function(){var _37a=jsts.operation.overlay.snap.LineStringSnapper;var _37b=jsts.geom.PrecisionModel;var _37c=javascript.util.TreeSet;var _37d=function(_37e,_37f,_380){this.snapTolerance=_37e;this.snapPts=_37f;this.isSelfSnap=_380||false;};_37d.prototype=new jsts.geom.util.GeometryTransformer();_37d.prototype.snapTolerance=null;_37d.prototype.snapPts=null;_37d.prototype.isSelfSnap=false;_37d.prototype.transformCoordinates=function(_381,_382){var _383=_381;var _384=this.snapLine(_383,this.snapPts);return _384;};_37d.prototype.snapLine=function(_385,_386){var _387=new _37a(_385,this.snapTolerance);_387.setAllowSnappingToSourceVertices(this.isSelfSnap);return _387.snapTo(_386);};var _388=function(_389){this.srcGeom=_389;};_388.SNAP_PRECISION_FACTOR=1e-9;_388.computeOverlaySnapTolerance=function(g){if(arguments.length===2){return _388.computeOverlaySnapTolerance2.apply(this,arguments);}var _38a=this.computeSizeBasedSnapTolerance(g);var pm=g.getPrecisionModel();if(pm.getType()==_37b.FIXED){var _38b=(1/pm.getScale())*2/1.415;if(_38b>_38a){_38a=_38b;}}return _38a;};_388.computeSizeBasedSnapTolerance=function(g){var env=g.getEnvelopeInternal();var _38c=Math.min(env.getHeight(),env.getWidth());var _38d=_38c*_388.SNAP_PRECISION_FACTOR;return _38d;};_388.computeOverlaySnapTolerance2=function(g0,g1){return Math.min(this.computeOverlaySnapTolerance(g0),this.computeOverlaySnapTolerance(g1));};_388.snap=function(g0,g1,_38e){var _38f=[];var _390=new _388(g0);_38f[0]=_390.snapTo(g1,_38e);var _391=new _388(g1);_38f[1]=_391.snapTo(_38f[0],_38e);return _38f;};_388.snapToSelf=function(g0,_392,_393){var _394=new _388(g0);return _394.snapToSelf(_392,_393);};_388.prototype.srcGeom=null;_388.prototype.snapTo=function(_395,_396){var _397=this.extractTargetCoordinates(_395);var _398=new _37d(_396,_397);return _398.transform(this.srcGeom);};_388.prototype.snapToSelf=function(_399,_39a){var _39b=this.extractTargetCoordinates(srcGeom);var _39c=new _37d(_399,_39b,true);var _39d=_39c.transform(srcGeom);var _39e=_39d;if(_39a&&_39e instanceof Polygonal){_39e=_39d.buffer(0);}return _39e;};_388.prototype.extractTargetCoordinates=function(g){var _39f=new _37c();var pts=g.getCoordinates();for(var i=0;i<pts.length;i++){_39f.add(pts[i]);}return _39f.toArray();};_388.prototype.computeSnapTolerance=function(_3a0){var _3a1=this.computeMinimumSegmentLength(_3a0);var _3a2=_3a1/10;return _3a2;};_388.prototype.computeMinimumSegmentLength=function(pts){var _3a3=Number.MAX_VALUE;for(var i=0;i<pts.length-1;i++){var _3a4=pts[i].distance(pts[i+1]);if(_3a4<_3a3){_3a3=_3a4;}}return _3a3;};jsts.operation.overlay.snap.GeometrySnapper=_388;})();jsts.algorithm.PointLocator=function(_3a5){this.boundaryRule=_3a5?_3a5:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;};jsts.algorithm.PointLocator.prototype.boundaryRule=null;jsts.algorithm.PointLocator.prototype.isIn=null;jsts.algorithm.PointLocator.prototype.numBoundaries=null;jsts.algorithm.PointLocator.prototype.intersects=function(p,geom){return this.locate(p,geom)!==jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locate=function(p,geom){if(geom.isEmpty()){return jsts.geom.Location.EXTERIOR;}if(geom instanceof jsts.geom.Point){return this.locate2(p,geom);}else{if(geom instanceof jsts.geom.LineString){return this.locate3(p,geom);}else{if(geom instanceof jsts.geom.Polygon){return this.locate4(p,geom);}}}this.isIn=false;this.numBoundaries=0;this.computeLocation(p,geom);if(this.boundaryRule.isInBoundary(this.numBoundaries)){return jsts.geom.Location.BOUNDARY;}if(this.numBoundaries>0||this.isIn){return jsts.geom.Location.INTERIOR;}return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.computeLocation=function(p,geom){if(geom instanceof jsts.geom.Point||geom instanceof jsts.geom.LineString||geom instanceof jsts.geom.Polygon){this.updateLocationInfo(this.locate(p,geom));}else{if(geom instanceof jsts.geom.MultiLineString){var ml=geom;for(var i=0;i<ml.getNumGeometries();i++){var l=ml.getGeometryN(i);this.updateLocationInfo(this.locate(p,l));}}else{if(geom instanceof jsts.geom.MultiPolygon){var _3a6=geom;for(var i=0;i<_3a6.getNumGeometries();i++){var poly=_3a6.getGeometryN(i);this.updateLocationInfo(this.locate(p,poly));}}else{if(geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.GeometryCollection){for(var i=0;i<geom.getNumGeometries();i++){var part=geom.getGeometryN(i);if(part!==geom){this.computeLocation(p,part);}}}}}}};jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(loc){if(loc===jsts.geom.Location.INTERIOR){this.isIn=true;}if(loc===jsts.geom.Location.BOUNDARY){this.numBoundaries++;}};jsts.algorithm.PointLocator.prototype.locate2=function(p,pt){var _3a7=pt.getCoordinate();if(_3a7.equals2D(p)){return jsts.geom.Location.INTERIOR;}return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locate3=function(p,l){if(!l.getEnvelopeInternal().intersects(p)){return jsts.geom.Location.EXTERIOR;}var pt=l.getCoordinates();if(!l.isClosed()){if(p.equals(pt[0])||p.equals(pt[pt.length-1])){return jsts.geom.Location.BOUNDARY;}}if(jsts.algorithm.CGAlgorithms.isOnLine(p,pt)){return jsts.geom.Location.INTERIOR;}return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(p,ring){if(!ring.getEnvelopeInternal().intersects(p)){return jsts.geom.Location.EXTERIOR;}return jsts.algorithm.CGAlgorithms.locatePointInRing(p,ring.getCoordinates());};jsts.algorithm.PointLocator.prototype.locate4=function(p,poly){if(poly.isEmpty()){return jsts.geom.Location.EXTERIOR;}var _3a8=poly.getExteriorRing();var _3a9=this.locateInPolygonRing(p,_3a8);if(_3a9===jsts.geom.Location.EXTERIOR){return jsts.geom.Location.EXTERIOR;}if(_3a9===jsts.geom.Location.BOUNDARY){return jsts.geom.Location.BOUNDARY;}for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i);var _3aa=this.locateInPolygonRing(p,hole);if(_3aa===jsts.geom.Location.INTERIOR){return jsts.geom.Location.EXTERIOR;}if(_3aa===jsts.geom.Location.BOUNDARY){return jsts.geom.Location.BOUNDARY;}}return jsts.geom.Location.INTERIOR;};(function(){var _3ab=jsts.geom.Location;var _3ac=javascript.util.ArrayList;var _3ad=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(_3ae){this.nodeMap=new _3ad();this.nodeFact=_3ae;};jsts.geomgraph.NodeMap.prototype.nodeMap=null;jsts.geomgraph.NodeMap.prototype.nodeFact=null;jsts.geomgraph.NodeMap.prototype.addNode=function(arg){var node,_3af;if(arg instanceof jsts.geom.Coordinate){_3af=arg;node=this.nodeMap.get(_3af);if(node===null){node=this.nodeFact.createNode(_3af);this.nodeMap.put(_3af,node);}return node;}else{if(arg instanceof jsts.geomgraph.Node){var n=arg;_3af=n.getCoordinate();node=this.nodeMap.get(_3af);if(node===null){this.nodeMap.put(_3af,n);return n;}node.mergeLabel(n);return node;}}};jsts.geomgraph.NodeMap.prototype.add=function(e){var p=e.getCoordinate();var n=this.addNode(p);n.add(e);};jsts.geomgraph.NodeMap.prototype.find=function(_3b0){return this.nodeMap.get(_3b0);};jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values();};jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator();};jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(_3b1){var _3b2=new _3ac();for(var i=this.iterator();i.hasNext();){var node=i.next();if(node.getLabel().getLocation(_3b1)===_3ab.BOUNDARY){_3b2.add(node);}}return _3b2;};})();(function(){var _3b3=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(_3b4){this.edges=new _3b3();this.edgeEndList=new _3b3();this.nodes=new jsts.geomgraph.NodeMap(_3b4||new jsts.geomgraph.NodeFactory());};jsts.geomgraph.PlanarGraph.prototype.edges=null;jsts.geomgraph.PlanarGraph.prototype.nodes=null;jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null;jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(_3b5){for(var _3b6=_3b5.iterator();_3b6.hasNext();){var node=_3b6.next();node.getEdges().linkResultDirectedEdges();}};jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator();};jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList;};jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(_3b7,_3b8){var node=this.nodes.find(_3b8);if(node===null){return false;}var _3b9=node.getLabel();if(_3b9!==null&&_3b9.getLocation(_3b7)===jsts.geom.Location.BOUNDARY){return true;}return false;};jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(e){this.edges.add(e);};jsts.geomgraph.PlanarGraph.prototype.add=function(e){this.nodes.add(e);this.edgeEndList.add(e);};jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator();};jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values();};jsts.geomgraph.PlanarGraph.prototype.addNode=function(node){return this.nodes.addNode(node);};jsts.geomgraph.PlanarGraph.prototype.addEdges=function(_3ba){for(var it=_3ba.iterator();it.hasNext();){var e=it.next();this.edges.add(e);var de1=new jsts.geomgraph.DirectedEdge(e,true);var de2=new jsts.geomgraph.DirectedEdge(e,false);de1.setSym(de2);de2.setSym(de1);this.add(de1);this.add(de2);}};jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var _3bb=this.nodes.iterator();_3bb.hasNext();){var node=_3bb.next();node.getEdges().linkResultDirectedEdges();}};jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(p0,p1){var i=0,il=this.edges.size(),e,_3bc;for(i;i<il;i++){e=this.edges.get(i);_3bc=e.getCoordinates();if(this.matchInSameDirection(p0,p1,_3bc[0],_3bc[1])){return e;}if(this.matchInSameDirection(p0,p1,_3bc[_3bc.length-1],_3bc[_3bc.length-2])){return e;}}return null;};jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(p0,p1,ep0,ep1){if(!p0.equals(ep0)){return false;}if(jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,ep1)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(p0,p1)===jsts.geomgraph.Quadrant.quadrant(ep0,ep1)){return true;}return false;};jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(e){for(var i=this.getEdgeEnds().iterator();i.hasNext();){var ee=i.next();if(ee.getEdge()===e){return ee;}}return null;};})();jsts.noding.SegmentIntersector=function(){};jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc;jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc;(function(){var _3bd=jsts.noding.SegmentIntersector;var _3be=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(li){this.li=li;this.intersections=new _3be();this.interiorIntersection=null;};jsts.noding.InteriorIntersectionFinder.prototype=new _3bd();jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder;jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=false;jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=false;jsts.noding.InteriorIntersectionFinder.prototype.li=null;jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null;jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null;jsts.noding.InteriorIntersectionFinder.prototype.intersections=null;jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(_3bf){this.findAllIntersections=_3bf;};jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections;};jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(_3c0){this.isCheckEndSegmentsOnly=_3c0;};jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return this.interiorIntersection!=null;};jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection;};jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments;};jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(e0,_3c1,e1,_3c2){if(this.hasIntersection()){return;}if(e0==e1&&_3c1==_3c2){return;}if(this.isCheckEndSegmentsOnly){var _3c3=this.isEndSegment(e0,_3c1)||isEndSegment(e1,_3c2);if(!_3c3){return;}}var p00=e0.getCoordinates()[_3c1];var p01=e0.getCoordinates()[_3c1+1];var p10=e1.getCoordinates()[_3c2];var p11=e1.getCoordinates()[_3c2+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){this.intSegments=[];this.intSegments[0]=p00;this.intSegments[1]=p01;this.intSegments[2]=p10;this.intSegments[3]=p11;this.interiorIntersection=this.li.getIntersection(0);this.intersections.add(this.interiorIntersection);}}};jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(_3c4,_3c5){if(_3c5==0){return true;}if(_3c5>=_3c4.size()-2){return true;}return false;};jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){if(this.findAllIntersections){return false;}return this.interiorIntersection!=null;};})();(function(){var _3c6=jsts.algorithm.RobustLineIntersector;var _3c7=jsts.noding.InteriorIntersectionFinder;var _3c8=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(_3c9){this.li=new _3c6();this.segStrings=_3c9;};jsts.noding.FastNodingValidator.prototype.li=null;jsts.noding.FastNodingValidator.prototype.segStrings=null;jsts.noding.FastNodingValidator.prototype.findAllIntersections=false;jsts.noding.FastNodingValidator.prototype.segInt=null;jsts.noding.FastNodingValidator.prototype._isValid=true;jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(_3ca){this.findAllIntersections=_3ca;};jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections();};jsts.noding.FastNodingValidator.prototype.isValid=function(){this.execute();return this._isValid;};jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid){return "no intersections found";}var _3cb=this.segInt.getIntersectionSegments();return "found non-noded intersection between "+jsts.io.WKTWriter.toLineString(_3cb[0],_3cb[1])+" and "+jsts.io.WKTWriter.toLineString(_3cb[2],_3cb[3]);};jsts.noding.FastNodingValidator.prototype.checkValid=function(){this.execute();if(!this._isValid){throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection());}};jsts.noding.FastNodingValidator.prototype.execute=function(){if(this.segInt!=null){return;}this.checkInteriorIntersections();};jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=true;this.segInt=new _3c7(this.li);this.segInt.setFindAllIntersections(this.findAllIntersections);var _3cc=new _3c8();_3cc.setSegmentIntersector(this.segInt);_3cc.computeNodes(this.segStrings);if(this.segInt.hasIntersection()){this._isValid=false;return;}};})();(function(){jsts.noding.BasicSegmentString=function(pts,data){this.pts=pts;this.data=data;};jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.BasicSegmentString.prototype.pts=null;jsts.noding.BasicSegmentString.prototype.data=null;jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data;};jsts.noding.BasicSegmentString.prototype.setData=function(data){this.data=data;};jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length;};jsts.noding.BasicSegmentString.prototype.getCoordinate=function(i){return this.pts[i];};jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts;};jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(_3cd){if(_3cd==this.pts.length-1){return -1;}return jsts.noding.Octant.octant(this.getCoordinate(_3cd),this.getCoordinate(_3cd+1));};})();(function(){var _3ce=jsts.noding.FastNodingValidator;var _3cf=jsts.noding.BasicSegmentString;var _3d0=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(_3d1){this.nv=new _3ce(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(_3d1));};jsts.geomgraph.EdgeNodingValidator.checkValid=function(_3d2){var _3d3=new jsts.geomgraph.EdgeNodingValidator(_3d2);_3d3.checkValid();};jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(_3d4){var _3d5=new _3d0();for(var i=_3d4.iterator();i.hasNext();){var e=i.next();_3d5.add(new _3cf(e.getCoordinates(),e));}return _3d5;};jsts.geomgraph.EdgeNodingValidator.prototype.nv=null;jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid();};})();jsts.operation.GeometryGraphOperation=function(g0,g1,_3d6){this.li=new jsts.algorithm.RobustLineIntersector();this.arg=[];if(g0===undefined){return;}if(g1===undefined){this.setComputationPrecision(g0.getPrecisionModel());this.arg[0]=new jsts.geomgraph.GeometryGraph(0,g0);return;}_3d6=_3d6||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(g0.getPrecisionModel().compareTo(g1.getPrecisionModel())>=0){this.setComputationPrecision(g0.getPrecisionModel());}else{this.setComputationPrecision(g1.getPrecisionModel());}this.arg[0]=new jsts.geomgraph.GeometryGraph(0,g0,_3d6);this.arg[1]=new jsts.geomgraph.GeometryGraph(1,g1,_3d6);};jsts.operation.GeometryGraphOperation.prototype.li=null;jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null;jsts.operation.GeometryGraphOperation.prototype.arg=null;jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(i){return arg[i].getGeometry();};jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(pm){this.resultPrecisionModel=pm;this.li.setPrecisionModel(this.resultPrecisionModel);};jsts.operation.overlay.OverlayNodeFactory=function(){};jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory;jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(_3d7){return new jsts.geomgraph.Node(_3d7,new jsts.geomgraph.DirectedEdgeStar());};jsts.operation.overlay.PolygonBuilder=function(_3d8){this.shellList=[];this.geometryFactory=_3d8;};jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null;jsts.operation.overlay.PolygonBuilder.prototype.shellList=null;jsts.operation.overlay.PolygonBuilder.prototype.add=function(_3d9){if(arguments.length===2){this.add2.apply(this,arguments);return;}this.add2(_3d9.getEdgeEnds(),_3d9.getNodes());};jsts.operation.overlay.PolygonBuilder.prototype.add2=function(_3da,_3db){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(_3db);var _3dc=this.buildMaximalEdgeRings(_3da);var _3dd=[];var _3de=this.buildMinimalEdgeRings(_3dc,this.shellList,_3dd);this.sortShellsAndHoles(_3de,this.shellList,_3dd);this.placeFreeHoles(this.shellList,_3dd);};jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var _3df=this.computePolygons(this.shellList);return _3df;};jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(_3e0){var _3e1=[];for(var it=_3e0.iterator();it.hasNext();){var de=it.next();if(de.isInResult()&&de.getLabel().isArea()){if(de.getEdgeRing()==null){var er=new jsts.operation.overlay.MaximalEdgeRing(de,this.geometryFactory);_3e1.push(er);er.setInResult();}}}return _3e1;};jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(_3e2,_3e3,_3e4){var _3e5=[];for(var i=0;i<_3e2.length;i++){var er=_3e2[i];if(er.getMaxNodeDegree()>2){er.linkDirectedEdgesForMinimalEdgeRings();var _3e6=er.buildMinimalRings();var _3e7=this.findShell(_3e6);if(_3e7!==null){this.placePolygonHoles(_3e7,_3e6);_3e3.push(_3e7);}else{_3e6.forEach(function(ring){_3e4.push(ring);});}}else{_3e5.push(er);}}return _3e5;};jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(_3e8){var _3e9=0;var _3ea=null;for(var i=0;i<_3e8.length;i++){var er=_3e8[i];if(!er.isHole()){_3ea=er;_3e9++;}}jsts.util.Assert.isTrue(_3e9<=1,"found two shells in MinimalEdgeRing list");return _3ea;};jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(_3eb,_3ec){for(var i=0;i<_3ec.length;i++){var er=_3ec[i];if(er.isHole()){er.setShell(_3eb);}}};jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(_3ed,_3ee,_3ef){for(var i=0;i<_3ed.length;i++){var er=_3ed[i];if(er.isHole()){_3ef.push(er);}else{_3ee.push(er);}}};jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(_3f0,_3f1){for(var i=0;i<_3f1.length;i++){var hole=_3f1[i];if(hole.getShell()==null){var _3f2=this.findEdgeRingContaining(hole,_3f0);if(_3f2===null){throw new jsts.error.TopologyError("unable to assign hole to a shell",hole.getCoordinate(0));}hole.setShell(_3f2);}}};jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(_3f3,_3f4){var _3f5=_3f3.getLinearRing();var _3f6=_3f5.getEnvelopeInternal();var _3f7=_3f5.getCoordinateN(0);var _3f8=null;var _3f9=null;for(var i=0;i<_3f4.length;i++){var _3fa=_3f4[i];var _3fb=_3fa.getLinearRing();var _3fc=_3fb.getEnvelopeInternal();if(_3f8!==null){_3f9=_3f8.getLinearRing().getEnvelopeInternal();}var _3fd=false;if(_3fc.contains(_3f6)&&jsts.algorithm.CGAlgorithms.isPointInRing(_3f7,_3fb.getCoordinates())){_3fd=true;}if(_3fd){if(_3f8==null||_3f9.contains(_3fc)){_3f8=_3fa;}}}return _3f8;};jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(_3fe){var _3ff=new javascript.util.ArrayList();for(var i=0;i<_3fe.length;i++){var er=_3fe[i];var poly=er.toPolygon(this.geometryFactory);_3ff.add(poly);}return _3ff;};jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(p){for(var i=0;i<this.shellList.length;i++){var er=this.shellList[i];if(er.containsPoint(p)){return true;}}return false;};(function(){var _400=jsts.util.Assert;var _401=javascript.util.ArrayList;var _402=function(op,_403,_404){this.lineEdgesList=new _401();this.resultLineList=new _401();this.op=op;this.geometryFactory=_403;this.ptLocator=_404;};_402.prototype.op=null;_402.prototype.geometryFactory=null;_402.prototype.ptLocator=null;_402.prototype.lineEdgesList=null;_402.prototype.resultLineList=null;_402.prototype.build=function(_405){this.findCoveredLineEdges();this.collectLines(_405);this.buildLines(_405);return this.resultLineList;};_402.prototype.findCoveredLineEdges=function(){for(var _406=this.op.getGraph().getNodes().iterator();_406.hasNext();){var node=_406.next();node.getEdges().findCoveredLineEdges();}for(var it=this.op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next();var e=de.getEdge();if(de.isLineEdge()&&!e.isCoveredSet()){var _407=this.op.isCoveredByA(de.getCoordinate());e.setCovered(_407);}}};_402.prototype.collectLines=function(_408){for(var it=this.op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next();this.collectLineEdge(de,_408,this.lineEdgesList);this.collectBoundaryTouchEdge(de,_408,this.lineEdgesList);}};_402.prototype.collectLineEdge=function(de,_409,_40a){var _40b=de.getLabel();var e=de.getEdge();if(de.isLineEdge()){if(!de.isVisited()&&jsts.operation.overlay.OverlayOp.isResultOfOp(_40b,_409)&&!e.isCovered()){_40a.add(e);de.setVisitedEdge(true);}}};_402.prototype.collectBoundaryTouchEdge=function(de,_40c,_40d){var _40e=de.getLabel();if(de.isLineEdge()){return;}if(de.isVisited()){return;}if(de.isInteriorAreaEdge()){return;}if(de.getEdge().isInResult()){return;}_400.isTrue(!(de.isInResult()||de.getSym().isInResult())||!de.getEdge().isInResult());if(jsts.operation.overlay.OverlayOp.isResultOfOp(_40e,_40c)&&_40c===jsts.operation.overlay.OverlayOp.INTERSECTION){_40d.add(de.getEdge());de.setVisitedEdge(true);}};_402.prototype.buildLines=function(_40f){for(var it=this.lineEdgesList.iterator();it.hasNext();){var e=it.next();var _410=e.getLabel();var line=this.geometryFactory.createLineString(e.getCoordinates());this.resultLineList.add(line);e.setInResult(true);}};_402.prototype.labelIsolatedLines=function(_411){for(var it=_411.iterator();it.hasNext();){var e=it.next();var _412=e.getLabel();if(e.isIsolated()){if(_412.isNull(0)){this.labelIsolatedLine(e,0);}else{this.labelIsolatedLine(e,1);}}}};_402.prototype.labelIsolatedLine=function(e,_413){var loc=ptLocator.locate(e.getCoordinate(),op.getArgGeometry(_413));e.getLabel().setLocation(_413,loc);};jsts.operation.overlay.LineBuilder=_402;})();(function(){var _414=javascript.util.ArrayList;var _415=function(op,_416,_417){this.resultPointList=new _414();this.op=op;this.geometryFactory=_416;};_415.prototype.op=null;_415.prototype.geometryFactory=null;_415.prototype.resultPointList=null;_415.prototype.build=function(_418){this.extractNonCoveredResultNodes(_418);return this.resultPointList;};_415.prototype.extractNonCoveredResultNodes=function(_419){for(var _41a=this.op.getGraph().getNodes().iterator();_41a.hasNext();){var n=_41a.next();if(n.isInResult()){continue;}if(n.isIncidentEdgeInResult()){continue;}if(n.getEdges().getDegree()===0||_419===jsts.operation.overlay.OverlayOp.INTERSECTION){var _41b=n.getLabel();if(jsts.operation.overlay.OverlayOp.isResultOfOp(_41b,_419)){this.filterCoveredNodeToPoint(n);}}}};_415.prototype.filterCoveredNodeToPoint=function(n){var _41c=n.getCoordinate();if(!this.op.isCoveredByLA(_41c)){var pt=this.geometryFactory.createPoint(_41c);this.resultPointList.add(pt);}};jsts.operation.overlay.PointBuilder=_415;})();(function(){var _41d=jsts.algorithm.PointLocator;var _41e=jsts.geom.Location;var _41f=jsts.geomgraph.EdgeList;var _420=jsts.geomgraph.Label;var _421=jsts.geomgraph.PlanarGraph;var _422=jsts.geomgraph.Position;var _423=jsts.geomgraph.EdgeNodingValidator;var _424=jsts.operation.GeometryGraphOperation;var _425=jsts.operation.overlay.OverlayNodeFactory;var _426=jsts.operation.overlay.PolygonBuilder;var _427=jsts.operation.overlay.LineBuilder;var _428=jsts.operation.overlay.PointBuilder;var _429=jsts.util.Assert;var _42a=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(g0,g1){this.ptLocator=new _41d();this.edgeList=new _41f();this.resultPolyList=new _42a();this.resultLineList=new _42a();this.resultPointList=new _42a();_424.call(this,g0,g1);this.graph=new _421(new _425());this.geomFact=g0.getFactory();};jsts.operation.overlay.OverlayOp.prototype=new _424();jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp;jsts.operation.overlay.OverlayOp.INTERSECTION=1;jsts.operation.overlay.OverlayOp.UNION=2;jsts.operation.overlay.OverlayOp.DIFFERENCE=3;jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4;jsts.operation.overlay.OverlayOp.overlayOp=function(_42b,_42c,_42d){var gov=new jsts.operation.overlay.OverlayOp(_42b,_42c);var _42e=gov.getResultGeometry(_42d);return _42e;};jsts.operation.overlay.OverlayOp.isResultOfOp=function(_42f,_430){if(arguments.length===3){return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);}var loc0=_42f.getLocation(0);var loc1=_42f.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(loc0,loc1,_430);};jsts.operation.overlay.OverlayOp.isResultOfOp2=function(loc0,loc1,_431){if(loc0==_41e.BOUNDARY){loc0=_41e.INTERIOR;}if(loc1==_41e.BOUNDARY){loc1=_41e.INTERIOR;}switch(_431){case jsts.operation.overlay.OverlayOp.INTERSECTION:return loc0==_41e.INTERIOR&&loc1==_41e.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return loc0==_41e.INTERIOR||loc1==_41e.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return loc0==_41e.INTERIOR&&loc1!=_41e.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return (loc0==_41e.INTERIOR&&loc1!=_41e.INTERIOR)||(loc0!=_41e.INTERIOR&&loc1==_41e.INTERIOR);}return false;};jsts.operation.overlay.OverlayOp.prototype.ptLocator=null;jsts.operation.overlay.OverlayOp.prototype.geomFact=null;jsts.operation.overlay.OverlayOp.prototype.resultGeom=null;jsts.operation.overlay.OverlayOp.prototype.graph=null;jsts.operation.overlay.OverlayOp.prototype.edgeList=null;jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null;jsts.operation.overlay.OverlayOp.prototype.resultLineList=null;jsts.operation.overlay.OverlayOp.prototype.resultPointList=null;jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(_432){this.computeOverlay(_432);return this.resultGeom;};jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph;};jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(_433){this.copyPoints(0);this.copyPoints(1);this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);this.arg[0].computeEdgeIntersections(this.arg[1],this.li,true);var _434=new _42a();this.arg[0].computeSplitEdges(_434);this.arg[1].computeSplitEdges(_434);var _435=_434;this.insertUniqueEdges(_434);this.computeLabelsFromDepths();this.replaceCollapsedEdges();_423.checkValid(this.edgeList.getEdges());this.graph.addEdges(this.edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(_433);this.cancelDuplicateResultEdges();var _436=new _426(this.geomFact);_436.add(this.graph);this.resultPolyList=_436.getPolygons();var _437=new _427(this,this.geomFact,this.ptLocator);this.resultLineList=_437.build(_433);var _438=new _428(this,this.geomFact,this.ptLocator);this.resultPointList=_438.build(_433);this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,_433);};jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(_439){for(var i=_439.iterator();i.hasNext();){var e=i.next();this.insertUniqueEdge(e);}};jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(e){var _43a=this.edgeList.findEqualEdge(e);if(_43a!==null){var _43b=_43a.getLabel();var _43c=e.getLabel();if(!_43a.isPointwiseEqual(e)){_43c=new _420(e.getLabel());_43c.flip();}var _43d=_43a.getDepth();if(_43d.isNull()){_43d.add(_43b);}_43d.add(_43c);_43b.merge(_43c);}else{this.edgeList.add(e);}};jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var it=this.edgeList.iterator();it.hasNext();){var e=it.next();var lbl=e.getLabel();var _43e=e.getDepth();if(!_43e.isNull()){_43e.normalize();for(var i=0;i<2;i++){if(!lbl.isNull(i)&&lbl.isArea()&&!_43e.isNull(i)){if(_43e.getDelta(i)==0){lbl.toLine(i);}else{_429.isTrue(!_43e.isNull(i,_422.LEFT),"depth of LEFT side has not been initialized");lbl.setLocation(i,_422.LEFT,_43e.getLocation(i,_422.LEFT));_429.isTrue(!_43e.isNull(i,_422.RIGHT),"depth of RIGHT side has not been initialized");lbl.setLocation(i,_422.RIGHT,_43e.getLocation(i,_422.RIGHT));}}}}}};jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){var _43f=new _42a();for(var it=this.edgeList.iterator();it.hasNext();){var e=it.next();if(e.isCollapsed()){it.remove();_43f.add(e.getCollapsedEdge());}}this.edgeList.addAll(_43f);};jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(_440){for(var i=this.arg[_440].getNodeIterator();i.hasNext();){var _441=i.next();var _442=this.graph.addNode(_441.getCoordinate());_442.setLabel(_440,_441.getLabel().getLocation(_440));}};jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var _443=this.graph.getNodes().iterator();_443.hasNext();){var node=_443.next();node.getEdges().computeLabelling(this.arg);}this.mergeSymLabels();this.updateNodeLabelling();};jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var _444=this.graph.getNodes().iterator();_444.hasNext();){var node=_444.next();node.getEdges().mergeSymLabels();}};jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var _445=this.graph.getNodes().iterator();_445.hasNext();){var node=_445.next();var lbl=node.getEdges().getLabel();node.getLabel().merge(lbl);}};jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){var _446=0;for(var ni=this.graph.getNodes().iterator();ni.hasNext();){var n=ni.next();var _447=n.getLabel();if(n.isIsolated()){_446++;if(_447.isNull(0)){this.labelIncompleteNode(n,0);}else{this.labelIncompleteNode(n,1);}}n.getEdges().updateLabelling(_447);}};jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(n,_448){var loc=this.ptLocator.locate(n.getCoordinate(),this.arg[_448].getGeometry());n.getLabel().setLocation(_448,loc);};jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(_449){for(var it=this.graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next();var _44a=de.getLabel();if(_44a.isArea()&&!de.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(_44a.getLocation(0,_422.RIGHT),_44a.getLocation(1,_422.RIGHT),_449)){de.setInResult(true);}}};jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var it=this.graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next();var sym=de.getSym();if(de.isInResult()&&sym.isInResult()){de.setInResult(false);sym.setInResult(false);}}};jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(_44b){if(this.isCovered(_44b,this.resultLineList)){return true;}if(this.isCovered(_44b,this.resultPolyList)){return true;}return false;};jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(_44c){if(this.isCovered(_44c,this.resultPolyList)){return true;}return false;};jsts.operation.overlay.OverlayOp.prototype.isCovered=function(_44d,_44e){for(var it=_44e.iterator();it.hasNext();){var geom=it.next();var loc=this.ptLocator.locate(_44d,geom);if(loc!=_41e.EXTERIOR){return true;}}return false;};jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(_44f,_450,_451,_452){var _453=new _42a();_453.addAll(_44f);_453.addAll(_450);_453.addAll(_451);return this.geomFact.buildGeometry(_453);};jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(_454){var _455=null;switch(resultDimension(_454,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case -1:_455=geomFact.createGeometryCollection();break;case 0:_455=geomFact.createPoint(null);break;case 1:_455=geomFact.createLineString(null);break;case 2:_455=geomFact.createPolygon(null,null);break;}return _455;};jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(_456,g0,g1){var dim0=g0.getDimension();var dim1=g1.getDimension();var _457=-1;switch(_456){case jsts.operation.overlay.OverlayOp.INTERSECTION:_457=Math.min(dim0,dim1);break;case jsts.operation.overlay.OverlayOp.UNION:_457=Math.max(dim0,dim1);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:_457=dim0;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:_457=Math.max(dim0,dim1);break;}return _457;};})();(function(){var _458=jsts.operation.overlay.OverlayOp;var _459=jsts.operation.overlay.snap.GeometrySnapper;var _45a=function(g1,g2){this.geom=[];this.geom[0]=g1;this.geom[1]=g2;this.computeSnapTolerance();};_45a.overlayOp=function(g0,g1,_45b){var op=new _45a(g0,g1);return op.getResultGeometry(_45b);};_45a.intersection=function(g0,g1){return this.overlayOp(g0,g1,_458.INTERSECTION);};_45a.union=function(g0,g1){return this.overlayOp(g0,g1,_458.UNION);};_45a.difference=function(g0,g1){return overlayOp(g0,g1,_458.DIFFERENCE);};_45a.symDifference=function(g0,g1){return overlayOp(g0,g1,_458.SYMDIFFERENCE);};_45a.prototype.geom=null;_45a.prototype.snapTolerance=null;_45a.prototype.computeSnapTolerance=function(){this.snapTolerance=_459.computeOverlaySnapTolerance(this.geom[0],this.geom[1]);};_45a.prototype.getResultGeometry=function(_45c){var _45d=this.snap(this.geom);var _45e=_458.overlayOp(_45d[0],_45d[1],_45c);return this.prepareResult(_45e);};_45a.prototype.selfSnap=function(geom){var _45f=new _459(geom);var _460=_45f.snapTo(geom,this.snapTolerance);return _460;};_45a.prototype.snap=function(geom){var _461=geom;var _462=_459.snap(_461[0],_461[1],this.snapTolerance);return _462;};_45a.prototype.prepareResult=function(geom){return geom;};_45a.prototype.cbr=null;_45a.prototype.removeCommonBits=function(geom){this.cbr=new jsts.precision.CommonBitsRemover();this.cbr.add(this.geom[0]);this.cbr.add(this.geom[1]);var _463=[];_463[0]=cbr.removeCommonBits(this.geom[0].clone());_463[1]=cbr.removeCommonBits(this.geom[1].clone());return _463;};jsts.operation.overlay.snap.SnapOverlayOp=_45a;})();jsts.geomgraph.index.EdgeSetIntersector=function(){};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(_464,si,_465){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(_466,_467,si){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){this.events=[];};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.events=null;jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.nOverlaps=0;jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections=function(_468,si,_469){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}if(_469){this.addList2(_468,null);}else{this.addList(_468);}this.computeIntersections3(si);};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections2=function(_46a,_46b,si){this.addList2(_46a,_46a);this.addList2(_46b,_46b);this.computeIntersections3(si);};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.add=function(edge,_46c){if(edge instanceof javascript.util.List){this.addList.apply(this,arguments);return;}var mce=edge.getMonotoneChainEdge();var _46d=mce.getStartIndexes();for(var i=0;i<_46d.length-1;i++){var mc=new jsts.geomgraph.index.MonotoneChain(mce,i);var _46e=new jsts.geomgraph.index.SweepLineEvent(mce.getMinX(i),mc,_46c);this.events.push(_46e);this.events.push(new jsts.geomgraph.index.SweepLineEvent(mce.getMaxX(i),_46e));}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList=function(_46f){for(var i=_46f.iterator();i.hasNext();){var edge=i.next();this.add(edge,edge);}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList2=function(_470,_471){for(var i=_470.iterator();i.hasNext();){var edge=i.next();this.add(edge,_471);}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(a,b){return a.compareTo(b);});for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isDelete()){ev.getInsertEvent().setDeleteEventIndex(i);}}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections3=function(si){this.nOverlaps=0;this.prepareEvents();for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isInsert()){this.processOverlaps(i,ev.getDeleteEventIndex(),ev,si);}}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.processOverlaps=function(_472,end,ev0,si){var mc0=ev0.getObject();for(var i=_472;i<end;i++){var ev1=this.events[i];if(ev1.isInsert()){var mc1=ev1.getObject();if(!ev0.isSameLabel(ev1)){mc0.computeIntersections(mc1,si);this.nOverlaps++;}}}};jsts.algorithm.locate.SimplePointInAreaLocator=function(geom){this.geom=geom;};jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(p,geom){if(geom.isEmpty()){return jsts.geom.Location.EXTERIOR;}if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(p,geom)){return jsts.geom.Location.INTERIOR;}return jsts.geom.Location.EXTERIOR;};jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(p,geom){if(geom instanceof jsts.geom.Polygon){return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(p,geom);}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){for(var i=0;i<geom.geometries.length;i++){var g2=geom.geometries[i];if(g2!==geom){if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(p,g2)){return true;}}}}}return false;};jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(p,poly){if(poly.isEmpty()){return false;}var _473=poly.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(p,_473)){return false;}for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(p,hole)){return false;}}return true;};jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(p,ring){if(!ring.getEnvelopeInternal().intersects(p)){return false;}return jsts.algorithm.CGAlgorithms.isPointInRing(p,ring.getCoordinates());};jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null;jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(p){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(p,geom);};(function(){var _474=jsts.geom.Location;var _475=jsts.geomgraph.Position;var _476=jsts.geomgraph.EdgeEndStar;var _477=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this);};jsts.geomgraph.DirectedEdgeStar.prototype=new _476();jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar;jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null;jsts.geomgraph.DirectedEdgeStar.prototype.label=null;jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(ee){var de=ee;this.insertEdgeEnd(de,de);};jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label;};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){var _478=0;for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.isInResult()){_478++;}}return _478;};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(er){var _479=0;for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.getEdgeRing()===er){_479++;}}return _479;};jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var _47a=this.getEdges();var size=_47a.size();if(size<1){return null;}var de0=_47a.get(0);if(size==1){return de0;}var _47b=_47a.get(size-1);var _47c=de0.getQuadrant();var _47d=_47b.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(_47c)&&jsts.geomgraph.Quadrant.isNorthern(_47d)){return de0;}else{if(!jsts.geomgraph.Quadrant.isNorthern(_47c)&&!jsts.geomgraph.Quadrant.isNorthern(_47d)){return _47b;}else{var _47e=null;if(de0.getDy()!=0){return de0;}else{if(_47b.getDy()!=0){return _47b;}}}}_477.shouldNeverReachHere("found two horizontal edges incident on node");return null;};jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(geom){_476.prototype.computeLabelling.call(this,geom);this.label=new jsts.geomgraph.Label(_474.NONE);for(var it=this.iterator();it.hasNext();){var ee=it.next();var e=ee.getEdge();var _47f=e.getLabel();for(var i=0;i<2;i++){var eLoc=_47f.getLocation(i);if(eLoc===_474.INTERIOR||eLoc===_474.BOUNDARY){this.label.setLocation(i,_474.INTERIOR);}}}};jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var it=this.iterator();it.hasNext();){var de=it.next();var _480=de.getLabel();_480.merge(de.getSym().getLabel());}};jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(_481){for(var it=this.iterator();it.hasNext();){var de=it.next();var _482=de.getLabel();_482.setAllLocationsIfNull(0,_481.getLocation(0));_482.setAllLocationsIfNull(1,_481.getLocation(1));}};jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(this.resultAreaEdgeList!==null){return this.resultAreaEdgeList;}this.resultAreaEdgeList=new javascript.util.ArrayList();for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.isInResult()||de.getSym().isInResult()){this.resultAreaEdgeList.add(de);}}return this.resultAreaEdgeList;};jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1;jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2;jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();var _483=null;var _484=null;var _485=this.SCANNING_FOR_INCOMING;for(var i=0;i<this.resultAreaEdgeList.size();i++){var _486=this.resultAreaEdgeList.get(i);var _487=_486.getSym();if(!_486.getLabel().isArea()){continue;}if(_483===null&&_486.isInResult()){_483=_486;}switch(_485){case this.SCANNING_FOR_INCOMING:if(!_487.isInResult()){continue;}_484=_487;_485=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!_486.isInResult()){continue;}_484.setNext(_486);_485=this.SCANNING_FOR_INCOMING;break;}}if(_485===this.LINKING_TO_OUTGOING){if(_483===null){throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());}_477.isTrue(_483.isInResult(),"unable to link last incoming dirEdge");_484.setNext(_483);}};jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(er){var _488=null;var _489=null;var _48a=this.SCANNING_FOR_INCOMING;for(var i=this.resultAreaEdgeList.size()-1;i>=0;i--){var _48b=this.resultAreaEdgeList.get(i);var _48c=_48b.getSym();if(_488===null&&_48b.getEdgeRing()===er){_488=_48b;}switch(_48a){case this.SCANNING_FOR_INCOMING:if(_48c.getEdgeRing()!=er){continue;}_489=_48c;_48a=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(_48b.getEdgeRing()!==er){continue;}_489.setNextMin(_48b);_48a=this.SCANNING_FOR_INCOMING;break;}}if(_48a===this.LINKING_TO_OUTGOING){_477.isTrue(_488!==null,"found null for first outgoing dirEdge");_477.isTrue(_488.getEdgeRing()===er,"unable to link last incoming dirEdge");_489.setNextMin(_488);}};jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();var _48d=null;var _48e=null;for(var i=this.edgeList.size()-1;i>=0;i--){var _48f=this.edgeList.get(i);var _490=_48f.getSym();if(_48e===null){_48e=_490;}if(_48d!==null){_490.setNext(_48d);}_48d=_48f;}_48e.setNext(_48d);};jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){var _491=_474.NONE;for(var it=this.iterator();it.hasNext();){var _492=it.next();var _493=_492.getSym();if(!_492.isLineEdge()){if(_492.isInResult()){_491=_474.INTERIOR;break;}if(_493.isInResult()){_491=_474.EXTERIOR;break;}}}if(_491===_474.NONE){return;}var _494=_491;for(var it=this.iterator();it.hasNext();){var _492=it.next();var _493=_492.getSym();if(_492.isLineEdge()){_492.getEdge().setCovered(_494===_474.INTERIOR);}else{if(_492.isInResult()){_494=_474.EXTERIOR;}if(_493.isInResult()){_494=_474.INTERIOR;}}}};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(de){if(arguments.length===2){this.computeDepths2.apply(this,arguments);return;}var _495=this.findIndex(de);var _496=de.getLabel();var _497=de.getDepth(_475.LEFT);var _498=de.getDepth(_475.RIGHT);var _499=this.computeDepths2(_495+1,this.edgeList.size(),_497);var _49a=this.computeDepths2(0,_495,_499);if(_49a!=_498){throw new jsts.error.TopologyError("depth mismatch at "+de.getCoordinate());}};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(_49b,_49c,_49d){var _49e=_49d;for(var i=_49b;i<_49c;i++){var _49f=this.edgeList.get(i);var _4a0=_49f.getLabel();_49f.setEdgeDepths(_475.RIGHT,_49e);_49e=_49f.getDepth(_475.LEFT);}return _49e;};})();jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate();};jsts.algorithm.CentroidLine.prototype.centSum=null;jsts.algorithm.CentroidLine.prototype.totalLength=0;jsts.algorithm.CentroidLine.prototype.add=function(geom){if(geom instanceof Array){this.add2.apply(this,arguments);return;}if(geom instanceof jsts.geom.LineString){this.add(geom.getCoordinates());}else{if(geom instanceof jsts.geom.Polygon){var poly=geom;this.add(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.add(poly.getInteriorRingN(i).getCoordinates());}}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}}}};jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();cent.x=this.centSum.x/this.totalLength;cent.y=this.centSum.y/this.totalLength;return cent;};jsts.algorithm.CentroidLine.prototype.add2=function(pts){for(var i=0;i<pts.length-1;i++){var _4a1=pts[i].distance(pts[i+1]);this.totalLength+=_4a1;var midx=(pts[i].x+pts[i+1].x)/2;this.centSum.x+=_4a1*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.centSum.y+=_4a1*midy;}};jsts.index.IntervalSize=function(){};jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50;jsts.index.IntervalSize.isZeroWidth=function(min,max){var _4a2=max-min;if(_4a2===0){return true;}var _4a3,_4a4,_4a5;_4a3=Math.max(Math.abs(min),Math.abs(max));_4a4=_4a2/_4a3;_4a5=jsts.index.DoubleBits.exponent(_4a4);return _4a5<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT;};jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0;jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(_4a6,si,_4a7){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}this.nOverlaps=0;for(var i0=_4a6.iterator();i0.hasNext();){var _4a8=i0.next();for(var i1=_4a6.iterator();i1.hasNext();){var _4a9=i1.next();if(_4a7||_4a8!=_4a9){this.computeIntersects(_4a8,_4a9,si);}}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(_4aa,_4ab,si){this.nOverlaps=0;for(var i0=_4aa.iterator();i0.hasNext();){var _4ac=i0.next();for(var i1=_4ab.iterator();i1.hasNext();){var _4ad=i1.next();this.computeIntersects(_4ac,_4ad,si);}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(e0,e1,si){var pts0=e0.getCoordinates();var pts1=e1.getCoordinates();var i0,i1;for(i0=0;i0<pts0.length-1;i0++){for(i1=0;i1<pts1.length-1;i1++){si.addIntersections(e0,i0,e1,i1);}}};jsts.geomgraph.Edge=function(pts,_4ae){this.pts=pts;this.label=_4ae;this.eiList=new jsts.geomgraph.EdgeIntersectionList(this);this.depth=new jsts.geomgraph.Depth();};jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge;jsts.geomgraph.Edge.updateIM=function(_4af,im){im.setAtLeastIfValid(_4af.getLocation(0,jsts.geomgraph.Position.ON),_4af.getLocation(1,jsts.geomgraph.Position.ON),1);if(_4af.isArea()){im.setAtLeastIfValid(_4af.getLocation(0,jsts.geomgraph.Position.LEFT),_4af.getLocation(1,jsts.geomgraph.Position.LEFT),2);im.setAtLeastIfValid(_4af.getLocation(0,jsts.geomgraph.Position.RIGHT),_4af.getLocation(1,jsts.geomgraph.Position.RIGHT),2);}};jsts.geomgraph.Edge.prototype.pts=null;jsts.geomgraph.Edge.prototype.env=null;jsts.geomgraph.Edge.prototype.name=null;jsts.geomgraph.Edge.prototype.mce=null;jsts.geomgraph.Edge.prototype._isIsolated=true;jsts.geomgraph.Edge.prototype.depth=null;jsts.geomgraph.Edge.prototype.depthDelta=0;jsts.geomgraph.Edge.prototype.eiList=null;jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length;};jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(this.env===null){this.env=new jsts.geom.Envelope();for(var i=0;i<this.pts.length;i++){this.env.expandToInclude(pts[i]);}}return env;};jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth;};jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta;};jsts.geomgraph.Edge.prototype.setDepthDelta=function(_4b0){this.depthDelta=_4b0;};jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts;};jsts.geomgraph.Edge.prototype.getCoordinate=function(i){if(i===undefined){if(this.pts.length>0){return this.pts[0];}else{return null;}}return this.pts[i];};jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.geomgraph.Edge.prototype.setIsolated=function(_4b1){this._isIsolated=_4b1;};jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated;};jsts.geomgraph.Edge.prototype.addIntersections=function(li,_4b2,_4b3){for(var i=0;i<li.getIntersectionNum();i++){this.addIntersection(li,_4b2,_4b3,i);}};jsts.geomgraph.Edge.prototype.addIntersection=function(li,_4b4,_4b5,_4b6){var _4b7=new jsts.geom.Coordinate(li.getIntersection(_4b6));var _4b8=_4b4;var dist=li.getEdgeDistance(_4b5,_4b6);var _4b9=_4b8+1;if(_4b9<this.pts.length){var _4ba=this.pts[_4b9];if(_4b7.equals2D(_4ba)){_4b8=_4b9;dist=0;}}var ei=this.eiList.add(_4b7,_4b8,dist);};jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1;};jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList;};jsts.geomgraph.Edge.prototype.getMonotoneChainEdge=function(){if(this.mce==null){this.mce=new jsts.geomgraph.index.MonotoneChainEdge(this);}return this.mce;};jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.geomgraph.Edge.prototype.isCollapsed=function(){if(!this.label.isArea()){return false;}if(this.pts.length!=3){return false;}if(this.pts[0].equals(this.pts[2])){return true;}return false;};jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var _4bb=[];_4bb[0]=this.pts[0];_4bb[1]=this.pts[1];var newe=new jsts.geomgraph.Edge(_4bb,jsts.geomgraph.Label.toLineLabel(this.label));return newe;};jsts.geomgraph.Edge.prototype.computeIM=function(im){jsts.geomgraph.Edge.updateIM(this.label,im);};jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(e){if(this.pts.length!=e.pts.length){return false;}for(var i=0;i<this.pts.length;i++){if(!this.pts[i].equals2D(e.pts[i])){return false;}}return true;};jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError();};jsts.noding.Octant.octant=function(dx,dy){if(dx instanceof jsts.geom.Coordinate){return jsts.noding.Octant.octant2.apply(this,arguments);}if(dx===0&&dy===0){throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+dx+", "+dy+" )");}var adx=Math.abs(dx);var ady=Math.abs(dy);if(dx>=0){if(dy>=0){if(adx>=ady){return 0;}else{return 1;}}else{if(adx>=ady){return 7;}else{return 6;}}}else{if(dy>=0){if(adx>=ady){return 3;}else{return 2;}}else{if(adx>=ady){return 4;}else{return 5;}}}};jsts.noding.Octant.octant2=function(p0,p1){var dx=p1.x-p0.x;var dy=p1.y-p0.y;if(dx===0&&dy===0){throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+p0);}return jsts.noding.Octant.octant(dx,dy);};jsts.operation.union.UnionInteracting=function(g0,g1){this.g0=g0;this.g1=g1;this.geomFactory=g0.getFactory();this.interacts0=[];this.interacts1=[];};jsts.operation.union.UnionInteracting.union=function(g0,g1){var uue=new jsts.operation.union.UnionInteracting(g0,g1);return uue.union();};jsts.operation.union.UnionInteracting.prototype.geomFactory=null;jsts.operation.union.UnionInteracting.prototype.g0=null;jsts.operation.union.UnionInteracting.prototype.g1=null;jsts.operation.union.UnionInteracting.prototype.interacts0=null;jsts.operation.union.UnionInteracting.prototype.interacts1=null;jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var int0=this.extractElements(this.g0,this.interacts0,true);var int1=this.extractElements(this.g1,this.interacts1,true);if(int0.isEmpty()||int1.isEmpty()){}var _4bc=in0.union(int1);var _4bd=this.extractElements(this.g0,this.interacts0,false);var _4be=this.extractElements(this.g1,this.interacts1,false);var _4bf=jsts.geom.util.GeometryCombiner.combine(_4bc,_4bd,_4be);return _4bf;};jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(g0,g1){var _4c0=g0.getFactory();var _4c1=_4c0.createGeometryCollection([g0,g1]);var _4c2=_4c1.buffer(0);return _4c2;};jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(_4c3){if(!_4c3){for(var i=0,l=this.g0.getNumGeometries();i<l;i++){var elem=this.g0.getGeometryN(i);this.interacts0[i]=this.computeInteracting(elem);}}else{var _4c4=false;for(var i=0,l=g1.getNumGeometries();i<l;i++){var _4c5=this.g1.getGeometryN(i);var _4c6=_4c5.getEnvelopeInternal().intersects(_4c3.getEnvelopeInternal());if(_4c6){this.interacts1[i]=true;_4c4=true;}}return _4c4;}};jsts.operation.union.UnionInteracting.prototype.extractElements=function(geom,_4c7,_4c8){var _4c9=[];for(var i=0,l=geom.getNumGeometries();i<l;i++){var elem=geom.getGeometryN(i);if(_4c7[i]===_4c8){_4c9.push(elem);}}return this.geomFactory.buildGeometry(_4c9);};jsts.triangulate.quadedge.TrianglePredicate=function(){};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(a,b,c,p){var _4ca=(a.x*a.x+a.y*a.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(b,c,p)-(b.x*b.x+b.y*b.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,c,p)+(c.x*c.x+c.y*c.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,b,p)-(p.x*p.x+p.y*p.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,b,c)>0;return _4ca;};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(a,b,c,p){var adx,ady,bdx,bdy,cdx,cdy,_4cb,_4cc,_4cd,_4ce,_4cf,_4d0,disc;adx=a.x-p.x;ady=a.y-p.y;bdx=b.x-p.x;bdy=b.y-p.y;cdx=c.x-p.x;cdy=c.y-p.y;_4cb=adx*bdy-bdx*ady;_4cc=bdx*cdy-cdx*bdy;_4cd=cdx*ady-adx*cdy;_4ce=adx*adx+ady*ady;_4cf=bdx*bdx+bdy*bdy;_4d0=cdx*cdx+cdy*cdy;disc=_4ce*_4cc+_4cf*_4cd+_4d0*_4cb;return disc>0;};jsts.triangulate.quadedge.TrianglePredicate.triArea=function(a,b,c){return (b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(a,b,c,p){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(a,b,c,p);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(a,b,c,p){var px,py,ax,ay,bx,by,cx,cy,_4d1,_4d2,_4d3,_4d4,sum,_4d5;px=jsts.math.DD.valueOf(p.x);py=jsts.math.DD.valueOf(p.y);ax=jsts.math.DD.valueOf(a.x);ay=jsts.math.DD.valueOf(a.y);bx=jsts.math.DD.valueOf(b.x);by=jsts.math.DD.valueOf(b.y);cx=jsts.math.DD.valueOf(c.x);cy=jsts.math.DD.valueOf(c.y);_4d1=(ax.multiply(ax).add(ay.multiply(ay))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(bx,by,cx,cy,px,py));_4d2=(bx.multiply(bx).add(by.multiply(by))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,cx,cy,px,py));_4d3=(cx.multiply(cx).add(cy.multiply(cy))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,bx,by,px,py));_4d4=(px.multiply(px).add(py.multiply(py))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,bx,by,cx,cy));sum=_4d1.subtract(_4d2).add(_4d3).subtract(_4d4);_4d5=sum.doubleValue()>0;return _4d5;};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(ax,ay,bx,by,cx,cy){return (bx.subtract(ax).multiply(cy.subtract(ay)).subtract(by.subtract(ay).multiply(cx.subtract(ax))));};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(a,b,c,p){var _4d6,_4d7,_4d8,_4d9,sum,_4da;_4d6=(jsts.math.DD.sqr(a.x).selfAdd(jsts.math.DD.sqr(a.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(b,c,p));_4d7=(jsts.math.DD.sqr(b.x).selfAdd(jsts.math.DD.sqr(b.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,c,p));_4d8=(jsts.math.DD.sqr(c.x).selfAdd(jsts.math.DD.sqr(c.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,b,p));_4d9=(jsts.math.DD.sqr(p.x).selfAdd(jsts.math.DD.sqr(p.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,b,c));sum=_4d6.selfSubtract(_4d7).selfAdd(_4d8).selfSubtract(_4d9);_4da=sum.doubleValue()>0;return _4da;};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(a,b,c){var t1,t2;t1=jsts.math.DD.valueOf(b.x).selfSubtract(a.x).selfMultiply(jsts.math.DD.valueOf(c.y).selfSubtract(a.y));t2=jsts.math.DD.valueOf(b.y).selSubtract(a.y).selfMultiply(jsts.math.DD.valueOf(c.x).selfSubtract(a.x));return t1.selfSubtract(t2);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(a,b,c,p){var adx,ady,bdx,bdy,cdx,cdy,_4db,_4dc,_4dd,_4de,_4df,_4e0,sum,_4e1;adx=jsts.math.DD.valueOf(a.x).selfSubtract(p.x);ady=jsts.math.DD.valueOf(a.y).selfSubtract(p.y);bdx=jsts.math.DD.valueOf(b.x).selfSubtract(p.x);bdx=jsts.math.DD.valueOf(b.y).selfSubtract(p.y);cdx=jsts.math.DD.valueOf(c.x).selfSubtract(p.x);cdx=jsts.math.DD.valueOf(c.y).selfSubtract(p.y);_4db=adx.multiply(bdy).selfSubtract(bdx.multiply(ady));_4dc=bdx.multiply(cdy).selfSubtract(cdx.multiply(bdy));_4dd=cdx.multiply(ady).selfSubtract(adx.multiply(cdy));_4de=adx.multiply(adx).selfAdd(ady.multiply(ady));_4df=bdx.multiply(bdx).selfAdd(bdy.multiply(bdy));_4e0=cdx.multiply(cdx).selfAdd(cdy.multiply(cdy));sum=_4de.selfMultiply(_4dc).selfAdd(_4df.selfMultiply(_4dd)).selfAdd(_4e0.selfMultiply(_4db));_4e1=sum.doubleValue()>0;return _4e1;};jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(a,b,c,p){var cc,_4e2,_4e3;cc=jsts.geom.Triangle.circumcentre(a,b,c);_4e2=a.distance(cc);_4e3=p.distance(cc)-_4e2;return _4e3<=0;};jsts.operation.union.PointGeometryUnion=function(_4e4,_4e5){this.pointGeom=_4e4;this.otherGeom=_4e5;this.geomFact=_4e5.getFactory();};jsts.operation.union.PointGeometryUnion.union=function(_4e6,_4e7){var _4e8=new jsts.operation.union.PointGeometryUnion(_4e6,_4e7);return _4e8.union();};jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null;jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null;jsts.operation.union.PointGeometryUnion.prototype.geomFact=null;jsts.operation.union.PointGeometryUnion.prototype.union=function(){var _4e9=new jsts.algorithm.PointLocator();var _4ea=[];for(var i=0,l=this.pointGeom.getNumGeometries();i<l;i++){var _4eb=this.pointGeom.getGeometryN(i);var _4ec=_4eb.getCoordinate();var loc=_4e9.locate(_4ec,this.otherGeom);if(loc===jsts.geom.Location.EXTERIOR){var _4ed=true;for(var j=_4ea.length;i--;){if(_4ea[j].equals(_4ec)){_4ed=false;break;}}if(_4ed){_4ea.push(_4ec);}}}_4ea.sort(function(x,y){return x.compareTo(y);});if(_4ea.length===0){return this.otherGeom;}var _4ee=null;var _4ef=jsts.geom.CoordinateArrays.toCoordinateArray(_4ea);if(_4ef.length===1){_4ee=this.geomFact.createPoint(_4ef[0]);}else{_4ee=this.geomFact.createMultiPoint(_4ef);}return jsts.geom.util.GeometryCombiner.combine(_4ee,this.otherGeom);};jsts.noding.IntersectionFinderAdder=function(li){this.li=li;this.interiorIntersections=new javascript.util.ArrayList();};jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder;jsts.noding.IntersectionFinderAdder.prototype.li=null;jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null;jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections;};jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(e0,_4f0,e1,_4f1){if(e0===e1&&_4f0===_4f1){return;}var p00=e0.getCoordinates()[_4f0];var p01=e0.getCoordinates()[_4f0+1];var p10=e1.getCoordinates()[_4f1];var p11=e1.getCoordinates()[_4f1+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){for(var _4f2=0;_4f2<this.li.getIntersectionNum();_4f2++){this.interiorIntersections.add(this.li.getIntersection(_4f2));}e0.addIntersections(this.li,_4f0,0);e1.addIntersections(this.li,_4f1,1);}}};jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return false;};jsts.noding.snapround.MCIndexSnapRounder=function(pm){this.pm=pm;this.li=new jsts.algorithm.RobustLineIntersector();this.li.setPrecisionModel(pm);this.scaleFactor=pm.getScale();};jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder();jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder;jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings);};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(_4f3){this.nodedSegStrings=_4f3;this.noder=new jsts.noding.MCIndexNoder();this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex());this.snapRound(_4f3,this.li);};jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(_4f4,li){var _4f5=this.findInteriorIntersections(_4f4,li);this.computeIntersectionSnaps(_4f5);this.computeVertexSnaps(_4f4);};jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(_4f6,li){var _4f7=new jsts.noding.IntersectionFinderAdder(li);this.noder.setSegmentIntersector(_4f7);this.noder.computeNodes(_4f6);return _4f7.getInteriorIntersections();};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(_4f8){for(var it=_4f8.iterator();it.hasNext();){var _4f9=it.next();var _4fa=new jsts.noding.snapround.HotPixel(_4f9,this.scaleFactor,this.li);this.pointSnapper.snap(_4fa);}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(_4fb){if(_4fb instanceof jsts.noding.NodedSegmentString){this.computeVertexSnaps2.apply(this,arguments);return;}for(var i0=_4fb.iterator();i0.hasNext();){var _4fc=i0.next();this.computeVertexSnaps(_4fc);}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(e){var pts0=e.getCoordinates();for(var i=0;i<pts0.length-1;i++){var _4fd=new jsts.noding.snapround.HotPixel(pts0[i],this.scaleFactor,this.li);var _4fe=this.pointSnapper.snap(_4fd,e,i);if(_4fe){e.addIntersection(pts0[i],i);}}};jsts.operation.valid.ConnectedInteriorTester=function(_4ff){this.geomGraph=_4ff;this.geometryFactory=new jsts.geom.GeometryFactory();this.disconnectedRingcoord=null;};jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(_500,pt){var i=0,il=_500.length;for(i;i<il;i++){if(!_500[i].equals(pt)){return _500[i];}}return null;};jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord;};jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var _501=new javascript.util.ArrayList();this.geomGraph.computeSplitEdges(_501);var _502=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());_502.addEdges(_501);this.setInteriorEdgesInResult(_502);_502.linkResultDirectedEdges();var _503=this.buildEdgeRings(_502.getEdgeEnds());this.visitShellInteriors(this.geomGraph.getGeometry(),_502);return !this.hasUnvisitedShellEdge(_503);};jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(_504){var it=_504.getEdgeEnds().iterator(),de;while(it.hasNext()){de=it.next();if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){de.setInResult(true);}}};jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(_505){var _506=new javascript.util.ArrayList();for(var it=_505.iterator();it.hasNext();){var de=it.next();if(de.isInResult()&&de.getEdgeRing()==null){var er=new jsts.operation.overlay.MaximalEdgeRing(de,this.geometryFactory);er.linkDirectedEdgesForMinimalEdgeRings();var _507=er.buildMinimalRings();var i=0,il=_507.length;for(i;i<il;i++){_506.add(_507[i]);}}}return _506;};jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(g,_508){if(g instanceof jsts.geom.Polygon){var p=g;this.visitInteriorRing(p.getExteriorRing(),_508);}if(g instanceof jsts.geom.MultiPolygon){var mp=g;for(var i=0;i<mp.getNumGeometries();i++){var p=mp.getGeometryN(i);this.visitInteriorRing(p.getExteriorRing(),_508);}}};jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(ring,_509){var pts=ring.getCoordinates();var pt0=pts[0];var pt1=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(pts,pt0);var e=_509.findEdgeInSameDirection(pt0,pt1);var de=_509.findEdgeEnd(e);var _50a=null;if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){_50a=de;}else{if(de.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){_50a=de.getSym();}}this.visitLinkedDirectedEdges(_50a);};jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(_50b){var _50c=_50b;var de=_50b;do{de.setVisited(true);de=de.getNext();}while(de!=_50c);};jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(_50d){for(var i=0;i<_50d.size();i++){var er=_50d.get(i);if(er.isHole()){continue;}var _50e=er.getEdges();var de=_50e[0];if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)!=jsts.geom.Location.INTERIOR){continue;}for(var j=0;j<_50e.length;j++){de=_50e[j];if(!de.isVisited()){disconnectedRingcoord=de.getCoordinate();return true;}}}return false;};jsts.algorithm.InteriorPointLine=function(_50f){this.centroid;this.minDistance=Number.MAX_VALUE;this.interiorPoint=null;this.centroid=_50f.getCentroid().getCoordinate();this.addInterior(_50f);if(this.interiorPoint==null){this.addEndpoints(_50f);}};jsts.algorithm.InteriorPointLine.prototype.getInteriorPoint=function(){return this.interiorPoint;};jsts.algorithm.InteriorPointLine.prototype.addInterior=function(_510){if(_510 instanceof jsts.geom.LineString){this.addInteriorCoord(_510.getCoordinates());}else{if(_510 instanceof jsts.geom.GeometryCollection){for(var i=0;i<_510.getNumGeometries();i++){this.addInterior(_510.getGeometryN(i));}}}};jsts.algorithm.InteriorPointLine.prototype.addInteriorCoord=function(pts){for(var i=1;i<pts.length-1;i++){this.add(pts[i]);}};jsts.algorithm.InteriorPointLine.prototype.addEndpoints=function(_511){if(_511 instanceof jsts.geom.LineString){this.addEndpointsCoord(_511.getCoordinates());}else{if(_511 instanceof jsts.geom.GeometryCollection){for(var i=0;i<_511.getNumGeometries();i++){this.addEndpoints(_511.getGeometryN(i));}}}};jsts.algorithm.InteriorPointLine.prototype.addEndpointsCoord=function(pts){this.add(pts[0]);this.add(pts[pts.length-1]);};jsts.algorithm.InteriorPointLine.prototype.add=function(_512){var dist=_512.distance(this.centroid);if(dist<this.minDistance){this.interiorPoint=new jsts.geom.Coordinate(_512);this.minDistance=dist;}};jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.selectedSegment=new jsts.geom.LineSegment();};jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null;jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(mc,_513){mc.getLineSegment(_513,this.selectedSegment);this.select2(this.selectedSegment);};jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(seg){};jsts.algorithm.MCPointInRing=function(ring){this.ring=ring;this.tree=null;this.crossings=0;this.interval=new jsts.index.bintree.Interval();this.buildIndex();};jsts.algorithm.MCPointInRing.MCSelecter=function(p,_514){this.parent=_514;this.p=p;};jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction;jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter;jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(ls){this.parent.testLineSegment.apply(this.parent,[this.p,ls]);};jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree();var pts=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates());var _515=jsts.index.chain.MonotoneChainBuilder.getChains(pts);for(var i=0;i<_515.length;i++){var mc=_515[i];var _516=mc.getEnvelope();this.interval.min=_516.getMinY();this.interval.max=_516.getMaxY();this.tree.insert(this.interval,mc);}};jsts.algorithm.MCPointInRing.prototype.isInside=function(pt){this.crossings=0;var _517=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,pt.y,pt.y);this.interval.min=pt.y;this.interval.max=pt.y;var segs=this.tree.query(this.interval);var _518=new jsts.algorithm.MCPointInRing.MCSelecter(pt,this);for(var i=segs.iterator();i.hasNext();){var mc=i.next();this.testMonotoneChain(_517,_518,mc);}if((this.crossings%2)==1){return true;}return false;};jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(_519,_51a,mc){mc.select(_519,_51a);};jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(p,seg){var xInt,x1,y1,x2,y2,p1,p2;p1=seg.p0;p2=seg.p1;x1=p1.x-p.x;y1=p1.y-p.y;x2=p2.x-p.x;y2=p2.y-p.y;if(((y1>0)&&(y2<=0))||((y2>0)&&(y1<=0))){xInt=jsts.algorithm.RobustDeterminant.signOfDet2x2(x1,y1,x2,y2)/(y2-y1);if(0<xInt){this.crossings++;}}};jsts.operation.valid.TopologyValidationError=function(_51b,pt){this.errorType=_51b;this.pt=null;if(pt!=null){this.pt=pt.clone();}};jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2;jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3;jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4;jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5;jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6;jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7;jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8;jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9;jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10;jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11;jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt;};jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType;};jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType];};jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var _51c="";if(this.pt!=null){_51c=" at or near point "+this.pt;return this.getMessage()+_51c;}return _51c;};(function(){jsts.geom.MultiPolygon=function(_51d,_51e){this.geometries=_51d||[];this.factory=_51e;};jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon;jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null);}var _51f=[];for(var i=0;i<this.geometries.length;i++){var _520=this.geometries[i];var _521=_520.getBoundary();for(var j=0;j<_521.getNumGeometries();j++){_51f.push(_521.getGeometryN(j));}}return this.getFactory().createMultiLineString(_51f);};jsts.geom.MultiPolygon.prototype.equalsExact=function(_522,_523){if(!this.isEquivalentClass(_522)){return false;}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,_522,_523);};jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon";})();jsts.geom.CoordinateSequenceFilter=function(){};jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc;(function(){var _524=function(){this.min=0;this.max=0;if(arguments.length===1){var _525=arguments[0];this.init(_525.min,_525.max);}else{if(arguments.length===2){this.init(arguments[0],arguments[1]);}}};_524.prototype.init=function(min,max){this.min=min;this.max=max;if(min>max){this.min=max;this.max=min;}};_524.prototype.getMin=function(){return this.min;};_524.prototype.getMax=function(){return this.max;};_524.prototype.getWidth=function(){return (this.max-this.min);};_524.prototype.expandToInclude=function(_526){if(_526.max>this.max){this.max=_526.max;}if(_526.min<this.min){this.min=_526.min;}};_524.prototype.overlaps=function(){if(arguments.length===1){return this.overlapsInterval.apply(this,arguments);}else{return this.overlapsMinMax.apply(this,arguments);}};_524.prototype.overlapsInterval=function(_527){return this.overlaps(_527.min,_527.max);};_524.prototype.overlapsMinMax=function(min,max){if(this.min>max||this.max<min){return false;}return true;};_524.prototype.contains=function(){var _528;if(arguments[0] instanceof jsts.index.bintree.Interval){_528=arguments[0];return this.containsMinMax(_528.min,_528.max);}else{if(arguments.length===1){return this.containsPoint(arguments[0]);}else{return this.containsMinMax(arguments[0],arguments[1]);}}};_524.prototype.containsMinMax=function(min,max){return (min>=this.min&&max<=this.max);};_524.prototype.containsPoint=function(p){return (p>=this.min&&p<=this.max);};jsts.index.bintree.Interval=_524;})();jsts.index.DoubleBits=function(){};jsts.index.DoubleBits.powerOf2=function(exp){return Math.pow(2,exp);};jsts.index.DoubleBits.exponent=function(d){return jsts.index.DoubleBits.CVTFWD(64,d)-1023;};jsts.index.DoubleBits.CVTFWD=function(NumW,Qty){var Sign,Expo,Mant,Bin,nb01="";var Inf={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}};var ExW={32:8,64:11}[NumW],MtW=NumW-ExW-1;if(!Bin){Sign=Qty<0||1/Qty<0;if(!isFinite(Qty)){Bin=Inf[NumW];if(Sign){Bin.d+=1<<(NumW/4-1);}Expo=Math.pow(2,ExW)-1;Mant=0;}}if(!Bin){Expo={32:127,64:1023}[NumW];Mant=Math.abs(Qty);while(Mant>=2){Expo++;Mant/=2;}while(Mant<1&&Expo>0){Expo--;Mant*=2;}if(Expo<=0){Mant/=2;nb01="Zero or Denormal";}if(NumW===32&&Expo>254){nb01="Too big for Single";Bin={d:Sign?255:127,c:128,b:0,a:0};Expo=Math.pow(2,ExW)-1;Mant=0;}}return Expo;};(function(){var _529=jsts.index.DoubleBits;var _52a=jsts.index.bintree.Interval;var Key=function(_52b){this.pt=0;this.level=0;this.computeKey(_52b);};Key.computeLevel=function(_52c){var dx=_52c.getWidth(),_52d;_52d=_529.exponent(dx)+1;return _52d;};Key.prototype.getPoint=function(){return this.pt;};Key.prototype.getLevel=function(){return this.level;};Key.prototype.getInterval=function(){return this.interval;};Key.prototype.computeKey=function(_52e){this.level=Key.computeLevel(_52e);this.interval=new _52a();this.computeInterval(this.level,_52e);while(!this.interval.contains(_52e)){this.level+=1;this.computeInterval(this.level,_52e);}};Key.prototype.computeInterval=function(_52f,_530){var size=_529.powerOf2(_52f);this.pt=Math.floor(_530.getMin()/size)*size;this.interval.init(this.pt,this.pt+size);};jsts.index.bintree.Key=Key;})();jsts.operation.buffer.SubgraphDepthLocater=function(_531){this.subgraphs=[];this.seg=new jsts.geom.LineSegment();this.subgraphs=_531;};jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(p){var _532=this.findStabbedSegments(p);if(_532.length===0){return 0;}_532.sort();var ds=_532[0];return ds.leftDepth;};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(_533){if(arguments.length===3){this.findStabbedSegments2.apply(this,arguments);return;}var _534=[];for(var i=0;i<this.subgraphs.length;i++){var bsg=this.subgraphs[i];var env=bsg.getEnvelope();if(_533.y<env.getMinY()||_533.y>env.getMaxY()){continue;}this.findStabbedSegments2(_533,bsg.getDirectedEdges(),_534);}return _534;};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(_535,_536,_537){if(arguments[1] instanceof jsts.geomgraph.DirectedEdge){this.findStabbedSegments3(_535,_536,_537);return;}for(var i=_536.iterator();i.hasNext();){var de=i.next();if(!de.isForward()){continue;}this.findStabbedSegments3(_535,de,_537);}};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(_538,_539,_53a){var pts=_539.getEdge().getCoordinates();for(var i=0;i<pts.length-1;i++){this.seg.p0=pts[i];this.seg.p1=pts[i+1];if(this.seg.p0.y>this.seg.p1.y){this.seg.reverse();}var maxx=Math.max(this.seg.p0.x,this.seg.p1.x);if(maxx<_538.x){continue;}if(this.seg.isHorizontal()){continue;}if(_538.y<this.seg.p0.y||_538.y>this.seg.p1.y){continue;}if(jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,_538)===jsts.algorithm.CGAlgorithms.RIGHT){continue;}var _53b=_539.getDepth(jsts.geomgraph.Position.LEFT);if(!this.seg.p0.equals(pts[i])){_53b=_539.getDepth(jsts.geomgraph.Position.RIGHT);}var ds=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,_53b);_53a.push(ds);}};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(seg,_53c){this.upwardSeg=new jsts.geom.LineSegment(seg);this.leftDepth=_53c;};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(obj){var _53d=obj;var _53e=this.upwardSeg.orientationIndex(_53d.upwardSeg);if(_53e===0){_53e=-1*_53d.upwardSeg.orientationIndex(upwardSeg);}if(_53e!==0){return _53e;}return this.compareX(this.upwardSeg,_53d.upwardSeg);};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(seg0,seg1){var _53f=seg0.p0.compareTo(seg1.p0);if(_53f!==0){return _53f;}return seg0.p1.compareTo(seg1.p1);};jsts.noding.snapround.HotPixel=function(pt,_540,li){this.corner=[];this.originalPt=pt;this.pt=pt;this.scaleFactor=_540;this.li=li;if(this.scaleFactor!==1){this.pt=new jsts.geom.Coordinate(this.scale(pt.x),this.scale(pt.y));this.p0Scaled=new jsts.geom.Coordinate();this.p1Scaled=new jsts.geom.Coordinate();}this.initCorners(this.pt);};jsts.noding.snapround.HotPixel.prototype.li=null;jsts.noding.snapround.HotPixel.prototype.pt=null;jsts.noding.snapround.HotPixel.prototype.originalPt=null;jsts.noding.snapround.HotPixel.prototype.ptScaled=null;jsts.noding.snapround.HotPixel.prototype.p0Scaled=null;jsts.noding.snapround.HotPixel.prototype.p1Scaled=null;jsts.noding.snapround.HotPixel.prototype.scaleFactor=undefined;jsts.noding.snapround.HotPixel.prototype.minx=undefined;jsts.noding.snapround.HotPixel.prototype.maxx=undefined;jsts.noding.snapround.HotPixel.prototype.miny=undefined;jsts.noding.snapround.HotPixel.prototype.maxy=undefined;jsts.noding.snapround.HotPixel.prototype.corner=null;jsts.noding.snapround.HotPixel.prototype.safeEnv=null;jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt;};jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=0.75;jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(this.safeEnv===null){var _541=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-_541,this.originalPt.x+_541,this.originalPt.y-_541,this.originalPt.y+_541);}return this.safeEnv;};jsts.noding.snapround.HotPixel.prototype.initCorners=function(pt){var _542=0.5;this.minx=pt.x-_542;this.maxx=pt.x+_542;this.miny=pt.y-_542;this.maxy=pt.y+_542;this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy);this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy);this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny);this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny);};jsts.noding.snapround.HotPixel.prototype.scale=function(val){return Math.round(val*this.scaleFactor);};jsts.noding.snapround.HotPixel.prototype.intersects=function(p0,p1){if(this.scaleFactor===1){return this.intersectsScaled(p0,p1);}this.copyScaled(p0,this.p0Scaled);this.copyScaled(p1,this.p1Scaled);return this.intersectsScaled(this.p0Scaled,this.p1Scaled);};jsts.noding.snapround.HotPixel.prototype.copyScaled=function(p,_543){_543.x=this.scale(p.x);_543.y=this.scale(p.y);};jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(p0,p1){var _544=Math.min(p0.x,p1.x);var _545=Math.max(p0.x,p1.x);var _546=Math.min(p0.y,p1.y);var _547=Math.max(p0.y,p1.y);var _548=this.maxx<_544||this.minx>_545||this.maxy<_546||this.miny>_547;if(_548){return false;}var _549=this.intersectsToleranceSquare(p0,p1);jsts.util.Assert.isTrue(!(_548&&_549),"Found bad envelope test");return _549;};jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(p0,p1){var _54a=false;var _54b=false;this.li.computeIntersection(p0,p1,this.corner[0],this.corner[1]);if(this.li.isProper()){return true;}this.li.computeIntersection(p0,p1,this.corner[1],this.corner[2]);if(this.li.isProper()){return true;}if(this.li.hasIntersection()){_54a=true;}this.li.computeIntersection(p0,p1,this.corner[2],this.corner[3]);if(this.li.isProper()){return true;}if(this.li.hasIntersection()){_54b=true;}this.li.computeIntersection(p0,p1,this.corner[3],this.corner[0]);if(this.li.isProper()){return true;}if(_54a&&_54b){return true;}if(p0.equals(this.pt)){return true;}if(p1.equals(this.pt)){return true;}return false;};jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(p0,p1){this.li.computeIntersection(p0,p1,this.corner[0],this.corner[1]);if(this.li.hasIntersection()){return true;}this.li.computeIntersection(p0,p1,this.corner[1],this.corner[2]);if(this.li.hasIntersection()){return true;}this.li.computeIntersection(p0,p1,this.corner[2],this.corner[3]);if(this.li.hasIntersection()){return true;}this.li.computeIntersection(p0,p1,this.corner[3],this.corner[0]);if(this.li.hasIntersection()){return true;}return false;};jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(_54c,_54d){var p0=_54c.getCoordinate(_54d);var p1=_54c.getCoordinate(_54d+1);if(this.intersects(p0,p1)){_54c.addIntersection(this.getCoordinate(),_54d);return true;}return false;};jsts.operation.buffer.BufferInputLineSimplifier=function(_54e){this.inputLine=_54e;};jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(_54f,_550){var simp=new jsts.operation.buffer.BufferInputLineSimplifier(_54f);return simp.simplify(_550);};jsts.operation.buffer.BufferInputLineSimplifier.INIT=0;jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1;jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1;jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(_551){this.distanceTol=Math.abs(_551);if(_551<0){this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE;}this.isDeleted=[];this.isDeleted.length=this.inputLine.length;var _552=false;do{_552=this.deleteShallowConcavities();}while(_552);return this.collapseLine();};jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){var _553=1;var _554=this.inputLine.length-1;var _555=this.findNextNonDeletedIndex(_553);var _556=this.findNextNonDeletedIndex(_555);var _557=false;while(_556<this.inputLine.length){var _558=false;if(this.isDeletable(_553,_555,_556,this.distanceTol)){this.isDeleted[_555]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE;_558=true;_557=true;}if(_558){_553=_556;}else{_553=_555;}_555=this.findNextNonDeletedIndex(_553);_556=this.findNextNonDeletedIndex(_555);}return _557;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(_559){var next=_559+1;while(next<this.inputLine.length&&this.isDeleted[next]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE){next++;}return next;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){var _55a=[];for(var i=0;i<this.inputLine.length;i++){if(this.isDeleted[i]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE){_55a.push(this.inputLine[i]);}}return _55a;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(i0,i1,i2,_55b){var p0=this.inputLine[i0];var p1=this.inputLine[i1];var p2=this.inputLine[i2];if(!this.isConcave(p0,p1,p2)){return false;}if(!this.isShallow(p0,p1,p2,_55b)){return false;}return this.isShallowSampled(p0,p1,i0,i2,_55b);};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(p0,p1,p2,_55c){var _55d=jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,p2);var _55e=(_55d===this.angleOrientation);if(!_55e){return false;}var dist=jsts.algorithm.CGAlgorithms.distancePointLine(p1,p0,p2);return dist<_55c;};jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(p0,p2,i0,i2,_55f){var inc=parseInt((i2-i0)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);if(inc<=0){inc=1;}for(var i=i0;i<i2;i+=inc){if(!this.isShallow(p0,p2,this.inputLine[i],_55f)){return false;}}return true;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(p0,p1,p2,_560){var dist=jsts.algorithm.CGAlgorithms.distancePointLine(p1,p0,p2);return dist<_560;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(p0,p1,p2){var _561=jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,p2);var _562=(_561===this.angleOrientation);return _562;};jsts.geomgraph.index.SweepLineEvent=function(x,obj,_563){if(!(obj instanceof jsts.geomgraph.index.SweepLineEvent)){this.eventType=jsts.geomgraph.index.SweepLineEvent.INSERT;this.label=_563;this.xValue=x;this.obj=obj;return;}this.eventType=jsts.geomgraph.index.SweepLineEvent.DELETE;this.xValue=x;this.insertEvent=obj;};jsts.geomgraph.index.SweepLineEvent.INSERT=1;jsts.geomgraph.index.SweepLineEvent.DELETE=2;jsts.geomgraph.index.SweepLineEvent.prototype.label=null;jsts.geomgraph.index.SweepLineEvent.prototype.xValue=null;jsts.geomgraph.index.SweepLineEvent.prototype.eventType=null;jsts.geomgraph.index.SweepLineEvent.prototype.insertEvent=null;jsts.geomgraph.index.SweepLineEvent.prototype.deleteEventIndex=null;jsts.geomgraph.index.SweepLineEvent.prototype.obj=null;jsts.geomgraph.index.SweepLineEvent.prototype.isInsert=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.INSERT;};jsts.geomgraph.index.SweepLineEvent.prototype.isDelete=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.DELETE;};jsts.geomgraph.index.SweepLineEvent.prototype.getInsertEvent=function(){return this.insertEvent;};jsts.geomgraph.index.SweepLineEvent.prototype.getDeleteEventIndex=function(){return this.deleteEventIndex;};jsts.geomgraph.index.SweepLineEvent.prototype.setDeleteEventIndex=function(_564){this.deleteEventIndex=_564;};jsts.geomgraph.index.SweepLineEvent.prototype.getObject=function(){return this.obj;};jsts.geomgraph.index.SweepLineEvent.prototype.isSameLabel=function(ev){if(this.label==null){return false;}return this.label==ev.label;};jsts.geomgraph.index.SweepLineEvent.prototype.compareTo=function(pe){if(this.xValue<pe.xValue){return -1;}if(this.xValue>pe.xValue){return 1;}if(this.eventType<pe.eventType){return -1;}if(this.eventType>pe.eventType){return 1;}return 0;};jsts.geom.CoordinateList=function(_565,_566){this.array=[];_566=(_566===undefined)?true:_566;if(_565!==undefined){this.add(_565,_566);}};jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList();jsts.geom.CoordinateList.prototype.iterator=null;jsts.geom.CoordinateList.prototype.remove=null;jsts.geom.CoordinateList.prototype.get=function(i){return this.array[i];};jsts.geom.CoordinateList.prototype.set=function(i,e){var o=this.array[i];this.array[i]=e;return o;};jsts.geom.CoordinateList.prototype.size=function(){return this.array.length;};jsts.geom.CoordinateList.prototype.add=function(){if(arguments.length>1){return this.addCoordinates.apply(this,arguments);}else{return this.array.push(arguments[0]);}};jsts.geom.CoordinateList.prototype.addCoordinates=function(_567,_568,_569){if(_567 instanceof jsts.geom.Coordinate){return this.addCoordinate.apply(this,arguments);}else{if(typeof _567==="number"){return this.insertCoordinate.apply(this,arguments);}}_569=_569||true;if(_569){for(var i=0;i<_567.length;i++){this.addCoordinate(_567[i],_568);}}else{for(var i=_567.length-1;i>=0;i--){this.addCoordinate(_567[i],_568);}}return true;};jsts.geom.CoordinateList.prototype.addCoordinate=function(_56a,_56b){if(!_56b){if(this.size()>=1){var last=this.get(this.size()-1);if(last.equals2D(_56a)){return;}}}this.add(_56a);};jsts.geom.CoordinateList.prototype.insertCoordinate=function(_56c,_56d,_56e){if(!_56e){var _56f=_56c>0?_56c-1:-1;if(_56f!==-1&&this.get(_56f).equals2D(_56d)){return;}var _570=_56c<this.size()-1?_56c+1:-1;if(_570!==-1&&this.get(_570).equals2D(_56d)){return;}}this.array.splice(_56c,0,_56d);};jsts.geom.CoordinateList.prototype.closeRing=function(){if(this.size()>0){this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),false);}};jsts.geom.CoordinateList.prototype.toArray=function(){return this.array;};jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.array;};jsts.operation.buffer.OffsetSegmentGenerator=function(_571,_572,_573){this.seg0=new jsts.geom.LineSegment();this.seg1=new jsts.geom.LineSegment();this.offset0=new jsts.geom.LineSegment();this.offset1=new jsts.geom.LineSegment();this.precisionModel=_571;this.bufParams=_572;this.li=new jsts.algorithm.RobustLineIntersector();this.filletAngleQuantum=Math.PI/2/_572.getQuadrantSegments();if(this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR;}this.init(_573);};jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=0.001;jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=0.001;jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=0.000001;jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80;jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1;jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=false;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle;};jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(_574){this.distance=_574;this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2));this.segList=new jsts.operation.buffer.OffsetSegmentString();this.segList.setPrecisionModel(this.precisionModel);this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(s1,s2,side){this.s1=s1;this.s2=s2;this.side=side;this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(pt,_575){this.segList.addPts(pt,_575);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(p,_576){this.s0=this.s1;this.s1=this.s2;this.s2=p;this.seg0.setCoordinates(this.s0,this.s1);this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0);this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);if(this.s1.equals(this.s2)){return;}var _577=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2);var _578=(_577===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT)||(_577===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT);if(_577==0){this.addCollinear(_576);}else{if(_578){this.addOutsideTurn(_577,_576);}else{this.addInsideTurn(_577,_576);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(_579){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var _57a=this.li.getIntersectionNum();if(_57a>=2){if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){if(_579){this.segList.addPt(this.offset0.p1);}this.segList.addPt(this.offset1.p0);}else{this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(_57b,_57c){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR){this.segList.addPt(this.offset0.p1);return;}if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance);}else{if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL){this.addBevelJoin(this.offset0,this.offset1);}else{if(_57c){this.segList.addPt(this.offset0.p1);}this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,_57b,this.distance);this.segList.addPt(this.offset1.p0);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(_57d,_57e){this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1);if(this.li.hasIntersection()){this.segList.addPt(this.li.getIntersection(0));}else{this.hasNarrowConcaveAngle=true;if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR){this.segList.addPt(this.offset0.p1);}else{this.segList.addPt(this.offset0.p1);if(this.closingSegLengthFactor>0){var mid0=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(mid0);var mid1=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(mid1);}else{this.segList.addPt(this.s1);}this.segList.addPt(this.offset1.p0);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(seg,side,_57f,_580){var _581=side===jsts.geomgraph.Position.LEFT?1:-1;var dx=seg.p1.x-seg.p0.x;var dy=seg.p1.y-seg.p0.y;var len=Math.sqrt(dx*dx+dy*dy);var ux=_581*_57f*dx/len;var uy=_581*_57f*dy/len;_580.p0.x=seg.p0.x-uy;_580.p0.y=seg.p0.y+ux;_580.p1.x=seg.p1.x-uy;_580.p1.y=seg.p1.y+ux;};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(p0,p1){var seg=new jsts.geom.LineSegment(p0,p1);var _582=new jsts.geom.LineSegment();this.computeOffsetSegment(seg,jsts.geomgraph.Position.LEFT,this.distance,_582);var _583=new jsts.geom.LineSegment();this.computeOffsetSegment(seg,jsts.geomgraph.Position.RIGHT,this.distance,_583);var dx=p1.x-p0.x;var dy=p1.y-p0.y;var _584=Math.atan2(dy,dx);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(_582.p1);this.addFillet(p1,_584+Math.PI/2,_584-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance);this.segList.addPt(_583.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(_582.p1);this.segList.addPt(_583.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var _585=new jsts.geom.Coordinate();_585.x=Math.abs(this.distance)*Math.cos(_584);_585.y=Math.abs(this.distance)*Math.sin(_584);var _586=new jsts.geom.Coordinate(_582.p1.x+_585.x,_582.p1.y+_585.y);var _587=new jsts.geom.Coordinate(_583.p1.x+_585.x,_583.p1.y+_585.y);this.segList.addPt(_586);this.segList.addPt(_587);break;}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(p,_588,_589,_58a){var _58b=true;var _58c=null;try{_58c=jsts.algorithm.HCoordinate.intersection(_588.p0,_588.p1,_589.p0,_589.p1);var _58d=_58a<=0?1:_58c.distance(p)/Math.abs(_58a);if(_58d>this.bufParams.getMitreLimit()){this.isMitreWithinLimit=false;}}catch(e){if(e instanceof jsts.error.NotRepresentableError){_58c=new jsts.geom.Coordinate(0,0);this.isMitreWithinLimit=false;}}if(_58b){this.segList.addPt(_58c);}else{this.addLimitedMitreJoin(_588,_589,_58a,bufParams.getMitreLimit());}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(_58e,_58f,_590,_591){var _592=this.seg0.p1;var ang0=jsts.algorithm.Angle.angle(_592,this.seg0.p0);var ang1=jsts.algorithm.Angle.angle(_592,this.seg1.p1);var _593=jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,_592,this.seg1.p1);var _594=_593/2;var _595=jsts.algorithm.Angle.normalize(ang0+_594);var _596=jsts.algorithm.Angle.normalize(_595+Math.PI);var _597=_591*_590;var _598=_597*Math.abs(Math.sin(_594));var _599=_590-_598;var _59a=_592.x+_597*Math.cos(_596);var _59b=_592.y+_597*Math.sin(_596);var _59c=new jsts.geom.Coordinate(_59a,_59b);var _59d=new jsts.geom.LineSegment(_592,_59c);var _59e=_59d.pointAlongOffset(1,_599);var _59f=_59d.pointAlongOffset(1,-_599);if(this.side==jsts.geomgraph.Position.LEFT){this.segList.addPt(_59e);this.segList.addPt(_59f);}else{this.segList.addPt(_59f);this.segList.addPt(_59e);}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(_5a0,_5a1){this.segList.addPt(_5a0.p1);this.segList.addPt(_5a1.p0);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(p,p0,p1,_5a2,_5a3){if(!(p1 instanceof jsts.geom.Coordinate)){this.addFillet2.apply(this,arguments);return;}var dx0=p0.x-p.x;var dy0=p0.y-p.y;var _5a4=Math.atan2(dy0,dx0);var dx1=p1.x-p.x;var dy1=p1.y-p.y;var _5a5=Math.atan2(dy1,dx1);if(_5a2===jsts.algorithm.CGAlgorithms.CLOCKWISE){if(_5a4<=_5a5){_5a4+=2*Math.PI;}}else{if(_5a4>=_5a5){_5a4-=2*Math.PI;}}this.segList.addPt(p0);this.addFillet(p,_5a4,_5a5,_5a2,_5a3);this.segList.addPt(p1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(p,_5a6,_5a7,_5a8,_5a9){var _5aa=_5a8===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1;var _5ab=Math.abs(_5a6-_5a7);var _5ac=parseInt((_5ab/this.filletAngleQuantum+0.5));if(_5ac<1){return;}var _5ad,_5ae;_5ad=0;_5ae=_5ab/_5ac;var _5af=_5ad;var pt=new jsts.geom.Coordinate();while(_5af<_5ab){var _5b0=_5a6+_5aa*_5af;pt.x=p.x+_5a9*Math.cos(_5b0);pt.y=p.y+_5a9*Math.sin(_5b0);this.segList.addPt(pt);_5af+=_5ae;}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(p){var pt=new jsts.geom.Coordinate(p.x+this.distance,p.y);this.segList.addPt(pt);this.addFillet(p,0,2*Math.PI,-1,this.distance);this.segList.closeRing();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(p){this.segList.addPt(new jsts.geom.Coordinate(p.x+distance,p.y+distance));this.segList.addPt(new jsts.geom.Coordinate(p.x+distance,p.y-distance));this.segList.addPt(new jsts.geom.Coordinate(p.x-distance,p.y-distance));this.segList.addPt(new jsts.geom.Coordinate(p.x-distance,p.y+distance));this.segList.closeRing();};jsts.operation.overlay.MaximalEdgeRing=function(_5b1,_5b2){jsts.geomgraph.EdgeRing.call(this,_5b1,_5b2);};jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing;jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(de){return de.getNext();};jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(de,er){de.setEdgeRing(er);};jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var de=this.startDe;do{var node=de.getNode();node.getEdges().linkMinimalDirectedEdges(this);de=de.getNext();}while(de!=this.startDe);};jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var _5b3=[];var de=this.startDe;do{if(de.getMinEdgeRing()===null){var _5b4=new jsts.operation.overlay.MinimalEdgeRing(de,this.geometryFactory);_5b3.push(_5b4);}de=de.getNext();}while(de!=this.startDe);return _5b3;};jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate();};jsts.algorithm.CentroidPoint.prototype.ptCount=0;jsts.algorithm.CentroidPoint.prototype.centSum=null;jsts.algorithm.CentroidPoint.prototype.add=function(geom){if(geom instanceof jsts.geom.Point){this.add2(geom.getCoordinate());}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}}};jsts.algorithm.CentroidPoint.prototype.add2=function(pt){this.ptCount+=1;this.centSum.x+=pt.x;this.centSum.y+=pt.y;};jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();cent.x=this.centSum.x/this.ptCount;cent.y=this.centSum.y/this.ptCount;return cent;};jsts.operation.distance.ConnectedElementLocationFilter=function(_5b5){this.locations=_5b5;};jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter();jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null;jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(geom){var _5b6=[];geom.apply(new jsts.operation.distance.ConnectedElementLocationFilter(_5b6));return _5b6;};jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(geom){if(geom instanceof jsts.geom.Point||geom instanceof jsts.geom.LineString||geom instanceof jsts.geom.Polygon){this.locations.push(new jsts.operation.distance.GeometryLocation(geom,0,geom.getCoordinate()));}};jsts.geomgraph.index.MonotoneChainEdge=function(e){this.e=e;this.pts=e.getCoordinates();var mcb=new jsts.geomgraph.index.MonotoneChainIndexer();this.startIndex=mcb.getChainStartIndices(this.pts);};jsts.geomgraph.index.MonotoneChainEdge.prototype.e=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.pts=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.startIndex=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.env1=new jsts.geom.Envelope();jsts.geomgraph.index.MonotoneChainEdge.prototype.env2=new jsts.geom.Envelope();jsts.geomgraph.index.MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getMinX=function(_5b7){var x1=this.pts[this.startIndex[_5b7]].x;var x2=this.pts[this.startIndex[_5b7+1]].x;if(x1<x2){return x1;}return x2;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getMaxX=function(_5b8){var x1=this.pts[this.startIndex[_5b8]].x;var x2=this.pts[this.startIndex[_5b8+1]].x;if(x1>x2){return x1;}return x2;};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersects=function(mce,si){for(var i=0;i<this.startIndex.length-1;i++){for(var j=0;j<mce.startIndex.length-1;j++){this.computeIntersectsForChain(i,mce,j,si);}}};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain=function(_5b9,mce,_5ba,si){this.computeIntersectsForChain2(this.startIndex[_5b9],this.startIndex[_5b9+1],mce,mce.startIndex[_5ba],mce.startIndex[_5ba+1],si);};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain2=function(_5bb,end0,mce,_5bc,end1,ei){var p00=this.pts[_5bb];var p01=this.pts[end0];var p10=mce.pts[_5bc];var p11=mce.pts[end1];if(end0-_5bb==1&&end1-_5bc==1){ei.addIntersections(this.e,_5bb,mce.e,_5bc);return;}this.env1.init(p00,p01);this.env2.init(p10,p11);if(!this.env1.intersects(this.env2)){return;}var mid0=Math.floor((_5bb+end0)/2);var mid1=Math.floor((_5bc+end1)/2);if(_5bb<mid0){if(_5bc<mid1){this.computeIntersectsForChain2(_5bb,mid0,mce,_5bc,mid1,ei);}if(mid1<end1){this.computeIntersectsForChain2(_5bb,mid0,mce,mid1,end1,ei);}}if(mid0<end0){if(_5bc<mid1){this.computeIntersectsForChain2(mid0,end0,mce,_5bc,mid1,ei);}if(mid1<end1){this.computeIntersectsForChain2(mid0,end0,mce,mid1,end1,ei);}}};(function(){var _5bd=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(_5be){if(arguments.length==2){this.computeEdgeEnds2.apply(this,arguments);return;}var l=new _5bd();for(var i=_5be;i.hasNext();){var e=i.next();this.computeEdgeEnds2(e,l);}return l;};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(edge,l){var _5bf=edge.getEdgeIntersectionList();_5bf.addEndpoints();var it=_5bf.iterator();var _5c0=null;var _5c1=null;if(!it.hasNext()){return;}var _5c2=it.next();do{_5c0=_5c1;_5c1=_5c2;_5c2=null;if(it.hasNext()){_5c2=it.next();}if(_5c1!==null){this.createEdgeEndForPrev(edge,l,_5c1,_5c0);this.createEdgeEndForNext(edge,l,_5c1,_5c2);}}while(_5c1!==null);};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(edge,l,_5c3,_5c4){var _5c5=_5c3.segmentIndex;if(_5c3.dist===0){if(_5c5===0){return;}_5c5--;}var _5c6=edge.getCoordinate(_5c5);if(_5c4!==null&&_5c4.segmentIndex>=_5c5){_5c6=_5c4.coord;}var _5c7=new jsts.geomgraph.Label(edge.getLabel());_5c7.flip();var e=new jsts.geomgraph.EdgeEnd(edge,_5c3.coord,_5c6,_5c7);l.add(e);};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(edge,l,_5c8,_5c9){var _5ca=_5c8.segmentIndex+1;if(_5ca>=edge.getNumPoints()&&_5c9===null){return;}var _5cb=edge.getCoordinate(_5ca);if(_5c9!==null&&_5c9.segmentIndex===_5c8.segmentIndex){_5cb=_5c9.coord;}var e=new jsts.geomgraph.EdgeEnd(edge,_5c8.coord,_5cb,new jsts.geomgraph.Label(edge.getLabel()));l.add(e);};})();(function(){var _5cc=javascript.util.ArrayList;var _5cd=javascript.util.TreeSet;var _5ce=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new _5cd();this.list=new _5cc();};jsts.util.UniqueCoordinateArrayFilter.prototype=new _5ce();jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null;jsts.util.UniqueCoordinateArrayFilter.prototype.list=null;jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray();};jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(_5cf){if(!this.treeSet.contains(_5cf)){this.list.add(_5cf);this.treeSet.add(_5cf);}};})();(function(){var _5d0=jsts.algorithm.CGAlgorithms;var _5d1=jsts.util.UniqueCoordinateArrayFilter;var _5d2=jsts.util.Assert;var _5d3=javascript.util.Stack;var _5d4=javascript.util.ArrayList;var _5d5=javascript.util.Arrays;var _5d6=function(_5d7){this.origin=_5d7;};_5d6.prototype.origin=null;_5d6.prototype.compare=function(o1,o2){var p1=o1;var p2=o2;return _5d6.polarCompare(this.origin,p1,p2);};_5d6.polarCompare=function(o,p,q){var dxp=p.x-o.x;var dyp=p.y-o.y;var dxq=q.x-o.x;var dyq=q.y-o.y;var _5d8=_5d0.computeOrientation(o,p,q);if(_5d8==_5d0.COUNTERCLOCKWISE){return 1;}if(_5d8==_5d0.CLOCKWISE){return -1;}var op=dxp*dxp+dyp*dyp;var oq=dxq*dxq+dyq*dyq;if(op<oq){return -1;}if(op>oq){return 1;}return 0;};jsts.algorithm.ConvexHull=function(){if(arguments.length===1){var _5d9=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(_5d9);this.geomFactory=_5d9.getFactory();}else{this.pts=arguments[0];this.geomFactory=arguments[1];}};jsts.algorithm.ConvexHull.prototype.geomFactory=null;jsts.algorithm.ConvexHull.prototype.inputPts=null;jsts.algorithm.ConvexHull.extractCoordinates=function(geom){var _5da=new _5d1();geom.apply(_5da);return _5da.getCoordinates();};jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(this.inputPts.length==0){return this.geomFactory.createGeometryCollection(null);}if(this.inputPts.length==1){return this.geomFactory.createPoint(this.inputPts[0]);}if(this.inputPts.length==2){return this.geomFactory.createLineString(this.inputPts);}var _5db=this.inputPts;if(this.inputPts.length>50){_5db=this.reduce(this.inputPts);}var _5dc=this.preSort(_5db);var cHS=this.grahamScan(_5dc);var cH=cHS.toArray();return this.lineOrPolygon(cH);};jsts.algorithm.ConvexHull.prototype.reduce=function(_5dd){var _5de=this.computeOctRing(_5dd);if(_5de==null){return this.inputPts;}var _5df=new javascript.util.TreeSet();for(var i=0;i<_5de.length;i++){_5df.add(_5de[i]);}for(var i=0;i<_5dd.length;i++){if(!_5d0.isPointInRing(_5dd[i],_5de)){_5df.add(_5dd[i]);}}var _5e0=_5df.toArray();if(_5e0.length<3){return this.padArray3(_5e0);}return _5e0;};jsts.algorithm.ConvexHull.prototype.padArray3=function(pts){var pad=[];for(var i=0;i<pad.length;i++){if(i<pts.length){pad[i]=pts[i];}else{pad[i]=pts[0];}}return pad;};jsts.algorithm.ConvexHull.prototype.preSort=function(pts){var t;for(var i=1;i<pts.length;i++){if((pts[i].y<pts[0].y)||((pts[i].y==pts[0].y)&&(pts[i].x<pts[0].x))){t=pts[0];pts[0]=pts[i];pts[i]=t;}}_5d5.sort(pts,1,pts.length,new _5d6(pts[0]));return pts;};jsts.algorithm.ConvexHull.prototype.grahamScan=function(c){var p;var ps=new _5d3();p=ps.push(c[0]);p=ps.push(c[1]);p=ps.push(c[2]);for(var i=3;i<c.length;i++){p=ps.pop();while(!ps.empty()&&_5d0.computeOrientation(ps.peek(),p,c[i])>0){p=ps.pop();}p=ps.push(p);p=ps.push(c[i]);}p=ps.push(c[0]);return ps;};jsts.algorithm.ConvexHull.prototype.isBetween=function(c1,c2,c3){if(_5d0.computeOrientation(c1,c2,c3)!==0){return false;}if(c1.x!=c3.x){if(c1.x<=c2.x&&c2.x<=c3.x){return true;}if(c3.x<=c2.x&&c2.x<=c1.x){return true;}}if(c1.y!=c3.y){if(c1.y<=c2.y&&c2.y<=c3.y){return true;}if(c3.y<=c2.y&&c2.y<=c1.y){return true;}}return false;};jsts.algorithm.ConvexHull.prototype.computeOctRing=function(_5e1){var _5e2=this.computeOctPts(_5e1);var _5e3=new jsts.geom.CoordinateList();_5e3.add(_5e2,false);if(_5e3.size()<3){return null;}_5e3.closeRing();return _5e3.toCoordinateArray();};jsts.algorithm.ConvexHull.prototype.computeOctPts=function(_5e4){var pts=[];for(var j=0;j<8;j++){pts[j]=_5e4[0];}for(var i=1;i<_5e4.length;i++){if(_5e4[i].x<pts[0].x){pts[0]=_5e4[i];}if(_5e4[i].x-_5e4[i].y<pts[1].x-pts[1].y){pts[1]=_5e4[i];}if(_5e4[i].y>pts[2].y){pts[2]=_5e4[i];}if(_5e4[i].x+_5e4[i].y>pts[3].x+pts[3].y){pts[3]=_5e4[i];}if(_5e4[i].x>pts[4].x){pts[4]=_5e4[i];}if(_5e4[i].x-_5e4[i].y>pts[5].x-pts[5].y){pts[5]=_5e4[i];}if(_5e4[i].y<pts[6].y){pts[6]=_5e4[i];}if(_5e4[i].x+_5e4[i].y<pts[7].x+pts[7].y){pts[7]=_5e4[i];}}return pts;};jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(_5e5){_5e5=this.cleanRing(_5e5);if(_5e5.length==3){return this.geomFactory.createLineString([_5e5[0],_5e5[1]]);}var _5e6=this.geomFactory.createLinearRing(_5e5);return this.geomFactory.createPolygon(_5e6,null);};jsts.algorithm.ConvexHull.prototype.cleanRing=function(_5e7){_5d2.equals(_5e7[0],_5e7[_5e7.length-1]);var _5e8=new _5d4();var _5e9=null;for(var i=0;i<=_5e7.length-2;i++){var _5ea=_5e7[i];var _5eb=_5e7[i+1];if(_5ea.equals(_5eb)){continue;}if(_5e9!=null&&this.isBetween(_5e9,_5ea,_5eb)){continue;}_5e8.add(_5ea);_5e9=_5ea;}_5e8.add(_5e7[_5e7.length-1]);var _5ec=[];return _5e8.toArray(_5ec);};})();jsts.algorithm.MinimumDiameter=function(_5ed,_5ee){this.convexHullPts=null;this.minBaseSeg=new jsts.geom.LineSegment();this.minWidthPt=null;this.minPtIndex=0;this.minWidth=0;jsts.algorithm.MinimumDiameter.inputGeom=_5ed;jsts.algorithm.MinimumDiameter.isConvex=_5ee||false;};jsts.algorithm.MinimumDiameter.inputGeom=null;jsts.algorithm.MinimumDiameter.isConvex=false;jsts.algorithm.MinimumDiameter.nextIndex=function(pts,_5ef){_5ef++;if(_5ef>=pts.length){_5ef=0;}return _5ef;};jsts.algorithm.MinimumDiameter.computeC=function(a,b,p){return a*p.y-b*p.x;};jsts.algorithm.MinimumDiameter.computeSegmentForLine=function(a,b,c){var p0;var p1;if(Math.abs(b)>Math.abs(a)){p0=new jsts.geom.Coordinate(0,c/b);p1=new jsts.geom.Coordinate(1,c/b-a/b);}else{p0=new jsts.geom.Coordinate(c/a,0);p1=new jsts.geom.Coordinate(c/a-b/a,1);}return new jsts.geom.LineSegment(p0,p1);};jsts.algorithm.MinimumDiameter.prototype.getLength=function(){this.computeMinimumDiameter();return this.minWidth;};jsts.algorithm.MinimumDiameter.prototype.getWidthCoordinate=function(){this.computeMinimumDiameter();return this.minWidthPt;};jsts.algorithm.MinimumDiameter.prototype.getSupportingSegment=function(){this.computeMinimumDiameter();var _5f0=[this.minBaseSeg.p0,this.minBaseSeg.p1];return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(_5f0);};jsts.algorithm.MinimumDiameter.prototype.getDiameter=function(){this.computeMinimumDiameter();if(this.minWidthPt===null){return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(null);}var _5f1=this.minBaseSeg.project(this.minWidthPt);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString([_5f1,this.minWidthPt]);};jsts.algorithm.MinimumDiameter.prototype.computeMinimumDiameter=function(){if(this.minWidthPt!==null){return;}if(jsts.algorithm.MinimumDiameter.isConvex){this.computeWidthConvex(jsts.algorithm.MinimumDiameter.inputGeom);}else{var _5f2=new jsts.algorithm.ConvexHull(jsts.algorithm.MinimumDiameter.inputGeom).getConvexHull();this.computeWidthConvex(_5f2);}};jsts.algorithm.MinimumDiameter.prototype.computeWidthConvex=function(_5f3){if(_5f3 instanceof jsts.geom.Polygon){this.convexHullPts=_5f3.getExteriorRing().getCoordinates();}else{this.convexHullPts=_5f3.getCoordinates();}if(this.convexHullPts.length===0){this.minWidth=0;this.minWidthPt=null;this.minBaseSeg=null;}else{if(this.convexHullPts.length===1){this.minWidth=0;this.minWidthPt=this.convexHullPts[0];this.minBaseSeg.p0=this.convexHullPts[0];this.minBaseSeg.p1=this.convexHullPts[0];}else{if(this.convexHullPts.length===2||this.convexHullPts.length===3){this.minWidth=0;this.minWidthPt=this.convexHullPts[0];this.minBaseSeg.p0=this.convexHullPts[0];this.minBaseSeg.p1=this.convexHullPts[1];}else{this.computeConvexRingMinDiameter(this.convexHullPts);}}}};jsts.algorithm.MinimumDiameter.prototype.computeConvexRingMinDiameter=function(pts){this.minWidth=Number.MAX_VALUE;var _5f4=1;var seg=new jsts.geom.LineSegment();for(var i=0;i<pts.length-1;i++){seg.p0=pts[i];seg.p1=pts[i+1];_5f4=this.findMaxPerpDistance(pts,seg,_5f4);}};jsts.algorithm.MinimumDiameter.prototype.findMaxPerpDistance=function(pts,seg,_5f5){var _5f6=seg.distancePerpendicular(pts[_5f5]);var _5f7=_5f6;var _5f8=_5f5;var _5f9=_5f8;while(_5f7>=_5f6){_5f6=_5f7;_5f8=_5f9;_5f9=jsts.algorithm.MinimumDiameter.nextIndex(pts,_5f8);_5f7=seg.distancePerpendicular(pts[_5f9]);}if(_5f6<this.minWidth){this.minPtIndex=_5f8;this.minWidth=_5f6;this.minWidthPt=pts[this.minPtIndex];this.minBaseSeg=new jsts.geom.LineSegment(seg);}return _5f8;};jsts.algorithm.MinimumDiameter.prototype.getMinimumRectangle=function(){this.computeMinimumDiameter();if(this.minWidth===0){if(this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)){return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPoint(this.minBaseSeg.p0);}return this.minBaseSeg.toGeometry(jsts.algorithm.MinimumDiameter.inputGeom.getFactory());}var dx=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x;var dy=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y;var _5fa=Number.MAX_VALUE;var _5fb=-Number.MAX_VALUE;var _5fc=Number.MAX_VALUE;var _5fd=-Number.MAX_VALUE;for(var i=0;i<this.convexHullPts.length;i++){var _5fe=jsts.algorithm.MinimumDiameter.computeC(dx,dy,this.convexHullPts[i]);if(_5fe>_5fb){_5fb=_5fe;}if(_5fe<_5fa){_5fa=_5fe;}var _5ff=jsts.algorithm.MinimumDiameter.computeC(-dy,dx,this.convexHullPts[i]);if(_5ff>_5fd){_5fd=_5ff;}if(_5ff<_5fc){_5fc=_5ff;}}var _600=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dx,-dy,_5fd);var _601=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dx,-dy,_5fc);var _602=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dy,dx,_5fb);var _603=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dy,dx,_5fa);var p0=_602.lineIntersection(_600);var p1=_603.lineIntersection(_600);var p2=_603.lineIntersection(_601);var p3=_602.lineIntersection(_601);var _604=jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLinearRing([p0,p1,p2,p3,p0]);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPolygon(_604,null);};(function(){jsts.io.GeoJSONParser=function(_605){this.geometryFactory=_605||new jsts.geom.GeometryFactory();this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];};jsts.io.GeoJSONParser.prototype.read=function(json){var obj;if(typeof json==="string"){obj=JSON.parse(json);}else{obj=json;}var type=obj.type;if(!this.parse[type]){throw new Error("Unknown GeoJSON type: "+obj.type);}if(this.geometryTypes.indexOf(type)!=-1){return this.parse[type].apply(this,[obj.coordinates]);}else{if(type==="GeometryCollection"){return this.parse[type].apply(this,[obj.geometries]);}}return this.parse[type].apply(this,[obj]);};jsts.io.GeoJSONParser.prototype.parse={"Feature":function(obj){var _606={};for(var key in obj){_606[key]=obj[key];}if(obj.geometry){var type=obj.geometry.type;if(!this.parse[type]){throw new Error("Unknown GeoJSON type: "+obj.type);}_606.geometry=this.read(obj.geometry);}if(obj.bbox){_606.bbox=this.parse.bbox.apply(this,[obj.bbox]);}return _606;},"FeatureCollection":function(obj){var _607={};if(obj.features){_607.features=[];for(var i=0;i<obj.features.length;++i){_607.features.push(this.read(obj.features[i]));}}if(obj.bbox){_607.bbox=this.parse.bbox.apply(this,[obj.bbox]);}return _607;},"coordinates":function(_608){var _609=[];for(var i=0;i<_608.length;++i){var sub=_608[i];_609.push(new jsts.geom.Coordinate(sub[0],sub[1]));}return _609;},"bbox":function(_60a){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(_60a[0],_60a[1]),new jsts.geom.Coordinate(_60a[2],_60a[1]),new jsts.geom.Coordinate(_60a[2],_60a[3]),new jsts.geom.Coordinate(_60a[0],_60a[3]),new jsts.geom.Coordinate(_60a[0],_60a[1])]);},"Point":function(_60b){var _60c=new jsts.geom.Coordinate(_60b[0],_60b[1]);return this.geometryFactory.createPoint(_60c);},"MultiPoint":function(_60d){var _60e=[];for(var i=0;i<_60d.length;++i){_60e.push(this.parse.Point.apply(this,[_60d[i]]));}return this.geometryFactory.createMultiPoint(_60e);},"LineString":function(_60f){var _610=this.parse.coordinates.apply(this,[_60f]);return this.geometryFactory.createLineString(_610);},"MultiLineString":function(_611){var _612=[];for(var i=0;i<_611.length;++i){_612.push(this.parse.LineString.apply(this,[_611[i]]));}return this.geometryFactory.createMultiLineString(_612);},"Polygon":function(_613){var _614=this.parse.coordinates.apply(this,[_613[0]]);var _615=this.geometryFactory.createLinearRing(_614);var _616=[];for(var i=1;i<_613.length;++i){var hole=_613[i];var _617=this.parse.coordinates.apply(this,[hole]);var _618=this.geometryFactory.createLinearRing(_617);_616.push(_618);}return this.geometryFactory.createPolygon(_615,_616);},"MultiPolygon":function(_619){var _61a=[];for(var i=0;i<_619.length;++i){var _61b=_619[i];_61a.push(this.parse.Polygon.apply(this,[_61b]));}return this.geometryFactory.createMultiPolygon(_61a);},"GeometryCollection":function(_61c){var _61d=[];for(var i=0;i<_61c.length;++i){var _61e=_61c[i];_61d.push(this.read(_61e));}return this.geometryFactory.createGeometryCollection(_61d);}};jsts.io.GeoJSONParser.prototype.write=function(_61f){var type=_61f.CLASS_NAME.slice(10);if(!this.extract[type]){throw new Error("Geometry is not supported");}return this.extract[type].apply(this,[_61f]);};jsts.io.GeoJSONParser.prototype.extract={"coordinate":function(_620){return [_620.x,_620.y];},"Point":function(_621){var _622=this.extract.coordinate.apply(this,[_621.coordinate]);return {type:"Point",coordinates:_622};},"MultiPoint":function(_623){var _624=[];for(var i=0;i<_623.geometries.length;++i){var _625=_623.geometries[i];var _626=this.extract.Point.apply(this,[_625]);_624.push(_626.coordinates);}return {type:"MultiPoint",coordinates:_624};},"LineString":function(_627){var _628=[];for(var i=0;i<_627.points.length;++i){var _629=_627.points[i];_628.push(this.extract.coordinate.apply(this,[_629]));}return {type:"LineString",coordinates:_628};},"MultiLineString":function(_62a){var _62b=[];for(var i=0;i<_62a.geometries.length;++i){var _62c=_62a.geometries[i];var _62d=this.extract.LineString.apply(this,[_62c]);_62b.push(_62d.coordinates);}return {type:"MultiLineString",coordinates:_62b};},"Polygon":function(_62e){var _62f=[];var _630=this.extract.LineString.apply(this,[_62e.shell]);_62f.push(_630.coordinates);for(var i=0;i<_62e.holes.length;++i){var hole=_62e.holes[i];var _631=this.extract.LineString.apply(this,[hole]);_62f.push(_631.coordinates);}return {type:"Polygon",coordinates:_62f};},"MultiPolygon":function(_632){var _633=[];for(var i=0;i<_632.geometries.length;++i){var _634=_632.geometries[i];var _635=this.extract.Polygon.apply(this,[_634]);_633.push(_635.coordinates);}return {type:"MultiPolygon",coordinates:_633};},"GeometryCollection":function(_636){var _637=[];for(var i=0;i<_636.geometries.length;++i){var _638=_636.geometries[i];var type=_638.CLASS_NAME.slice(10);_637.push(this.extract[type].apply(this,[_638]));}return {type:"GeometryCollection",geometries:_637};}};})();jsts.triangulate.quadedge.Vertex=function(){if(arguments.length===1){this.initFromCoordinate(arguments[0]);}else{this.initFromXY(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.Vertex.LEFT=0;jsts.triangulate.quadedge.Vertex.RIGHT=1;jsts.triangulate.quadedge.Vertex.BEYOND=2;jsts.triangulate.quadedge.Vertex.BEHIND=3;jsts.triangulate.quadedge.Vertex.BETWEEN=4;jsts.triangulate.quadedge.Vertex.ORIGIN=5;jsts.triangulate.quadedge.Vertex.DESTINATION=6;jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(x,y){this.p=new jsts.geom.Coordinate(x,y);};jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(_639){this.p=new jsts.geom.Coordinate(_639);};jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x;};jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y;};jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z;};jsts.triangulate.quadedge.Vertex.prototype.setZ=function(z){this.p.z=z;};jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p;};jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return "POINT ("+this.p.x+" "+this.p.y+")";};jsts.triangulate.quadedge.Vertex.prototype.equals=function(){if(arguments.length===1){return this.equalsExact(arguments[0]);}else{return this.equalsWithTolerance(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(_63a){return (this.p.x===_63a.getX()&&this.p.y===_63a.getY());};jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(_63b,_63c){return (this.p.distance(_63b.getCoordinate())<_63c);};jsts.triangulate.quadedge.Vertex.prototype.classify=function(p0,p1){var p2,a,b,sa;p2=this;a=p1.sub(p0);b=p2.sub(p0);sa=a.crossProduct(b);if(sa>0){return jsts.triangulate.quadedge.Vertex.LEFT;}if(sa<0){return jsts.triangulate.quadedge.Vertex.RIGHT;}if((a.getX()*b.getX()<0)||(a.getY()*b.getY()<0)){return jsts.triangulate.quadedge.Vertex.BEHIND;}if(a.magn()<b.magn()){return jsts.triangulate.quadedge.Vertex.BEYOND;}if(p0.equals(p2)){return jsts.triangulate.quadedge.Vertex.ORIGIN;}if(p1.equals(p2)){return jsts.triangulate.quadedge.Vertex.DESTINATION;}return jsts.triangulate.quadedge.Vertex.BETWEEN;};jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(v){return ((this.p.x*v.getY())-(this.p.y*v.getX()));};jsts.triangulate.quadedge.Vertex.prototype.dot=function(v){return ((this.p.x*v.getX())+(this.p.y*v.getY()));};jsts.triangulate.quadedge.Vertex.prototype.times=function(c){return new jsts.triangulate.quadedge.Vertex(c*this.p.x,c*this.p.y);};jsts.triangulate.quadedge.Vertex.prototype.sum=function(v){return new jsts.triangulate.quadedge.Vertex(this.p.x+v.getX(),this.p.y+v.getY());};jsts.triangulate.quadedge.Vertex.prototype.sub=function(v){return new jsts.triangulate.quadedge.Vertex(this.p.x-v.getX(),this.p.y-v.getY());};jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return (Math.sqrt((this.p.x*this.p.x)+(this.p.y*this.p.y)));};jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x);};jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(a,b,c){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(a.p,b.p,c.p,this.p);};jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(b,c){return ((b.p.x-this.p.x)*(c.p.y-this.p.y)-(b.p.y-this.p.y)*(c.p.x-this.p.x)>0);};jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(e){return this.isCCW(e.dest(),e.orig());};jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(e){return this.isCCW(e.orig(),e.dest());};jsts.triangulate.quadedge.Vertex.prototype.bisector=function(a,b){var dx,dy,l1,l2;dx=b.getX()-a.getX();dy=b.getY()-a.getY();l1=new jsts.algorithm.HCoordinate(a.getX()+(dx/2),a.getY()+(dy/2),1);l2=new jsts.algorithm.HCoordinate(a.getX()-dy+(dx/2),a.getY()+dx+(dy/2),1);return new jsts.algorithm.HCoordinate(l1,l2);};jsts.triangulate.quadedge.Vertex.prototype.distance=function(v1,v2){return v1.p.distance(v2.p);};jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(b,c){var x,_63d,_63e,el;x=this.circleCenter(b,c);_63d=this.distance(x,b);_63e=this.distance(this,b);el=this.distance(b,c);if(el<_63e){_63e=el;}el=this.distance(c,this);if(el<_63e){_63e=el;}return _63d/_63e;};jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(a){var xm,ym;xm=(this.p.x+a.getX())/2;ym=(this.p.y+a.getY())/2;return new jsts.triangulate.quadedge.Vertex(xm,ym);};jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(b,c){var a,cab,cbc,hcc,cc;a=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY());cab=this.bisector(a,b);cbc=this.bisector(b,c);hcc=new jsts.algorithm.HCoordinate(cab,cbc);cc=null;try{cc=new jsts.triangulate.quadedge.Vertex(hcc.getX(),hcc.getY());}catch(err){}return cc;};jsts.operation.valid.IsValidOp=function(_63f){this.parentGeometry=_63f;this.isSelfTouchingRingFormingHoleValid=false;this.validErr=null;};jsts.operation.valid.IsValidOp.isValid=function(arg){if(arguments[0] instanceof jsts.geom.Coordinate){if(isNaN(arg.x)){return false;}if(!isFinite(arg.x)&&!isNaN(arg.x)){return false;}if(isNaN(arg.y)){return false;}if(!isFinite(arg.y)&&!isNaN(arg.y)){return false;}return true;}else{var _640=new jsts.operation.valid.IsValidOp(arg);return _640.isValid();}};jsts.operation.valid.IsValidOp.findPtNotNode=function(_641,_642,_643){var _644=_643.findEdge(_642);var _645=_644.getEdgeIntersectionList();for(var i=0;i<_641.length;i++){var pt=_641[i];if(!_645.isIntersection(pt)){return pt;}}return null;};jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(_646){this.isSelfTouchingRingFormingHoleValid=_646;};jsts.operation.valid.IsValidOp.prototype.isValid=function(){this.checkValid(this.parentGeometry);return this.validErr==null;};jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){this.checkValid(this.parentGeometry);return this.validErr;};jsts.operation.valid.IsValidOp.prototype.checkValid=function(g){this.validErr=null;if(g.isEmpty()){return;}if(g instanceof jsts.geom.Point){this.checkValidPoint(g);}else{if(g instanceof jsts.geom.MultiPoint){this.checkValidMultiPoint(g);}else{if(g instanceof jsts.geom.LinearRing){this.checkValidLinearRing(g);}else{if(g instanceof jsts.geom.LineString){this.checkValidLineString(g);}else{if(g instanceof jsts.geom.Polygon){this.checkValidPolygon(g);}else{if(g instanceof jsts.geom.MultiPolygon){this.checkValidMultiPolygon(g);}else{if(g instanceof jsts.geom.GeometryCollection){this.checkValidGeometryCollection(g);}else{throw g.constructor;}}}}}}}};jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(g){this.checkInvalidCoordinates(g.getCoordinates());};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(g){this.checkInvalidCoordinates(g.getCoordinates());};jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(g){this.checkInvalidCoordinates(g.getCoordinates());if(this.validErr!=null){return;}var _647=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(_647);};jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(g){this.checkInvalidCoordinates(g.getCoordinates());if(this.validErr!=null){return;}this.checkClosedRing(g);if(this.validErr!=null){return;}var _648=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(_648);if(this.validErr!=null){return;}var li=new jsts.algorithm.RobustLineIntersector();_648.computeSelfNodes(li,true);this.checkNoSelfIntersectingRings(_648);};jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(g){this.checkInvalidCoordinates(g);if(this.validErr!=null){return;}this.checkClosedRings(g);if(this.validErr!=null){return;}var _649=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(_649);if(this.validErr!=null){return;}this.checkConsistentArea(_649);if(this.validErr!=null){return;}if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(_649);if(this.validErr!=null){return;}}this.checkHolesInShell(g,_649);if(this.validErr!=null){return;}this.checkHolesNotNested(g,_649);if(this.validErr!=null){return;}this.checkConnectedInteriors(_649);};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(g){var il=g.getNumGeometries();for(var i=0;i<il;i++){var p=g.getGeometryN(i);this.checkInvalidCoordinates(p);if(this.validErr!=null){return;}this.checkClosedRings(p);if(this.validErr!=null){return;}}var _64a=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(_64a);if(this.validErr!=null){return;}this.checkConsistentArea(_64a);if(this.validErr!=null){return;}if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(_64a);if(this.validErr!=null){return;}}for(var i=0;i<g.getNumGeometries();i++){var p=g.getGeometryN(i);this.checkHolesInShell(p,_64a);if(this.validErr!=null){return;}}for(var i=0;i<g.getNumGeometries();i++){var p=g.getGeometryN(i);this.checkHolesNotNested(p,_64a);if(this.validErr!=null){return;}}this.checkShellsNotNested(g,_64a);if(this.validErr!=null){return;}this.checkConnectedInteriors(_64a);};jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.checkValid(g);if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(arg){if(arg instanceof jsts.geom.Polygon){var poly=arg;this.checkInvalidCoordinates(poly.getExteriorRing().getCoordinates());if(this.validErr!=null){return;}for(var i=0;i<poly.getNumInteriorRing();i++){this.checkInvalidCoordinates(poly.getInteriorRingN(i).getCoordinates());if(this.validErr!=null){return;}}}else{var _64b=arg;for(var i=0;i<_64b.length;i++){if(!jsts.operation.valid.IsValidOp.isValid(_64b[i])){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,_64b[i]);return;}}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(poly){this.checkClosedRing(poly.getExteriorRing());if(this.validErr!=null){return;}for(var i=0;i<poly.getNumInteriorRing();i++){this.checkClosedRing(poly.getInteriorRingN(i));if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(ring){if(!ring.isClosed()){var pt=null;if(ring.getNumPoints()>=1){pt=ring.getCoordinateN(0);}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,pt);}};jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(_64c){if(_64c.hasTooFewPoints){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,_64c.getInvalidPoint());return;}};jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(_64d){var cat=new jsts.operation.valid.ConsistentAreaTester(_64d);var _64e=cat.isNodeConsistentArea();if(!_64e){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,cat.getInvalidPoint());return;}if(cat.hasDuplicateRings()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,cat.getInvalidPoint());}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(_64f){for(var i=_64f.getEdgeIterator();i.hasNext();){var e=i.next();this.checkNoSelfIntersectingRing(e.getEdgeIntersectionList());if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(_650){var _651=[];var _652=true;for(var i=_650.iterator();i.hasNext();){var ei=i.next();if(_652){_652=false;continue;}if(_651.indexOf(ei.coord)>=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,ei.coord);return;}else{_651.push(ei.coord);}}};jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(p,_653){var _654=p.getExteriorRing();var pir=new jsts.algorithm.MCPointInRing(_654);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);var _655=jsts.operation.valid.IsValidOp.findPtNotNode(hole.getCoordinates(),_654,_653);if(_655==null){return;}var _656=!pir.isInside(_655);if(_656){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,_655);return;}}};jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(p,_657){var _658=new jsts.operation.valid.IndexedNestedRingTester(_657);for(var i=0;i<p.getNumInteriorRing();i++){var _659=p.getInteriorRingN(i);_658.add(_659);}var _65a=_658.isNonNested();if(!_65a){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,_658.getNestedPoint());}};jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(mp,_65b){for(var i=0;i<mp.getNumGeometries();i++){var p=mp.getGeometryN(i);var _65c=p.getExteriorRing();for(var j=0;j<mp.getNumGeometries();j++){if(i==j){continue;}var p2=mp.getGeometryN(j);this.checkShellNotNested(_65c,p2,_65b);if(this.validErr!=null){return;}}}};jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(_65d,p,_65e){var _65f=_65d.getCoordinates();var _660=p.getExteriorRing();var _661=_660.getCoordinates();var _662=jsts.operation.valid.IsValidOp.findPtNotNode(_65f,_660,_65e);if(_662==null){return;}var _663=jsts.algorithm.CGAlgorithms.isPointInRing(_662,_661);if(!_663){return;}if(p.getNumInteriorRing()<=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,_662);return;}var _664=null;for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);_664=this.checkShellInsideHole(_65d,hole,_65e);if(_664==null){return;}}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,_664);};jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(_665,hole,_666){var _667=_665.getCoordinates();var _668=hole.getCoordinates();var _669=jsts.operation.valid.IsValidOp.findPtNotNode(_667,hole,_666);if(_669!=null){var _66a=jsts.algorithm.CGAlgorithms.isPointInRing(_669,_668);if(!_66a){return _669;}}var _66b=jsts.operation.valid.IsValidOp.findPtNotNode(_668,_665,_666);if(_66b!=null){var _66c=jsts.algorithm.CGAlgorithms.isPointInRing(_66b,_667);if(_66c){return _66b;}return null;}jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal");return null;};jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(_66d){var cit=new jsts.operation.valid.ConnectedInteriorTester(_66d);if(!cit.isInteriorsConnected()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,cit.getCoordinate());}};jsts.algorithm.RobustDeterminant=function(){};jsts.algorithm.RobustDeterminant.signOfDet2x2=function(x1,y1,x2,y2){var sign,swap,k,_66e;_66e=0;sign=1;if((x1===0)||(y2===0)){if((y1===0)||(x2===0)){return 0;}else{if(y1>0){if(x2>0){return -sign;}else{return sign;}}else{if(x2>0){return sign;}else{return -sign;}}}}if((y1===0)||(x2===0)){if(y2>0){if(x1>0){return sign;}else{return -sign;}}else{if(x1>0){return -sign;}else{return sign;}}}if(0<y1){if(0<y2){if(y1>y2){sign=-sign;swap=x1;x1=x2;x2=swap;swap=y1;y1=y2;y2=swap;}}else{if(y1<=-y2){sign=-sign;x2=-x2;y2=-y2;}else{swap=x1;x1=-x2;x2=swap;swap=y1;y1=-y2;y2=swap;}}}else{if(0<y2){if(-y1<=y2){sign=-sign;x1=-x1;y1=-y1;}else{swap=-x1;x1=x2;x2=swap;swap=-y1;y1=y2;y2=swap;}}else{if(y1>=y2){x1=-x1;y1=-y1;x2=-x2;y2=-y2;}else{sign=-sign;swap=-x1;x1=-x2;x2=swap;swap=-y1;y1=-y2;y2=swap;}}}if(0<x1){if(0<x2){if(x1>x2){return sign;}}else{return sign;}}else{if(0<x2){return -sign;}else{if(x1>=x2){sign=-sign;x1=-x1;x2=-x2;}else{return -sign;}}}while(true){_66e=_66e+1;k=Math.floor(x2/x1);x2=x2-k*x1;y2=y2-k*y1;if(y2<0){return -sign;}if(y2>y1){return sign;}if(x1>x2+x2){if(y1<y2+y2){return sign;}}else{if(y1>y2+y2){return -sign;}else{x2=x1-x2;y2=y1-y2;sign=-sign;}}if(y2===0){if(x2===0){return 0;}else{return -sign;}}if(x2===0){return sign;}k=Math.floor(x1/x2);x1=x1-k*x2;y1=y1-k*y2;if(y1<0){return sign;}if(y1>y2){return -sign;}if(x2>x1+x1){if(y2<y1+y1){return -sign;}}else{if(y2>y1+y1){return sign;}else{x1=x2-x1;y1=y2-y1;sign=-sign;}}if(y1===0){if(x1===0){return 0;}else{return sign;}}if(x1===0){return -sign;}}};jsts.algorithm.RobustDeterminant.orientationIndex=function(p1,p2,q){var dx1=p2.x-p1.x;var dy1=p2.y-p1.y;var dx2=q.x-p2.x;var dy2=q.y-p2.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(dx1,dy1,dx2,dy2);};jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4);this.subnode[0]=null;this.subnode[1]=null;this.subnode[2]=null;this.subnode[3]=null;this.items=[];};jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(env,_66f){var _670=-1;if(env.getMinX()>=_66f.x){if(env.getMinY()>=_66f.y){_670=3;}if(env.getMaxY()<=_66f.y){_670=1;}}if(env.getMaxX()<=_66f.x){if(env.getMinY()>=_66f.y){_670=2;}if(env.getMaxY()<=_66f.y){_670=0;}}return _670;};jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items;};jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return (this.items.length>0);};jsts.index.quadtree.NodeBase.prototype.add=function(item){this.items.push(item);};jsts.index.quadtree.NodeBase.prototype.remove=function(_671,item){if(!this.isSearchMatch(_671)){return false;}var _672=false,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){_672=this.subnode[i].remove(_671,item);if(_672){if(this.subnode[i].isPrunable()){this.subnode[i]=null;}break;}}}if(_672){return _672;}if(this.items.indexOf(item)!==-1){for(var i=this.items.length-1;i>=0;i--){if(this.items[i]===item){this.items.splice(i,1);}}_672=true;}return _672;};jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return !(this.hasChildren()||this.hasItems());};jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){return true;}}return false;};jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var _673=true;if(this.items.length>0){_673=false;}var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){if(!this.subnode[i].isEmpty()){_673=false;}}}return _673;};jsts.index.quadtree.NodeBase.prototype.addAllItems=function(_674){_674=_674.concat(this.items);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){_674=this.subnode[i].addAllItems(_674);}}return _674;};jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(_675,_676){if(!this.isSearchMatch(_675)){return;}_676=_676.concat(this.items);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){_676=this.subnode[i].addAllItemsFromOverlapping(_675,_676);}}};jsts.index.quadtree.NodeBase.prototype.visit=function(_677,_678){if(!this.isSearchMatch(_677)){return;}this.visitItems(_677,_678);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){this.subnode[i].visit(_677,_678);}}};jsts.index.quadtree.NodeBase.prototype.visitItems=function(env,_679){var i=0,il=this.items.length;for(i;i<il;i++){_679.visitItem(this.items[i]);}};jsts.index.quadtree.NodeBase.prototype.depth=function(){var _67a=0,i=0,sqd;for(i;i<4;i++){if(this.subnode[i]!==null){sqd=this.subnode[i].depth();if(sqd>_67a){_67a=sqd;}}}return _67a+1;};jsts.index.quadtree.NodeBase.prototype.size=function(){var _67b=0,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){_67b+=this.subnode[i].size();}}return _67b+this.items.length;};jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var _67c=0,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){_67c+=this.subnode[i].size();}}return _67c+1;};jsts.index.quadtree.Node=function(env,_67d){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.env=env;this.level=_67d;this.centre=new jsts.geom.Coordinate();this.centre.x=(env.getMinX()+env.getMaxX())/2;this.centre.y=(env.getMinY()+env.getMaxY())/2;};jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Node.createNode=function(env){var key,node;key=new jsts.index.quadtree.Key(env);node=new jsts.index.quadtree.Node(key.getEnvelope(),key.getLevel());return node;};jsts.index.quadtree.Node.createExpanded=function(node,_67e){var _67f=new jsts.geom.Envelope(_67e),_680;if(node!==null){_67f.expandToInclude(node.env);}_680=jsts.index.quadtree.Node.createNode(_67f);if(node!==null){_680.insertNode(node);}return _680;};jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env;};jsts.index.quadtree.Node.prototype.isSearchMatch=function(_681){return this.env.intersects(_681);};jsts.index.quadtree.Node.prototype.getNode=function(_682){var _683=this.getSubnodeIndex(_682,this.centre),node;if(_683!==-1){node=this.getSubnode(_683);return node.getNode(_682);}else{return this;}};jsts.index.quadtree.Node.prototype.find=function(_684){var _685=this.getSubnodeIndex(_684,this.centre),node;if(_685===-1){return this;}if(this.subnode[_685]!==null){node=this.subnode[_685];return node.find(_684);}return this;};jsts.index.quadtree.Node.prototype.insertNode=function(node){var _686=this.getSubnodeIndex(node.env,this.centre),_687;if(node.level===this.level-1){this.subnode[_686]=node;}else{_687=this.createSubnode(_686);_687.insertNode(node);this.subnode[_686]=_687;}};jsts.index.quadtree.Node.prototype.getSubnode=function(_688){if(this.subnode[_688]===null){this.subnode[_688]=this.createSubnode(_688);}return this.subnode[_688];};jsts.index.quadtree.Node.prototype.createSubnode=function(_689){var minx=0,maxx=0,miny=0,maxy=0,_68a,node;switch(_689){case 0:minx=this.env.getMinX();maxx=this.centre.x;miny=this.env.getMinY();maxy=this.centre.y;break;case 1:minx=this.centre.x;maxx=this.env.getMaxX();miny=this.env.getMinY();maxy=this.centre.y;break;case 2:minx=this.env.getMinX();maxx=this.centre.x;miny=this.centre.y;maxy=this.env.getMaxY();break;case 3:minx=this.centre.x;maxx=this.env.getMaxX();miny=this.centre.y;maxy=this.env.getMaxY();break;}_68a=new jsts.geom.Envelope(minx,maxx,miny,maxy);node=new jsts.index.quadtree.Node(_68a,this.level-1);return node;};(function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null;this.vertex=null;this.next=null;this.data=null;};var _68b=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(o,d){var q0,q1,q2,q3,base;q0=new _68b();q1=new _68b();q2=new _68b();q3=new _68b();q0.rot=q1;q1.rot=q2;q2.rot=q3;q3.rot=q0;q0.setNext(q0);q1.setNext(q3);q2.setNext(q2);q3.setNext(q1);base=q0;base.setOrig(o);base.setDest(d);return base;};jsts.triangulate.quadedge.QuadEdge.connect=function(a,b){var e=_68b.makeEdge(a.dest(),b.orig());_68b.splice(e,a.lNext());_68b.splice(e.sym(),b);return e;};jsts.triangulate.quadedge.QuadEdge.splice=function(a,b){var _68c,beta,t1,t2,t3,t4;_68c=a.oNext().rot;beta=b.oNext().rot;t1=b.oNext();t2=a.oNext();t3=beta.oNext();t4=_68c.oNext();a.setNext(t1);b.setNext(t2);_68c.setNext(t3);beta.setNext(t4);};jsts.triangulate.quadedge.QuadEdge.swap=function(e){var a,b;a=e.oPrev();b=e.sym().oPrev();_68b.splice(e,a);_68b.splice(e.sym(),b);_68b.splice(e,a.lNext());_68b.splice(e.sym(),b.lNext());e.setOrig(a.dest());e.setDest(b.dest());};jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){if(this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0){return this;}else{return this.sym();}};jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(data){this.data=data;};jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data;};jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null;};jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return this.rot!==null;};jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(next){this.next=next;};jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym();};jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot;};jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next;};jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot;};jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym();};jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot();};jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot;};jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym();};jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot();};jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext();};jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(o){this.vertex=o;};jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(d){this.sym().setOrig(d);};jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex;};jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig();};jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate());};jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(qe){if(this.equalsOriented(qe)){return true;}if(this.equalsOriented(qe.sym())){return true;}return false;};jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(qe){if(this.orig().getCoordinate().equals2D(qe.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(qe.dest().getCoordinate())){return true;}return false;};jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate());};jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var p0,p1;p0=this.vertex.getCoordinate();p1=this.dest().getCoordinate();return jsts.io.WKTWriter.toLineString(p0,p1);};})();(function(){var _68d=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(edge,p0,p1,_68e){this.edge=edge;if(p0&&p1){this.init(p0,p1);}if(_68e){this.label=_68e||null;}};jsts.geomgraph.EdgeEnd.prototype.edge=null;jsts.geomgraph.EdgeEnd.prototype.label=null;jsts.geomgraph.EdgeEnd.prototype.node=null;jsts.geomgraph.EdgeEnd.prototype.p0=null;jsts.geomgraph.EdgeEnd.prototype.p1=null;jsts.geomgraph.EdgeEnd.prototype.dx=null;jsts.geomgraph.EdgeEnd.prototype.dy=null;jsts.geomgraph.EdgeEnd.prototype.quadrant=null;jsts.geomgraph.EdgeEnd.prototype.init=function(p0,p1){this.p0=p0;this.p1=p1;this.dx=p1.x-p0.x;this.dy=p1.y-p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy);_68d.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found");};jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge;};jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label;};jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0;};jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1;};jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant;};jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx;};jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy;};jsts.geomgraph.EdgeEnd.prototype.setNode=function(node){this.node=node;};jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node;};jsts.geomgraph.EdgeEnd.prototype.compareTo=function(e){return this.compareDirection(e);};jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(e){if(this.dx===e.dx&&this.dy===e.dy){return 0;}if(this.quadrant>e.quadrant){return 1;}if(this.quadrant<e.quadrant){return -1;}return jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1);};jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(_68f){};})();jsts.operation.buffer.RightmostEdgeFinder=function(){};jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1;jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe;};jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord;};jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(_690){for(var i=_690.iterator();i.hasNext();){var de=i.next();if(!de.isForward()){continue;}this.checkForRightmostCoordinate(de);}jsts.util.Assert.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing");if(this.minIndex===0){this.findRightmostEdgeAtNode();}else{this.findRightmostEdgeAtVertex();}this.orientedDe=this.minDe;var _691=this.getRightmostSide(this.minDe,this.minIndex);if(_691==jsts.geomgraph.Position.LEFT){this.orientedDe=this.minDe.getSym();}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var node=this.minDe.getNode();var star=node.getEdges();this.minDe=star.getRightmostEdge();if(!this.minDe.isForward()){this.minDe=this.minDe.getSym();this.minIndex=this.minDe.getEdge().getCoordinates().length-1;}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var pts=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<pts.length,"rightmost point expected to be interior vertex of edge");var _692=pts[this.minIndex-1];var _693=pts[this.minIndex+1];var _694=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,_693,_692);var _695=false;if(_692.y<this.minCoord.y&&_693.y<this.minCoord.y&&_694===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE){_695=true;}else{if(_692.y>this.minCoord.y&&_693.y>this.minCoord.y&&_694===jsts.algorithm.CGAlgorithms.CLOCKWISE){_695=true;}}if(_695){this.minIndex=this.minIndex-1;}};jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(de){var _696=de.getEdge().getCoordinates();for(var i=0;i<_696.length-1;i++){if(this.minCoord===null||_696[i].x>this.minCoord.x){this.minDe=de;this.minIndex=i;this.minCoord=_696[i];}}};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(de,_697){var side=this.getRightmostSideOfSegment(de,_697);if(side<0){side=this.getRightmostSideOfSegment(de,_697-1);}if(side<0){this.minCoord=null;this.checkForRightmostCoordinate(de);}return side;};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(de,i){var e=de.getEdge();var _698=e.getCoordinates();if(i<0||i+1>=_698.length){return -1;}if(_698[i].y==_698[i+1].y){return -1;}var pos=jsts.geomgraph.Position.LEFT;if(_698[i].y<_698[i+1].y){pos=jsts.geomgraph.Position.RIGHT;}return pos;};(function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(_699){this.subdiv=_699;this.isUsingTolerance=_699.getTolerance()>0;};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(_69a){var i=0,il=_69a.length,v;for(i;i<il;i++){v=_69a[i];this.insertSite(v);}};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(v){var e,base,_69b,t;e=this.subdiv.locate(v);if(this.subdiv.isVertexOfEdge(e,v)){return e;}else{if(this.subdiv.isOnEdge(e,v.getCoordinate())){e=e.oPrev();this.subdiv.delete_jsts(e.oNext());}}base=this.subdiv.makeEdge(e.orig(),v);jsts.triangulate.quadedge.QuadEdge.splice(base,e);_69b=base;do{base=this.subdiv.connect(e,base.sym());e=base.oPrev();}while(e.lNext()!=_69b);do{t=e.oPrev();if(t.dest().rightOf(e)&&v.isInCircle(e.orig(),t.dest(),e.dest())){jsts.triangulate.quadedge.QuadEdge.swap(e);e=e.oPrev();}else{if(e.oNext()==_69b){return base;}else{e=e.oNext().lPrev();}}}while(true);};}());jsts.algorithm.CentroidArea=function(){this.basePt=null;this.triangleCent3=new jsts.geom.Coordinate();this.centSum=new jsts.geom.Coordinate();this.cg3=new jsts.geom.Coordinate();};jsts.algorithm.CentroidArea.prototype.basePt=null;jsts.algorithm.CentroidArea.prototype.triangleCent3=null;jsts.algorithm.CentroidArea.prototype.areasum2=0;jsts.algorithm.CentroidArea.prototype.cg3=null;jsts.algorithm.CentroidArea.prototype.centSum=null;jsts.algorithm.CentroidArea.prototype.totalLength=0;jsts.algorithm.CentroidArea.prototype.add=function(geom){if(geom instanceof jsts.geom.Polygon){var poly=geom;this.setBasePoint(poly.getExteriorRing().getCoordinateN(0));this.add3(poly);}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}else{if(geom instanceof Array){this.add2(geom);}}}};jsts.algorithm.CentroidArea.prototype.add2=function(ring){this.setBasePoint(ring[0]);this.addShell(ring);};jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();if(Math.abs(this.areasum2)>0){cent.x=this.cg3.x/3/this.areasum2;cent.y=this.cg3.y/3/this.areasum2;}else{cent.x=this.centSum.x/this.totalLength;cent.y=this.centSum.y/this.totalLength;}return cent;};jsts.algorithm.CentroidArea.prototype.setBasePoint=function(_69c){if(this.basePt==null){this.basePt=_69c;}};jsts.algorithm.CentroidArea.prototype.add3=function(poly){this.addShell(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.addHole(poly.getInteriorRingN(i).getCoordinates());}};jsts.algorithm.CentroidArea.prototype.addShell=function(pts){var _69d=!jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.basePt,pts[i],pts[i+1],_69d);}this.addLinearSegments(pts);};jsts.algorithm.CentroidArea.prototype.addHole=function(pts){var _69e=jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.basePt,pts[i],pts[i+1],_69e);}this.addLinearSegments(pts);};jsts.algorithm.CentroidArea.prototype.addTriangle=function(p0,p1,p2,_69f){var sign=(_69f)?1:-1;jsts.algorithm.CentroidArea.centroid3(p0,p1,p2,this.triangleCent3);var _6a0=jsts.algorithm.CentroidArea.area2(p0,p1,p2);this.cg3.x+=sign*_6a0*this.triangleCent3.x;this.cg3.y+=sign*_6a0*this.triangleCent3.y;this.areasum2+=sign*_6a0;};jsts.algorithm.CentroidArea.centroid3=function(p1,p2,p3,c){c.x=p1.x+p2.x+p3.x;c.y=p1.y+p2.y+p3.y;return;};jsts.algorithm.CentroidArea.area2=function(p1,p2,p3){return (p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y);};jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(pts){for(var i=0;i<pts.length-1;i++){var _6a1=pts[i].distance(pts[i+1]);this.totalLength+=_6a1;var midx=(pts[i].x+pts[i+1].x)/2;this.centSum.x+=_6a1*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.centSum.y+=_6a1*midy;}};jsts.geomgraph.index.SweepLineSegment=function(edge,_6a2){this.edge=edge;this.ptIndex=_6a2;this.pts=edge.getCoordinates();};jsts.geomgraph.index.SweepLineSegment.prototype.edge=null;jsts.geomgraph.index.SweepLineSegment.prototype.pts=null;jsts.geomgraph.index.SweepLineSegment.prototype.ptIndex=null;jsts.geomgraph.index.SweepLineSegment.prototype.getMinX=function(){var x1=this.pts[this.ptIndex].x;var x2=this.pts[this.ptIndex+1].x;if(x1<x2){return x1;}return x2;};jsts.geomgraph.index.SweepLineSegment.prototype.getMaxX=function(){var x1=this.pts[this.ptIndex].x;var x2=this.pts[this.ptIndex+1].x;if(x1>x2){return x1;}return x2;};jsts.geomgraph.index.SweepLineSegment.prototype.computeIntersections=function(ss,si){si.addIntersections(this.edge,this.ptIndex,ss.edge,ss.ptIndex);};jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.origin=new jsts.geom.Coordinate(0,0);};jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Root.prototype.insert=function(_6a3,item){var _6a4=this.getSubnodeIndex(_6a3,this.origin);if(_6a4===-1){this.add(item);return;}var node=this.subnode[_6a4];if(node===null||!node.getEnvelope().contains(_6a3)){var _6a5=jsts.index.quadtree.Node.createExpanded(node,_6a3);this.subnode[_6a4]=_6a5;}this.insertContained(this.subnode[_6a4],_6a3,item);};jsts.index.quadtree.Root.prototype.insertContained=function(tree,_6a6,item){var _6a7,_6a8,node;_6a7=jsts.index.IntervalSize.isZeroWidth(_6a6.getMinX(),_6a6.getMaxX());_6a8=jsts.index.IntervalSize.isZeroWidth(_6a6.getMinY(),_6a6.getMaxY());if(_6a7||_6a8){node=tree.find(_6a6);}else{node=tree.getNode(_6a6);}node.add(item);};jsts.index.quadtree.Root.prototype.isSearchMatch=function(_6a9){return true;};jsts.geomgraph.index.MonotoneChainIndexer=function(){};jsts.geomgraph.index.MonotoneChainIndexer.toIntArray=function(list){var _6aa=[];for(var i=list.iterator();i.hasNext();){var _6ab=i.next();_6aa.push(_6ab);}return _6aa;};jsts.geomgraph.index.MonotoneChainIndexer.prototype.getChainStartIndices=function(pts){var _6ac=0;var _6ad=new javascript.util.ArrayList();_6ad.add(_6ac);do{var last=this.findChainEnd(pts,_6ac);_6ad.add(last);_6ac=last;}while(_6ac<pts.length-1);var _6ae=jsts.geomgraph.index.MonotoneChainIndexer.toIntArray(_6ad);return _6ae;};jsts.geomgraph.index.MonotoneChainIndexer.prototype.findChainEnd=function(pts,_6af){var _6b0=jsts.geomgraph.Quadrant.quadrant(pts[_6af],pts[_6af+1]);var last=_6af+1;while(last<pts.length){var quad=jsts.geomgraph.Quadrant.quadrant(pts[last-1],pts[last]);if(quad!=_6b0){break;}last++;}return last-1;};jsts.noding.IntersectionAdder=function(li){this.li=li;};jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder;jsts.noding.IntersectionAdder.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1;};jsts.noding.IntersectionAdder.prototype._hasIntersection=false;jsts.noding.IntersectionAdder.prototype.hasProper=false;jsts.noding.IntersectionAdder.prototype.hasProperInterior=false;jsts.noding.IntersectionAdder.prototype.hasInterior=false;jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null;jsts.noding.IntersectionAdder.prototype.li=null;jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null;jsts.noding.IntersectionAdder.prototype.numIntersections=0;jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0;jsts.noding.IntersectionAdder.prototype.numProperIntersections=0;jsts.noding.IntersectionAdder.prototype.numTests=0;jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li;};jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint;};jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection;};jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper;};jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior;};jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior;};jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(e0,_6b1,e1,_6b2){if(e0==e1){if(this.li.getIntersectionNum()==1){if(jsts.noding.IntersectionAdder.isAdjacentSegments(_6b1,_6b2)){return true;}if(e0.isClosed()){var _6b3=e0.size()-1;if((_6b1===0&&_6b2===_6b3)||(_6b2===0&&_6b1===_6b3)){return true;}}}}return false;};jsts.noding.IntersectionAdder.prototype.processIntersections=function(e0,_6b4,e1,_6b5){if(e0===e1&&_6b4===_6b5){return;}this.numTests++;var p00=e0.getCoordinates()[_6b4];var p01=e0.getCoordinates()[_6b4+1];var p10=e1.getCoordinates()[_6b5];var p11=e1.getCoordinates()[_6b5+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){this.numIntersections++;if(this.li.isInteriorIntersection()){this.numInteriorIntersections++;this.hasInterior=true;}if(!this.isTrivialIntersection(e0,_6b4,e1,_6b5)){this._hasIntersection=true;e0.addIntersections(this.li,_6b4,0);e1.addIntersections(this.li,_6b5,1);if(this.li.isProper()){this.numProperIntersections++;this.hasProper=true;this.hasProperInterior=true;}}}};jsts.noding.IntersectionAdder.prototype.isDone=function(){return false;};jsts.operation.union.CascadedPolygonUnion=function(_6b6){this.inputPolys=_6b6;};jsts.operation.union.CascadedPolygonUnion.union=function(_6b7){var op=new jsts.operation.union.CascadedPolygonUnion(_6b7);return op.union();};jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys;jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null;jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4;jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(this.inputPolys.length===0){return null;}this.geomFactory=this.inputPolys[0].getFactory();var _6b8=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY);for(var i=0,l=this.inputPolys.length;i<l;i++){var item=this.inputPolys[i];_6b8.insert(item.getEnvelopeInternal(),item);}var _6b9=_6b8.itemsTree();var _6ba=this.unionTree(_6b9);return _6ba;};jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(_6bb){var _6bc=this.reduceToGeometries(_6bb);var _6bd=this.binaryUnion(_6bc);return _6bd;};jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(_6be,_6bf,end){_6bf=_6bf||0;end=end||_6be.length;if(end-_6bf<=1){var g0=this.getGeometry(_6be,_6bf);return this.unionSafe(g0,null);}else{if(end-_6bf===2){return this.unionSafe(this.getGeometry(_6be,_6bf),this.getGeometry(_6be,_6bf+1));}else{var mid=parseInt((end+_6bf)/2);var g0=this.binaryUnion(_6be,_6bf,mid);var g1=this.binaryUnion(_6be,mid,end);return this.unionSafe(g0,g1);}}};jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(list,_6c0){if(_6c0>=list.length){return null;}return list[_6c0];};jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(_6c1){var _6c2=[];for(var i=0,l=_6c1.length;i<l;i++){var o=_6c1[i],geom=null;if(o instanceof Array){geom=this.unionTree(o);}else{if(o instanceof jsts.geom.Geometry){geom=o;}}_6c2.push(geom);}return _6c2;};jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(g0,g1){if(g0===null&&g1===null){return null;}if(g0===null){return g1.clone();}if(g1===null){return g0.clone();}return this.unionOptimized(g0,g1);};jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(g0,g1){var _6c3=g0.getEnvelopeInternal(),_6c4=g1.getEnvelopeInternal();if(!_6c3.intersects(_6c4)){var _6c5=jsts.geom.util.GeometryCombiner.combine(g0,g1);return _6c5;}if(g0.getNumGeometries<=1&&g1.getNumGeometries<=1){return this.unionActual(g0,g1);}var _6c6=_6c3.intersection(_6c4);return this.unionUsingEnvelopeIntersection(g0,g1,_6c6);};jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(g0,g1,_6c7){var _6c8=new javascript.util.ArrayList();var _6c9=this.extractByEnvelope(_6c7,g0,_6c8);var _6ca=this.extractByEnvelope(_6c7,g1,_6c8);var _6cb=this.unionActual(_6c9,_6ca);_6c8.add(_6cb);var _6cc=jsts.geom.util.GeometryCombiner.combine(_6c8);return _6cc;};jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(env,geom,_6cd){var _6ce=new javascript.util.ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var elem=geom.getGeometryN(i);if(elem.getEnvelopeInternal().intersects(env)){_6ce.add(elem);}else{_6cd.add(elem);}}return this.geomFactory.buildGeometry(_6ce);};jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(g0,g1){return g0.union(g1);};(function(){jsts.geom.MultiPoint=function(_6cf,_6d0){this.geometries=_6cf||[];this.factory=_6d0;};jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint;jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null);};jsts.geom.MultiPoint.prototype.getGeometryN=function(n){return this.geometries[n];};jsts.geom.MultiPoint.prototype.equalsExact=function(_6d1,_6d2){if(!this.isEquivalentClass(_6d1)){return false;}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,_6d1,_6d2);};jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint";})();jsts.operation.buffer.OffsetCurveBuilder=function(_6d3,_6d4){this.precisionModel=_6d3;this.bufParams=_6d4;};jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0;jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(_6d5,_6d6){this.distance=_6d6;if(this.distance<0&&!this.bufParams.isSingleSided()){return null;}if(this.distance==0){return null;}var _6d7=Math.abs(this.distance);var _6d8=this.getSegGen(_6d7);if(_6d5.length<=1){this.computePointCurve(_6d5[0],_6d8);}else{if(this.bufParams.isSingleSided()){var _6d9=_6d6<0;this.computeSingleSidedBufferCurve(_6d5,_6d9,_6d8);}else{this.computeLineBufferCurve(_6d5,_6d8);}}var _6da=_6d8.getCoordinates();return _6da;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(_6db,side,_6dc){this.distance=_6dc;if(_6db.length<=2){return this.getLineCurve(_6db,_6dc);}if(this.distance==0){return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(_6db);}var _6dd=this.getSegGen(this.distance);this.computeRingBufferCurve(_6db,side,_6dd);return _6dd.getCoordinates();};jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(_6de,_6df){this.distance=_6df;if(this.distance===0){return null;}var _6e0=this.distance<0;var _6e1=Math.abs(this.distance);var _6e2=this.getSegGen(_6e1);if(_6de.length<=1){this.computePointCurve(_6de[0],_6e2);}else{this.computeOffsetCurve(_6de,_6e0,_6e2);}var _6e3=_6e2.getCoordinates();if(_6e0){_6e3.reverse();}return _6e3;};jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(pts){var copy=[];for(var i=0;i<pts.length;i++){copy.push(pts[i].clone());}return copy;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(_6e4){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,_6e4);};jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100;jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(_6e5){return _6e5/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR;};jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(pt,_6e6){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:_6e6.createCircle(pt);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:_6e6.createSquare(pt);break;}};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(_6e7,_6e8){var _6e9=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);var _6ea=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6e7,_6e9);var n1=_6ea.length-1;_6e8.initSideSegments(_6ea[0],_6ea[1],jsts.geomgraph.Position.LEFT);for(var i=2;i<=n1;i++){_6e8.addNextSegment(_6ea[i],true);}_6e8.addLastSegment();_6e8.addLineEndCap(_6ea[n1-1],_6ea[n1]);var _6eb=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6e7,-_6e9);var n2=_6eb.length-1;_6e8.initSideSegments(_6eb[n2],_6eb[n2-1],jsts.geomgraph.Position.LEFT);for(var i=n2-2;i>=0;i--){_6e8.addNextSegment(_6eb[i],true);}_6e8.addLastSegment();_6e8.addLineEndCap(_6eb[1],_6eb[0]);_6e8.closeRing();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(_6ec,_6ed,_6ee){var _6ef=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(_6ed){_6ee.addSegments(_6ec,true);var _6f0=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6ec,-_6ef);var n2=_6f0.length-1;_6ee.initSideSegments(_6f0[n2],_6f0[n2-1],jsts.geomgraph.Position.LEFT);_6ee.addFirstSegment();for(var i=n2-2;i>=0;i--){_6ee.addNextSegment(_6f0[i],true);}}else{_6ee.addSegments(_6ec,false);var _6f1=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6ec,_6ef);var n1=_6f1.length-1;_6ee.initSideSegments(_6f1[0],_6f1[1],jsts.geomgraph.Position.LEFT);_6ee.addFirstSegment();for(var i=2;i<=n1;i++){_6ee.addNextSegment(_6f1[i],true);}}_6ee.addLastSegment();_6ee.closeRing();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(_6f2,_6f3,_6f4){var _6f5=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(_6f3){var _6f6=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6f2,-_6f5);var n2=_6f6.length-1;_6f4.initSideSegments(_6f6[n2],_6f6[n2-1],jsts.geomgraph.Position.LEFT);_6f4.addFirstSegment();for(var i=n2-2;i>=0;i--){_6f4.addNextSegment(_6f6[i],true);}}else{var _6f7=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6f2,_6f5);var n1=_6f7.length-1;_6f4.initSideSegments(_6f7[0],_6f7[1],jsts.geomgraph.Position.LEFT);_6f4.addFirstSegment();for(var i=2;i<=n1;i++){_6f4.addNextSegment(_6f7[i],true);}}_6f4.addLastSegment();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(_6f8,side,_6f9){var _6fa=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(side===jsts.geomgraph.Position.RIGHT){_6fa=-_6fa;}var simp=jsts.operation.buffer.BufferInputLineSimplifier.simplify(_6f8,_6fa);var n=simp.length-1;_6f9.initSideSegments(simp[n-1],simp[0],side);for(var i=1;i<=n;i++){var _6fb=i!==1;_6f9.addNextSegment(simp[i],_6fb);}_6f9.closeRing();};(function(){var _6fc=function(_6fd,_6fe,_6ff){this.hotPixel=_6fd;this.parentEdge=_6fe;this.vertexIndex=_6ff;};_6fc.prototype=new jsts.index.chain.MonotoneChainSelectAction();_6fc.constructor=_6fc;_6fc.prototype.hotPixel=null;_6fc.prototype.parentEdge=null;_6fc.prototype.vertexIndex=null;_6fc.prototype._isNodeAdded=false;_6fc.prototype.isNodeAdded=function(){return this._isNodeAdded;};_6fc.prototype.select=function(mc,_700){var ss=mc.getContext();if(this.parentEdge!==null){if(ss===this.parentEdge&&_700===this.vertexIndex){return;}}this._isNodeAdded=this.hotPixel.addSnappedNode(ss,_700);};jsts.noding.snapround.MCIndexPointSnapper=function(_701){this.index=_701;};jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null;jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(_702,_703,_704){if(arguments.length===1){this.snap2.apply(this,arguments);return;}var _705=_702.getSafeEnvelope();var _706=new _6fc(_702,_703,_704);this.index.query(_705,{visitItem:function(_707){_707.select(_705,_706);}});return _706.isNodeAdded();};jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(_708){return this.snap(_708,null,-1);};})();(function(){var _709=function(){this.items=new javascript.util.ArrayList();this.subnode=[null,null];};_709.getSubnodeIndex=function(_70a,_70b){var _70c=-1;if(_70a.min>=_70b){_70c=1;}if(_70a.max<=_70b){_70c=0;}return _70c;};_709.prototype.getItems=function(){return this.items;};_709.prototype.add=function(item){this.items.add(item);};_709.prototype.addAllItems=function(_70d){_70d.addAll(this.items);var i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){this.subnode[i].addAllItems(_70d);}}return _70d;};_709.prototype.addAllItemsFromOverlapping=function(_70e,_70f){if(_70e!==null&&!this.isSearchMatch(_70e)){return;}_70f.addAll(this.items);if(this.subnode[0]!==null){this.subnode[0].addAllItemsFromOverlapping(_70e,_70f);}if(this.subnode[1]!==null){this.subnode[1].addAllItemsFromOverlapping(_70e,_70f);}};_709.prototype.remove=function(_710,item){if(!this.isSearchMatch(_710)){return false;}var _711=false,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){_711=this.subnode[i].remove(_710,item);if(_711){if(this.subnode[i].isPrunable()){this.subnode[i]=null;}break;}}}if(_711){return _711;}_711=this.items.remove(item);return _711;};_709.prototype.isPrunable=function(){return !(this.hasChildren()||this.hasItems());};_709.prototype.hasChildren=function(){var i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){return true;}}return false;};_709.prototype.hasItems=function(){return !this.items.isEmpty();};_709.prototype.depth=function(){var _712=0,i=0,il=2,sqd;for(i;i<il;i++){if(this.subnode[i]!==null){sqd=this.subnode[i].depth();if(sqd>_712){_712=sqd;}}}return _712+1;};_709.prototype.size=function(){var _713=0,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){_713+=this.subnode[i].size();}}return _713+this.items.size();};_709.prototype.nodeSize=function(){var _714=0,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){_714+=this.subnode[i].nodeSize();}}return _714+1;};jsts.index.bintree.NodeBase=_709;})();(function(){var _715=jsts.index.bintree.NodeBase;var Key=jsts.index.bintree.Key;var _716=jsts.index.bintree.Interval;var Node=function(_717,_718){this.items=new javascript.util.ArrayList();this.subnode=[null,null];this.interval=_717;this.level=_718;this.centre=(_717.getMin()+_717.getMax())/2;};Node.prototype=new _715();Node.constructor=Node;Node.createNode=function(_719){var key,node;key=new Key(_719);node=new Node(key.getInterval(),key.getLevel());return node;};Node.createExpanded=function(node,_71a){var _71b,_71c;_71b=new _716(_71a);if(node!==null){_71b.expandToInclude(node.interval);}_71c=Node.createNode(_71b);if(node!==null){_71c.insert(node);}return _71c;};Node.prototype.getInterval=function(){return this.interval;};Node.prototype.isSearchMatch=function(_71d){return _71d.overlaps(this.interval);};Node.prototype.getNode=function(_71e){var _71f=_715.getSubnodeIndex(_71e,this.centre),node;if(_71f!=-1){node=this.getSubnode(_71f);return node.getNode(_71e);}else{return this;}};Node.prototype.find=function(_720){var _721=_715.getSubnodeIndex(_720,this.centre),node;if(_721===-1){return this;}if(this.subnode[_721]!==null){node=this.subnode[_721];return node.find(_720);}return this;};Node.prototype.insert=function(node){var _722=_715.getSubnodeIndex(node.interval,this.centre),_723;if(node.level===this.level-1){this.subnode[_722]=node;}else{_723=this.createSubnode(_722);_723.insert(node);this.subnode[_722]=_723;}};Node.prototype.getSubnode=function(_724){if(this.subnode[_724]===null){this.subnode[_724]=this.createSubnode(_724);}return this.subnode[_724];};Node.prototype.createSubnode=function(_725){var min,max,_726,node;min=0;max=0;switch(_725){case 0:min=this.interval.getMin();max=this.centre;break;case 1:min=this.centre;max=this.interval.getMax();break;}_726=new _716(min,max);node=new Node(_726,this.level-1);return node;};jsts.index.bintree.Node=Node;})();(function(){var Node=jsts.index.bintree.Node;var _727=jsts.index.bintree.NodeBase;var Root=function(){this.subnode=[null,null];this.items=new javascript.util.ArrayList();};Root.prototype=new jsts.index.bintree.NodeBase();Root.constructor=Root;Root.origin=0;Root.prototype.insert=function(_728,item){var _729=_727.getSubnodeIndex(_728,Root.origin),node,_72a;if(_729===-1){this.add(item);return;}node=this.subnode[_729];if(node===null||!node.getInterval().contains(_728)){_72a=Node.createExpanded(node,_728);this.subnode[_729]=_72a;}this.insertContained(this.subnode[_729],_728,item);};Root.prototype.insertContained=function(tree,_72b,item){var _72c,node;_72c=jsts.index.IntervalSize.isZeroWidth(_72b.getMin(),_72b.getMax());node=_72c?tree.find(_72b):tree.getNode(_72b);node.add(item);};Root.prototype.isSearchMatch=function(_72d){return true;};jsts.index.bintree.Root=Root;})();jsts.geomgraph.Quadrant=function(){};jsts.geomgraph.Quadrant.NE=0;jsts.geomgraph.Quadrant.NW=1;jsts.geomgraph.Quadrant.SW=2;jsts.geomgraph.Quadrant.SE=3;jsts.geomgraph.Quadrant.quadrant=function(dx,dy){if(dx instanceof jsts.geom.Coordinate){return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);}if(dx===0&&dy===0){throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+dx+", "+dy+" )");}if(dx>=0){if(dy>=0){return jsts.geomgraph.Quadrant.NE;}else{return jsts.geomgraph.Quadrant.SE;}}else{if(dy>=0){return jsts.geomgraph.Quadrant.NW;}else{return jsts.geomgraph.Quadrant.SW;}}};jsts.geomgraph.Quadrant.quadrant2=function(p0,p1){if(p1.x===p0.x&&p1.y===p0.y){throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+p0);}if(p1.x>=p0.x){if(p1.y>=p0.y){return jsts.geomgraph.Quadrant.NE;}else{return jsts.geomgraph.Quadrant.SE;}}else{if(p1.y>=p0.y){return jsts.geomgraph.Quadrant.NW;}else{return jsts.geomgraph.Quadrant.SW;}}};jsts.geomgraph.Quadrant.isOpposite=function(_72e,_72f){if(_72e===_72f){return false;}var diff=(_72e-_72f+4)%4;if(diff===2){return true;}return false;};jsts.geomgraph.Quadrant.commonHalfPlane=function(_730,_731){if(_730===_731){return _730;}var diff=(_730-_731+4)%4;if(diff===2){return -1;}var min=(_730<_731)?_730:_731;var max=(_730>_731)?_730:_731;if(min===0&&max===3){return 3;}return min;};jsts.geomgraph.Quadrant.isInHalfPlane=function(quad,_732){if(_732===jsts.geomgraph.Quadrant.SE){return quad===jsts.geomgraph.Quadrant.SE||quad===jsts.geomgraph.Quadrant.SW;}return quad===_732||quad===_732+1;};jsts.geomgraph.Quadrant.isNorthern=function(quad){return quad===jsts.geomgraph.Quadrant.NE||quad===jsts.geomgraph.Quadrant.NW;};jsts.operation.valid.ConsistentAreaTester=function(_733){this.geomGraph=_733;this.li=new jsts.algorithm.RobustLineIntersector();this.nodeGraph=new jsts.operation.relate.RelateNodeGraph();this.invalidPoint=null;};jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint;};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var _734=this.geomGraph.computeSelfNodes(this.li,true);if(_734.hasProperIntersection()){this.invalidPoint=_734.getProperIntersectionPoint();return false;}this.nodeGraph.build(this.geomGraph);return this.isNodeEdgeAreaLabelsConsistent();};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var _735=this.nodeGraph.getNodeIterator();_735.hasNext();){var node=_735.next();if(!node.getEdges().isAreaLabelsConsistent(this.geomGraph)){this.invalidPoint=node.getCoordinate().clone();return false;}}return true;};jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var _736=this.nodeGraph.getNodeIterator();_736.hasNext();){var node=_736.next();for(var i=node.getEdges().iterator();i.hasNext();){var eeb=i.next();if(eeb.getEdgeEnds().length>1){invalidPoint=eeb.getEdge().getCoordinate(0);return true;}}}return false;};jsts.operation.relate.RelateNode=function(_737,_738){jsts.geomgraph.Node.apply(this,arguments);};jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node();jsts.operation.relate.RelateNode.prototype.computeIM=function(im){im.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0);};jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(im){this.edges.updateIM(im);};(function(){var _739=jsts.geom.Location;var _73a=jsts.geomgraph.Position;var _73b=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(edge,_73c){_73b.call(this,edge);this.depth=[0,-999,-999];this._isForward=_73c;if(_73c){this.init(edge.getCoordinate(0),edge.getCoordinate(1));}else{var n=edge.getNumPoints()-1;this.init(edge.getCoordinate(n),edge.getCoordinate(n-1));}this.computeDirectedLabel();};jsts.geomgraph.DirectedEdge.prototype=new _73b();jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge;jsts.geomgraph.DirectedEdge.depthFactor=function(_73d,_73e){if(_73d===_739.EXTERIOR&&_73e===_739.INTERIOR){return 1;}else{if(_73d===_739.INTERIOR&&_73e===_739.EXTERIOR){return -1;}}return 0;};jsts.geomgraph.DirectedEdge.prototype._isForward=null;jsts.geomgraph.DirectedEdge.prototype._isInResult=false;jsts.geomgraph.DirectedEdge.prototype._isVisited=false;jsts.geomgraph.DirectedEdge.prototype.sym=null;jsts.geomgraph.DirectedEdge.prototype.next=null;jsts.geomgraph.DirectedEdge.prototype.nextMin=null;jsts.geomgraph.DirectedEdge.prototype.edgeRing=null;jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null;jsts.geomgraph.DirectedEdge.prototype.depth=null;jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge;};jsts.geomgraph.DirectedEdge.prototype.setInResult=function(_73f){this._isInResult=_73f;};jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult;};jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited;};jsts.geomgraph.DirectedEdge.prototype.setVisited=function(_740){this._isVisited=_740;};jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(_741){this.edgeRing=_741;};jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing;};jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(_742){this.minEdgeRing=_742;};jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing;};jsts.geomgraph.DirectedEdge.prototype.getDepth=function(_743){return this.depth[_743];};jsts.geomgraph.DirectedEdge.prototype.setDepth=function(_744,_745){if(this.depth[_744]!==-999){if(this.depth[_744]!==_745){throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());}}this.depth[_744]=_745;};jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var _746=this.edge.getDepthDelta();if(!this._isForward){_746=-_746;}return _746;};jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(_747){this.setVisited(_747);this.sym.setVisited(_747);};jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym;};jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward;};jsts.geomgraph.DirectedEdge.prototype.setSym=function(de){this.sym=de;};jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next;};jsts.geomgraph.DirectedEdge.prototype.setNext=function(next){this.next=next;};jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin;};jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(_748){this.nextMin=_748;};jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var _749=this.label.isLine(0)||this.label.isLine(1);var _74a=!this.label.isArea(0)||this.label.allPositionsEqual(0,_739.EXTERIOR);var _74b=!this.label.isArea(1)||this.label.allPositionsEqual(1,_739.EXTERIOR);return _749&&_74a&&_74b;};jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){var _74c=true;for(var i=0;i<2;i++){if(!(this.label.isArea(i)&&this.label.getLocation(i,_73a.LEFT)===_739.INTERIOR&&this.label.getLocation(i,_73a.RIGHT)===_739.INTERIOR)){_74c=false;}}return _74c;};jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel());if(!this._isForward){this.label.flip();}};jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(_74d,_74e){var _74f=this.getEdge().getDepthDelta();if(!this._isForward){_74f=-_74f;}var _750=1;if(_74d===_73a.LEFT){_750=-1;}var _751=_73a.opposite(_74d);var _752=_74f*_750;var _753=_74e+_752;this.setDepth(_74d,_74e);this.setDepth(_751,_753);};})();jsts.operation.distance.DistanceOp=function(g0,g1,_754){this.ptLocator=new jsts.algorithm.PointLocator();this.geom=[];this.geom[0]=g0;this.geom[1]=g1;this.terminateDistance=_754;};jsts.operation.distance.DistanceOp.prototype.geom=null;jsts.operation.distance.DistanceOp.prototype.terminateDistance=0;jsts.operation.distance.DistanceOp.prototype.ptLocator=null;jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null;jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE;jsts.operation.distance.DistanceOp.distance=function(g0,g1){var _755=new jsts.operation.distance.DistanceOp(g0,g1,0);return _755.distance();};jsts.operation.distance.DistanceOp.isWithinDistance=function(g0,g1,_756){var _757=new jsts.operation.distance.DistanceOp(g0,g1,_756);return _757.distance()<=_756;};jsts.operation.distance.DistanceOp.nearestPoints=function(g0,g1){var _758=new jsts.operation.distance.DistanceOp(g0,g1,0);return _758.nearestPoints();};jsts.operation.distance.DistanceOp.prototype.distance=function(){if(this.geom[0]===null||this.geom[1]===null){throw new jsts.error.IllegalArgumentError("null geometries are not supported");}if(this.geom[0].isEmpty()||this.geom[1].isEmpty()){return 0;}this.computeMinDistance();return this.minDistance;};jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var _759=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return _759;};jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){this.computeMinDistance();return this.minDistanceLocation;};jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(_75a,flip){if(_75a[0]===null){return;}if(flip){this.minDistanceLocation[0]=_75a[1];this.minDistanceLocation[1]=_75a[0];}else{this.minDistanceLocation[0]=_75a[0];this.minDistanceLocation[1]=_75a[1];}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){if(arguments.length>0){this.computeMinDistance2.apply(this,arguments);return;}if(this.minDistanceLocation!==null){return;}this.minDistanceLocation=[];this.computeContainmentDistance();if(this.minDistance<=this.terminateDistance){return;}this.computeFacetDistance();};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(arguments.length===2){this.computeContainmentDistance2.apply(this,arguments);return;}else{if(arguments.length===3&&(!arguments[0] instanceof jsts.operation.distance.GeometryLocation)){this.computeContainmentDistance3.apply(this,arguments);return;}else{if(arguments.length===3){this.computeContainmentDistance4.apply(this,arguments);return;}}}var _75b=[];this.computeContainmentDistance2(0,_75b);if(this.minDistance<=this.terminateDistance){return;}this.computeContainmentDistance2(1,_75b);};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(_75c,_75d){var _75e=1-_75c;var _75f=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[_75c]);if(_75f.length>0){var _760=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[_75e]);this.computeContainmentDistance3(_760,_75f,_75d);if(this.minDistance<=this.terminateDistance){this.minDistanceLocation[_75e]=_75d[0];this.minDistanceLocation[_75c]=_75d[1];return;}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(locs,_761,_762){for(var i=0;i<locs.length;i++){var loc=locs[i];for(var j=0;j<_761.length;j++){this.computeContainmentDistance4(loc,_761[j],_762);if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(_763,poly,_764){var pt=_763.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(pt,poly)){this.minDistance=0;_764[0]=_763;_764[1]=new jsts.operation.distance.GeometryLocation(poly,pt);return;}};jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var _765=[];var _766=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]);var _767=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]);var pts0=jsts.geom.util.PointExtracter.getPoints(this.geom[0]);var pts1=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(_766,_767,_765);this.updateMinDistance(_765,false);if(this.minDistance<=this.terminateDistance){return;}_765[0]=null;_765[1]=null;this.computeMinDistanceLinesPoints(_766,pts1,_765);this.updateMinDistance(_765,false);if(this.minDistance<=this.terminateDistance){return;}_765[0]=null;_765[1]=null;this.computeMinDistanceLinesPoints(_767,pts0,_765);this.updateMinDistance(_765,true);if(this.minDistance<=this.terminateDistance){return;}_765[0]=null;_765[1]=null;this.computeMinDistancePoints(pts0,pts1,_765);this.updateMinDistance(_765,false);};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(_768,_769,_76a){for(var i=0;i<_768.length;i++){var _76b=_768[i];for(var j=0;j<_769.length;j++){var _76c=_769[j];this.computeMinDistance(_76b,_76c,_76a);if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(_76d,_76e,_76f){for(var i=0;i<_76d.length;i++){var pt0=_76d[i];for(var j=0;j<_76e.length;j++){var pt1=_76e[j];var dist=pt0.getCoordinate().distance(pt1.getCoordinate());if(dist<this.minDistance){this.minDistance=dist;_76f[0]=new jsts.operation.distance.GeometryLocation(pt0,0,pt0.getCoordinate());_76f[1]=new jsts.operation.distance.GeometryLocation(pt1,0,pt1.getCoordinate());}if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(_770,_771,_772){for(var i=0;i<_770.length;i++){var line=_770[i];for(var j=0;j<_771.length;j++){var pt=_771[j];this.computeMinDistance(line,pt,_772);if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(_773,_774,_775){if(_774 instanceof jsts.geom.Point){this.computeMinDistance3(_773,_774,_775);return;}if(_773.getEnvelopeInternal().distance(_774.getEnvelopeInternal())>this.minDistance){return;}var _776=_773.getCoordinates();var _777=_774.getCoordinates();for(var i=0;i<_776.length-1;i++){for(var j=0;j<_777.length-1;j++){var dist=jsts.algorithm.CGAlgorithms.distanceLineLine(_776[i],_776[i+1],_777[j],_777[j+1]);if(dist<this.minDistance){this.minDistance=dist;var seg0=new jsts.geom.LineSegment(_776[i],_776[i+1]);var seg1=new jsts.geom.LineSegment(_777[j],_777[j+1]);var _778=seg0.closestPoints(seg1);_775[0]=new jsts.operation.distance.GeometryLocation(_773,i,_778[0]);_775[1]=new jsts.operation.distance.GeometryLocation(_774,j,_778[1]);}if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(line,pt,_779){if(line.getEnvelopeInternal().distance(pt.getEnvelopeInternal())>this.minDistance){return;}var _77a=line.getCoordinates();var _77b=pt.getCoordinate();for(var i=0;i<_77a.length-1;i++){var dist=jsts.algorithm.CGAlgorithms.distancePointLine(_77b,_77a[i],_77a[i+1]);if(dist<this.minDistance){this.minDistance=dist;var seg=new jsts.geom.LineSegment(_77a[i],_77a[i+1]);var _77c=seg.closestPoint(_77b);_779[0]=new jsts.operation.distance.GeometryLocation(line,i,_77c);_779[1]=new jsts.operation.distance.GeometryLocation(pt,0,_77b);}if(this.minDistance<=this.terminateDistance){return;}}};jsts.index.strtree.SIRtree=function(_77d){_77d=_77d||10;jsts.index.strtree.AbstractSTRtree.call(this,_77d);};jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree;jsts.index.strtree.SIRtree.prototype.comperator={compare:function(o1,o2){return o1.getBounds().getCentre()-o2.getBounds().getCentre();}};jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(_77e,_77f){return _77e.intersects(_77f);}};jsts.index.strtree.SIRtree.prototype.createNode=function(_780){var _781=function(_782){jsts.index.strtree.AbstractNode.apply(this,arguments);};_781.prototype=new jsts.index.strtree.AbstractNode();_781.constructor=_781;_781.prototype.computeBounds=function(){var _783=null,_784=this.getChildBoundables(),_785;for(var i=0,l=_784.length;i<l;i++){_785=_784[i];if(_783===null){_783=new jsts.index.strtree.Interval(_785.getBounds());}else{_783.expandToInclude(_785.getBounds());}}return _783;};return _781;};jsts.index.strtree.SIRtree.prototype.insert=function(x1,x2,item){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(x1,x2),Math.max(x1,x2)),item);};jsts.index.strtree.SIRtree.prototype.query=function(x1,x2){x2=x2||x1;jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(x1,x2),Math.max(x1,x2)));};jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp;};jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator;};jsts.simplify.DouglasPeuckerSimplifier=function(_786){this.inputGeom=_786;this.isEnsureValidTopology=true;};jsts.simplify.DouglasPeuckerSimplifier.prototype.inputGeom=null;jsts.simplify.DouglasPeuckerSimplifier.prototype.distanceTolerance=null;jsts.simplify.DouglasPeuckerSimplifier.prototype.isEnsureValidTopology=null;jsts.simplify.DouglasPeuckerSimplifier.simplify=function(geom,_787){var tss=new jsts.simplify.DouglasPeuckerSimplifier(geom);tss.setDistanceTolerance(_787);return tss.getResultGeometry();};jsts.simplify.DouglasPeuckerSimplifier.prototype.setDistanceTolerance=function(_788){if(_788<0){throw "Tolerance must be non-negative";}this.distanceTolerance=_788;};jsts.simplify.DouglasPeuckerSimplifier.prototype.setEnsureValid=function(_789){this.isEnsureValidTopology=_789;};jsts.simplify.DouglasPeuckerSimplifier.prototype.getResultGeometry=function(){if(this.inputGeom.isEmpty()){return this.inputGeom.clone();}return (new jsts.simplify.DPTransformer(this.distanceTolerance,this.isEnsureValidTopology)).transform(this.inputGeom);};(function(){jsts.operation.predicate.RectangleContains=function(_78a){this.rectEnv=_78a.getEnvelopeInternal();};jsts.operation.predicate.RectangleContains.contains=function(_78b,b){var rc=new jsts.operation.predicate.RectangleContains(_78b);return rc.contains(b);};jsts.operation.predicate.RectangleContains.prototype.rectEnv=null;jsts.operation.predicate.RectangleContains.prototype.contains=function(geom){if(!this.rectEnv.contains(geom.getEnvelopeInternal())){return false;}if(this.isContainedInBoundary(geom)){return false;}return true;};jsts.operation.predicate.RectangleContains.prototype.isContainedInBoundary=function(geom){if(geom instanceof jsts.geom.Polygon){return false;}if(geom instanceof jsts.geom.Point){return this.isPointContainedInBoundary(geom.getCoordinate());}if(geom instanceof jsts.geom.LineString){return this.isLineStringContainedInBoundary(geom);}for(var i=0;i<geom.getNumGeometries();i++){var comp=geom.getGeometryN(i);if(!this.isContainedInBoundary(comp)){return false;}}return true;};jsts.operation.predicate.RectangleContains.prototype.isPointContainedInBoundary=function(pt){return pt.x==this.rectEnv.getMinX()||pt.x==this.rectEnv.getMaxX()||pt.y==this.rectEnv.getMinY()||pt.y==this.rectEnv.getMaxY();};jsts.operation.predicate.RectangleContains.prototype.isLineStringContainedInBoundary=function(line){var seq=line.getCoordinateSequence();for(var i=0;i<seq.length-1;i++){var p0=seq[i];var p1=seq[i+1];if(!this.isLineSegmentContainedInBoundary(p0,p1)){return false;}}return true;};jsts.operation.predicate.RectangleContains.prototype.isLineSegmentContainedInBoundary=function(p0,p1){if(p0.equals(p1)){return this.isPointContainedInBoundary(p0);}if(p0.x==p1.x){if(p0.x==this.rectEnv.getMinX()||p0.x==this.rectEnv.getMaxX()){return true;}}else{if(p0.y==p1.y){if(p0.y==this.rectEnv.getMinY()||p0.y==this.rectEnv.getMaxY()){return true;}}}return false;};})();(function(){var _78c=jsts.geom.Location;var _78d=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var i=0;i<2;i++){for(var j=0;j<3;j++){this.depth[i][j]=jsts.geomgraph.Depth.NULL_VALUE;}}};jsts.geomgraph.Depth.NULL_VALUE=-1;jsts.geomgraph.Depth.depthAtLocation=function(_78e){if(_78e===_78c.EXTERIOR){return 0;}if(_78e===_78c.INTERIOR){return 1;}return jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.depth=null;jsts.geomgraph.Depth.prototype.getDepth=function(_78f,_790){return this.depth[_78f][_790];};jsts.geomgraph.Depth.prototype.setDepth=function(_791,_792,_793){this.depth[_791][_792]=_793;};jsts.geomgraph.Depth.prototype.getLocation=function(_794,_795){if(this.depth[_794][_795]<=0){return _78c.EXTERIOR;}return _78c.INTERIOR;};jsts.geomgraph.Depth.prototype.add=function(_796,_797,_798){if(_798===_78c.INTERIOR){this.depth[_796][_797]++;}};jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0){return this.isNull2.apply(this,arguments);}for(var i=0;i<2;i++){for(var j=0;j<3;j++){if(this.depth[i][j]!==jsts.geomgraph.Depth.NULL_VALUE){return false;}}}return true;};jsts.geomgraph.Depth.prototype.isNull2=function(_799){if(arguments.length>1){return this.isNull3.apply(this,arguments);}return this.depth[_799][1]==jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.isNull3=function(_79a,_79b){return this.depth[_79a][_79b]==jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.add=function(lbl){for(var i=0;i<2;i++){for(var j=1;j<3;j++){var loc=lbl.getLocation(i,j);if(loc===_78c.EXTERIOR||loc===_78c.INTERIOR){if(this.isNull(i,j)){this.depth[i][j]=jsts.geomgraph.Depth.depthAtLocation(loc);}else{this.depth[i][j]+=jsts.geomgraph.Depth.depthAtLocation(loc);}}}}};jsts.geomgraph.Depth.prototype.getDelta=function(_79c){return this.depth[_79c][_78d.RIGHT]-this.depth[_79c][_78d.LEFT];};jsts.geomgraph.Depth.prototype.normalize=function(){for(var i=0;i<2;i++){if(!this.isNull(i)){var _79d=this.depth[i][1];if(this.depth[i][2]<_79d){_79d=this.depth[i][2];}if(_79d<0){_79d=0;}for(var j=1;j<3;j++){var _79e=0;if(this.depth[i][j]>_79d){_79e=1;}this.depth[i][j]=_79e;}}}};jsts.geomgraph.Depth.prototype.toString=function(){return "A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2];};})();jsts.algorithm.BoundaryNodeRule=function(){};jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(_79f){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.Mod2BoundaryNodeRule=function(){};jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule();jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(_7a0){return _7a0%2===1;};jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule();jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE;jsts.operation.distance.GeometryLocation=function(_7a1,_7a2,pt){this.component=_7a1;this.segIndex=_7a2;this.pt=pt;};jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1;jsts.operation.distance.GeometryLocation.prototype.component=null;jsts.operation.distance.GeometryLocation.prototype.segIndex=null;jsts.operation.distance.GeometryLocation.prototype.pt=null;jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component;};jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex;};jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt;};jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA;};jsts.geom.util.PointExtracter=function(pts){this.pts=pts;};jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PointExtracter.prototype.pts=null;jsts.geom.util.PointExtracter.getPoints=function(geom,list){if(list===undefined){list=[];}if(geom instanceof jsts.geom.Point){list.push(geom);}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){geom.apply(new jsts.geom.util.PointExtracter(list));}}return list;};jsts.geom.util.PointExtracter.prototype.filter=function(geom){if(geom instanceof jsts.geom.Point){this.pts.push(geom);}};(function(){var _7a3=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory());};jsts.operation.relate.RelateNodeGraph.prototype.nodes=null;jsts.operation.relate.RelateNodeGraph.prototype.build=function(_7a4){this.computeIntersectionNodes(_7a4,0);this.copyNodesAndLabels(_7a4,0);var _7a5=new jsts.operation.relate.EdgeEndBuilder();var _7a6=_7a5.computeEdgeEnds(_7a4.getEdgeIterator());this.insertEdgeEnds(_7a6);};jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(_7a7,_7a8){for(var _7a9=_7a7.getEdgeIterator();_7a9.hasNext();){var e=_7a9.next();var eLoc=e.getLabel().getLocation(_7a8);for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();var n=this.nodes.addNode(ei.coord);if(eLoc===_7a3.BOUNDARY){n.setLabelBoundary(_7a8);}else{if(n.getLabel().isNull(_7a8)){n.setLabel(_7a8,_7a3.INTERIOR);}}}}};jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(_7aa,_7ab){for(var _7ac=_7aa.getNodeIterator();_7ac.hasNext();){var _7ad=_7ac.next();var _7ae=this.nodes.addNode(_7ad.getCoordinate());_7ae.setLabel(_7ab,_7ad.getLabel().getLocation(_7ab));}};jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(ee){for(var i=ee.iterator();i.hasNext();){var e=i.next();this.nodes.add(e);}};jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator();};})();jsts.geomgraph.index.SimpleSweepLineIntersector=function(){};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.events=[];jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.nOverlaps=null;jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections=function(_7af,si,_7b0){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}if(_7b0){this.add(_7af,null);}else{this.add(_7af);}this.computeIntersections3(si);};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections2=function(_7b1,_7b2,si){this.add(_7b1,_7b1);this.add(_7b2,_7b2);this.computeIntersections3(si);};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add=function(edge,_7b3){if(edge instanceof javascript.util.List){this.add2.apply(this,arguments);return;}var pts=edge.getCoordinates();for(var i=0;i<pts.length-1;i++){var ss=new jsts.geomgraph.index.SweepLineSegment(edge,i);var _7b4=new jsts.geomgraph.index.SweepLineEvent(ss.getMinX(),ss,_7b3);this.events.push(_7b4);this.events.push(new jsts.geomgraph.index.SweepLineEvent(ss.getMaxX(),_7b4));}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add2=function(_7b5,_7b6){for(var i=_7b5.iterator();i.hasNext();){var edge=i.next();if(_7b6){this.add(edge,_7b6);}else{this.add(edge,edge);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(a,b){return a.compareTo(b);});for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isDelete()){ev.getInsertEvent().setDeleteEventIndex(i);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections3=function(si){this.nOverlaps=0;this.prepareEvents();for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isInsert()){this.processOverlaps(i,ev.getDeleteEventIndex(),ev,si);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.processOverlaps=function(_7b7,end,ev0,si){var ss0=ev0.getObject();for(var i=_7b7;i<end;i++){var ev1=this.events[i];if(ev1.isInsert()){var ss1=ev1.getObject();if(!ev0.isSameLabel(ev1)){ss0.computeIntersections(ss1,si);this.nOverlaps++;}}}};jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null;this.tolerance=0;this.subdiv=null;this.clipEnv=null;this.diagramEnv=null;};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var arg=arguments[0];if(arg instanceof jsts.geom.Geometry||arg instanceof jsts.geom.Coordinate||arg instanceof jsts.geom.Point||arg instanceof jsts.geom.MultiPoint||arg instanceof jsts.geom.LineString||arg instanceof jsts.geom.MultiLineString||arg instanceof jsts.geom.LinearRing||arg instanceof jsts.geom.Polygon||arg instanceof jsts.geom.MultiPolygon){this.setSitesByGeometry(arg);}else{this.setSitesByArray(arg);}};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(geom){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(_7b8){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(_7b8);};jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(_7b9){this.clipEnv=_7b9;};jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(_7ba){this.tolerance=_7ba;};jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(this.subdiv!==null){return;}var _7bb,_7bc,_7bd,_7be;_7bb=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);this.diagramEnv=_7bb;_7bc=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(_7bc);if(this.clipEnv!==null){this.diagramEnv.expandToInclude(this.clipEnv);}_7bd=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(_7bb,this.tolerance);_7be=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);_7be.insertSites(_7bd);};jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv;};jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(_7bf){this.create();var _7c0=this.subdiv.getVoronoiDiagram(_7bf);return this.clipGeometryCollection(_7c0,this.diagramEnv);};jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(geom,_7c1){var _7c2,_7c3,i,il,g,_7c4;_7c2=geom.getFactory().toGeometry(_7c1);_7c3=[];i=0,il=geom.getNumGeometries();for(i;i<il;i++){g=geom.getGeometryN(i);_7c4=null;if(_7c1.contains(g.getEnvelopeInternal())){_7c4=g;}else{if(_7c1.intersects(g.getEnvelopeInternal())){_7c4=_7c2.intersection(g);}}if(_7c4!==null&&!_7c4.isEmpty()){_7c3.push(_7c4);}}return geom.getFactory().createGeometryCollection(_7c3);};jsts.operation.valid.IndexedNestedRingTester=function(_7c5){this.graph=_7c5;this.rings=new javascript.util.ArrayList();this.totalEnv=new jsts.geom.Envelope();this.index=null;this.nestedPt=null;};jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt;};jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(ring){this.rings.add(ring);this.totalEnv.expandToInclude(ring.getEnvelopeInternal());};jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var i=0;i<this.rings.size();i++){var _7c6=this.rings.get(i);var _7c7=_7c6.getCoordinates();var _7c8=this.index.query(_7c6.getEnvelopeInternal());for(var j=0;j<_7c8.length;j++){var _7c9=_7c8[j];var _7ca=_7c9.getCoordinates();if(_7c6==_7c9){continue;}if(!_7c6.getEnvelopeInternal().intersects(_7c9.getEnvelopeInternal())){continue;}var _7cb=jsts.operation.valid.IsValidOp.findPtNotNode(_7c7,_7c9,this.graph);if(_7cb==null){continue;}var _7cc=jsts.algorithm.CGAlgorithms.isPointInRing(_7cb,_7ca);if(_7cc){this.nestedPt=_7cb;return false;}}}return true;};jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree();for(var i=0;i<this.rings.size();i++){var ring=this.rings.get(i);var env=ring.getEnvelopeInternal();this.index.insert(env,ring);}};jsts.geomgraph.index.MonotoneChain=function(mce,_7cd){this.mce=mce;this.chainIndex=_7cd;};jsts.geomgraph.index.MonotoneChain.prototype.mce=null;jsts.geomgraph.index.MonotoneChain.prototype.chainIndex=null;jsts.geomgraph.index.MonotoneChain.prototype.computeIntersections=function(mc,si){this.mce.computeIntersectsForChain(this.chainIndex,mc.mce,mc.chainIndex,si);};jsts.noding.SegmentNode=function(_7ce,_7cf,_7d0,_7d1){this.segString=_7ce;this.coord=new jsts.geom.Coordinate(_7cf);this.segmentIndex=_7d0;this.segmentOctant=_7d1;this._isInterior=!_7cf.equals2D(_7ce.getCoordinate(_7d0));};jsts.noding.SegmentNode.prototype.segString=null;jsts.noding.SegmentNode.prototype.coord=null;jsts.noding.SegmentNode.prototype.segmentIndex=null;jsts.noding.SegmentNode.prototype.segmentOctant=null;jsts.noding.SegmentNode.prototype._isInterior=null;jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord;};jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior;};jsts.noding.SegmentNode.prototype.isEndPoint=function(_7d2){if(this.segmentIndex===0&&!this._isInterior){return true;}if(this.segmentIndex===this.maxSegmentIndex){return true;}return false;};jsts.noding.SegmentNode.prototype.compareTo=function(obj){var _7d3=obj;if(this.segmentIndex<_7d3.segmentIndex){return -1;}if(this.segmentIndex>_7d3.segmentIndex){return 1;}if(this.coord.equals2D(_7d3.coord)){return 0;}return jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,_7d3.coord);};(function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory);};jsts.io.GeoJSONWriter.prototype.write=function(_7d4){var _7d5=this.parser.write(_7d4);return _7d5;};})();jsts.io.OpenLayersParser=function(_7d6){this.geometryFactory=_7d6||new jsts.geom.GeometryFactory();};jsts.io.OpenLayersParser.prototype.read=function(_7d7){if(_7d7.CLASS_NAME==="OpenLayers.Geometry.Point"){return this.convertFromPoint(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.LineString"){return this.convertFromLineString(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.LinearRing"){return this.convertFromLinearRing(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.Polygon"){return this.convertFromPolygon(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.MultiPoint"){return this.convertFromMultiPoint(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.MultiLineString"){return this.convertFromMultiLineString(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.MultiPolygon"){return this.convertFromMultiPolygon(_7d7);}else{if(_7d7.CLASS_NAME==="OpenLayers.Geometry.Collection"){return this.convertFromCollection(_7d7);}}}}}}}}};jsts.io.OpenLayersParser.prototype.convertFromPoint=function(_7d8){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(_7d8.x,_7d8.y));};jsts.io.OpenLayersParser.prototype.convertFromLineString=function(_7d9){var i;var _7da=[];for(i=0;i<_7d9.components.length;i++){_7da.push(new jsts.geom.Coordinate(_7d9.components[i].x,_7d9.components[i].y));}return this.geometryFactory.createLineString(_7da);};jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(_7db){var i;var _7dc=[];for(i=0;i<_7db.components.length;i++){_7dc.push(new jsts.geom.Coordinate(_7db.components[i].x,_7db.components[i].y));}return this.geometryFactory.createLinearRing(_7dc);};jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(_7dd){var i;var _7de=null;var _7df=[];for(i=0;i<_7dd.components.length;i++){var _7e0=this.convertFromLinearRing(_7dd.components[i]);if(i===0){_7de=_7e0;}else{_7df.push(_7e0);}}return this.geometryFactory.createPolygon(_7de,_7df);};jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(_7e1){var i;var _7e2=[];for(i=0;i<_7e1.components.length;i++){_7e2.push(this.convertFromPoint(_7e1.components[i]));}return this.geometryFactory.createMultiPoint(_7e2);};jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(_7e3){var i;var _7e4=[];for(i=0;i<_7e3.components.length;i++){_7e4.push(this.convertFromLineString(_7e3.components[i]));}return this.geometryFactory.createMultiLineString(_7e4);};jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(_7e5){var i;var _7e6=[];for(i=0;i<_7e5.components.length;i++){_7e6.push(this.convertFromPolygon(_7e5.components[i]));}return this.geometryFactory.createMultiPolygon(_7e6);};jsts.io.OpenLayersParser.prototype.convertFromCollection=function(_7e7){var i;var _7e8=[];for(i=0;i<_7e7.components.length;i++){_7e8.push(this.read(_7e7.components[i]));}return this.geometryFactory.createGeometryCollection(_7e8);};jsts.io.OpenLayersParser.prototype.write=function(_7e9){if(_7e9.CLASS_NAME==="jsts.geom.Point"){return this.convertToPoint(_7e9.coordinate);}else{if(_7e9.CLASS_NAME==="jsts.geom.LineString"){return this.convertToLineString(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.LinearRing"){return this.convertToLinearRing(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.Polygon"){return this.convertToPolygon(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.MultiPoint"){return this.convertToMultiPoint(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.MultiLineString"){return this.convertToMultiLineString(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.MultiPolygon"){return this.convertToMultiPolygon(_7e9);}else{if(_7e9.CLASS_NAME==="jsts.geom.GeometryCollection"){return this.convertToCollection(_7e9);}}}}}}}}};jsts.io.OpenLayersParser.prototype.convertToPoint=function(_7ea){return new OpenLayers.Geometry.Point(_7ea.x,_7ea.y);};jsts.io.OpenLayersParser.prototype.convertToLineString=function(_7eb){var i;var _7ec=[];for(i=0;i<_7eb.points.length;i++){var _7ed=_7eb.points[i];_7ec.push(this.convertToPoint(_7ed));}return new OpenLayers.Geometry.LineString(_7ec);};jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(_7ee){var i;var _7ef=[];for(i=0;i<_7ee.points.length;i++){var _7f0=_7ee.points[i];_7ef.push(this.convertToPoint(_7f0));}return new OpenLayers.Geometry.LinearRing(_7ef);};jsts.io.OpenLayersParser.prototype.convertToPolygon=function(_7f1){var i;var _7f2=[];_7f2.push(this.convertToLinearRing(_7f1.shell));for(i=0;i<_7f1.holes.length;i++){var ring=_7f1.holes[i];_7f2.push(this.convertToLinearRing(ring));}return new OpenLayers.Geometry.Polygon(_7f2);};jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(_7f3){var i;var _7f4=[];for(i=0;i<_7f3.geometries.length;i++){var _7f5=_7f3.geometries[i].coordinate;_7f4.push(new OpenLayers.Geometry.Point(_7f5.x,_7f5.y));}return new OpenLayers.Geometry.MultiPoint(_7f4);};jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(_7f6){var i;var _7f7=[];for(i=0;i<_7f6.geometries.length;i++){_7f7.push(this.convertToLineString(_7f6.geometries[i]));}return new OpenLayers.Geometry.MultiLineString(_7f7);};jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(_7f8){var i;var _7f9=[];for(i=0;i<_7f8.geometries.length;i++){_7f9.push(this.convertToPolygon(_7f8.geometries[i]));}return new OpenLayers.Geometry.MultiPolygon(_7f9);};jsts.io.OpenLayersParser.prototype.convertToCollection=function(_7fa){var i;var _7fb=[];for(i=0;i<_7fa.geometries.length;i++){var _7fc=_7fa.geometries[i];var _7fd=this.write(_7fc);_7fb.push(_7fd);}return new OpenLayers.Geometry.Collection(_7fb);};jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root();this.minExtent=1;};jsts.index.quadtree.Quadtree.ensureExtent=function(_7fe,_7ff){var minx,maxx,miny,maxy;minx=_7fe.getMinX();maxx=_7fe.getMaxX();miny=_7fe.getMinY();maxy=_7fe.getMaxY();if(minx!==maxx&&miny!==maxy){return _7fe;}if(minx===maxx){minx=minx-(_7ff/2);maxx=minx+(_7ff/2);}if(miny===maxy){miny=miny-(_7ff/2);maxy=miny+(_7ff/2);}return new jsts.geom.Envelope(minx,maxx,miny,maxy);};jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth();};jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size();};jsts.index.quadtree.Quadtree.prototype.insert=function(_800,item){this.collectStats(_800);var _801=jsts.index.quadtree.Quadtree.ensureExtent(_800,this.minExtent);this.root.insert(_801,item);};jsts.index.quadtree.Quadtree.prototype.remove=function(_802,item){var _803=jsts.index.quadtree.Quadtree.ensureExtent(_802,this.minExtent);return this.root.remove(_803,item);};jsts.index.quadtree.Quadtree.prototype.query=function(){if(arguments.length===1){return jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments);}else{jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments);}};jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(_804){var _805=new jsts.index.ArrayListVisitor();this.query(_804,_805);return _805.getItems();};jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(_806,_807){this.root.visit(_806,_807);};jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var _808=[];_808=this.root.addAllItems(_808);return _808;};jsts.index.quadtree.Quadtree.prototype.collectStats=function(_809){var delX=_809.getWidth();if(delX<this.minExtent&&delX>0){this.minExtent=delX;}var delY=_809.getHeight();if(delY<this.minExtent&&delY>0){this.minExtent=delY;}};jsts.operation.relate.RelateNodeFactory=function(){};jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(_80a){return new jsts.operation.relate.RelateNode(_80a,new jsts.operation.relate.EdgeEndBundleStar());};jsts.index.quadtree.Key=function(_80b){this.pt=new jsts.geom.Coordinate();this.level=0;this.env=null;this.computeKey(_80b);};jsts.index.quadtree.Key.computeQuadLevel=function(env){var dx,dy,dMax,_80c;dx=env.getWidth();dy=env.getHeight();dMax=dx>dy?dx:dy;_80c=jsts.index.DoubleBits.exponent(dMax)+1;return _80c;};jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt;};jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level;};jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env;};jsts.index.quadtree.Key.prototype.getCentre=function(){var x,y;x=(this.env.getMinX()+this.env.getMaxX())/2;y=(this.env.getMinY()+this.env.getMaxY())/2;return new jsts.geom.Coordinate(x,y);};jsts.index.quadtree.Key.prototype.computeKey=function(){if(arguments[0] instanceof jsts.geom.Envelope){this.computeKeyFromEnvelope(arguments[0]);}else{this.computeKeyFromLevel(arguments[0],arguments[1]);}};jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(env){this.level=jsts.index.quadtree.Key.computeQuadLevel(env);this.env=new jsts.geom.Envelope();this.computeKey(this.level,env);while(!this.env.contains(env)){this.level+=1;this.computeKey(this.level,env);}};jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(_80d,env){var _80e=jsts.index.DoubleBits.powerOf2(_80d);this.pt.x=Math.floor(env.getMinX()/_80e)*_80e;this.pt.y=Math.floor(env.getMinY()/_80e)*_80e;this.env.init(this.pt.x,this.pt.x+_80e,this.pt.y,this.pt.y+_80e);};jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.CoordinateArrays.copyDeep=function(){if(arguments.length===1){return jsts.geom.CoordinateArrays.copyDeep1(arguments[0]);}else{if(arguments.length===5){jsts.geom.CoordinateArrays.copyDeep2(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);}}};jsts.geom.CoordinateArrays.copyDeep1=function(_80f){var copy=[];for(var i=0;i<_80f.length;i++){copy[i]=new jsts.geom.Coordinate(_80f[i]);}return copy;};jsts.geom.CoordinateArrays.copyDeep2=function(src,_810,dest,_811,_812){for(var i=0;i<_812;i++){dest[_811+i]=new jsts.geom.Coordinate(src[_810+i]);}};jsts.geom.CoordinateArrays.removeRepeatedPoints=function(_813){var _814;if(!this.hasRepeatedPoints(_813)){return _813;}_814=new jsts.geom.CoordinateList(_813,false);return _814.toCoordinateArray();};jsts.geom.CoordinateArrays.hasRepeatedPoints=function(_815){var i;for(i=1;i<_815.length;i++){if(_815[i-1].equals(_815[i])){return true;}}return false;};jsts.geom.CoordinateArrays.ptNotInList=function(_816,pts){for(var i=0;i<_816.length;i++){var _817=_816[i];if(jsts.geom.CoordinateArrays.indexOf(_817,pts)<0){return _817;}}return null;};jsts.geom.CoordinateArrays.increasingDirection=function(pts){for(var i=0;i<parseInt(pts.length/2);i++){var j=pts.length-1-i;var comp=pts[i].compareTo(pts[j]);if(comp!=0){return comp;}}return 1;};jsts.geom.CoordinateArrays.minCoordinate=function(_818){var _819=null;for(var i=0;i<_818.length;i++){if(_819===null||_819.compareTo(_818[i])>0){_819=_818[i];}}return _819;};jsts.geom.CoordinateArrays.scroll=function(_81a,_81b){var i=jsts.geom.CoordinateArrays.indexOf(_81b,_81a);if(i<0){return;}var _81c=_81a.slice(i).concat(_81a.slice(0,i));for(i=0;i<_81c.length;i++){_81a[i]=_81c[i];}};jsts.geom.CoordinateArrays.indexOf=function(_81d,_81e){for(var i=0;i<_81e.length;i++){if(_81d.equals(_81e[i])){return i;}}return -1;};jsts.operation.overlay.MinimalEdgeRing=function(_81f,_820){jsts.geomgraph.EdgeRing.call(this,_81f,_820);};jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing;jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(de){return de.getNextMin();};jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(de,er){de.setMinEdgeRing(er);};jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null;this.tolerance=0;this.subdiv=null;};jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(geom){if(geom===undefined||geom===null){return new jsts.geom.CoordinateList([],false).toArray();}var _821=geom.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(_821);};jsts.triangulate.DelaunayTriangulationBuilder.unique=function(_822){_822.sort(function(a,b){return a.compareTo(b);});var _823=new jsts.geom.CoordinateList(_822,false);return _823.toArray();};jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(_824){var _825=new Array(_824.length),i=0,il=_824.length,_826;for(i;i<il;i++){_826=_824[i];_825[i]=new jsts.triangulate.quadedge.Vertex(_826);}return _825;};jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(_827){var env=new jsts.geom.Envelope(),i=0,il=_827.length;for(i;i<il;i++){env.expandToInclude(_827[i]);}return env;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var arg=arguments[0];if(arg instanceof jsts.geom.Geometry||arg instanceof jsts.geom.Coordinate||arg instanceof jsts.geom.Point||arg instanceof jsts.geom.MultiPoint||arg instanceof jsts.geom.LineString||arg instanceof jsts.geom.MultiLineString||arg instanceof jsts.geom.LinearRing||arg instanceof jsts.geom.Polygon||arg instanceof jsts.geom.MultiPolygon){this.setSitesFromGeometry(arg);}else{this.setSitesFromCollection(arg);}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(geom){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(_828){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(_828);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(_829){this.tolerance=_829;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(this.subdiv===null){var _82a,_82b,_82c;_82a=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);_82b=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(_82a,this.tolerance);_82c=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);_82c.insertSites(_82b);}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(_82d){this.create();return this.subdiv.getEdges(_82d);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(_82e){this.create();return this.subdiv.getTriangles(_82e);};jsts.algorithm.RayCrossingCounter=function(p){this.p=p;};jsts.algorithm.RayCrossingCounter.locatePointInRing=function(p,ring){var _82f=new jsts.algorithm.RayCrossingCounter(p);for(var i=1;i<ring.length;i++){var p1=ring[i];var p2=ring[i-1];_82f.countSegment(p1,p2);if(_82f.isOnSegment()){return _82f.getLocation();}}return _82f.getLocation();};jsts.algorithm.RayCrossingCounter.prototype.p=null;jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0;jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=false;jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(p1,p2){if(p1.x<this.p.x&&p2.x<this.p.x){return;}if(this.p.x==p2.x&&this.p.y===p2.y){this.isPointOnSegment=true;return;}if(p1.y===this.p.y&&p2.y===this.p.y){var minx=p1.x;var maxx=p2.x;if(minx>maxx){minx=p2.x;maxx=p1.x;}if(this.p.x>=minx&&this.p.x<=maxx){this.isPointOnSegment=true;}return;}if(((p1.y>this.p.y)&&(p2.y<=this.p.y))||((p2.y>this.p.y)&&(p1.y<=this.p.y))){var x1=p1.x-this.p.x;var y1=p1.y-this.p.y;var x2=p2.x-this.p.x;var y2=p2.y-this.p.y;var _830=jsts.algorithm.RobustDeterminant.signOfDet2x2(x1,y1,x2,y2);if(_830===0){this.isPointOnSegment=true;return;}if(y2<y1){_830=-_830;}if(_830>0){this.crossingCount++;}}};jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment;};jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){if(this.isPointOnSegment){return jsts.geom.Location.BOUNDARY;}if((this.crossingCount%2)===1){return jsts.geom.Location.INTERIOR;}return jsts.geom.Location.EXTERIOR;};jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR;};jsts.operation.BoundaryOp=function(geom,_831){this.geom=geom;this.geomFact=geom.getFactory();this.bnRule=_831||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE;};jsts.operation.BoundaryOp.prototype.geom=null;jsts.operation.BoundaryOp.prototype.geomFact=null;jsts.operation.BoundaryOp.prototype.bnRule=null;jsts.operation.BoundaryOp.prototype.getBoundary=function(){if(this.geom instanceof jsts.geom.LineString){return this.boundaryLineString(this.geom);}if(this.geom instanceof jsts.geom.MultiLineString){return this.boundaryMultiLineString(this.geom);}return this.geom.getBoundary();};jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null);};jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(_832){if(this.geom.isEmpty()){return this.getEmptyMultiPoint();}var _833=this.computeBoundaryCoordinates(_832);if(_833.length==1){return this.geomFact.createPoint(_833[0]);}return this.geomFact.createMultiPoint(_833);};jsts.operation.BoundaryOp.prototype.endpoints=null;jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(_834){var i,line,_835,_836=[];this.endpoints=[];for(i=0;i<_834.getNumGeometries();i++){line=_834.getGeometryN(i);if(line.getNumPoints()==0){continue;}this.addEndpoint(line.getCoordinateN(0));this.addEndpoint(line.getCoordinateN(line.getNumPoints()-1));}for(i=0;i<this.endpoints.length;i++){_835=this.endpoints[i];if(this.bnRule.isInBoundary(_835.count)){_836.push(_835.coordinate);}}return _836;};jsts.operation.BoundaryOp.prototype.addEndpoint=function(pt){var i,_837,_838=false;for(i=0;i<this.endpoints.length;i++){_837=this.endpoints[i];if(_837.coordinate.equals(pt)){_838=true;break;}}if(!_838){_837={};_837.coordinate=pt;_837.count=0;this.endpoints.push(_837);}_837.count++;};jsts.operation.BoundaryOp.prototype.boundaryLineString=function(line){if(this.geom.isEmpty()){return this.getEmptyMultiPoint();}if(line.isClosed()){var _839=this.bnRule.isInBoundary(2);if(_839){return line.getStartPoint();}else{return this.geomFact.createMultiPoint(null);}}return this.geomFact.createMultiPoint([line.getStartPoint(),line.getEndPoint()]);};jsts.operation.buffer.OffsetCurveSetBuilder=function(_83a,_83b,_83c){this.inputGeom=_83a;this.distance=_83b;this.curveBuilder=_83c;this.curveList=new javascript.util.ArrayList();};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){this.add(this.inputGeom);return this.curveList;};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(_83d,_83e,_83f){if(_83d==null||_83d.length<2){return;}var e=new jsts.noding.NodedSegmentString(_83d,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,_83e,_83f));this.curveList.add(e);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(g){if(g.isEmpty()){return;}if(g instanceof jsts.geom.Polygon){this.addPolygon(g);}else{if(g instanceof jsts.geom.LineString){this.addLineString(g);}else{if(g instanceof jsts.geom.Point){this.addPoint(g);}else{if(g instanceof jsts.geom.MultiPoint){this.addCollection(g);}else{if(g instanceof jsts.geom.MultiLineString){this.addCollection(g);}else{if(g instanceof jsts.geom.MultiPolygon){this.addCollection(g);}else{if(g instanceof jsts.geom.GeometryCollection){this.addCollection(g);}else{throw new jsts.error.IllegalArgumentError();}}}}}}}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.add(g);}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(p){if(this.distance<=0){return;}var _840=p.getCoordinates();var _841=this.curveBuilder.getLineCurve(_840,this.distance);this.addCurve(_841,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(line){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided()){return;}var _842=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());var _843=this.curveBuilder.getLineCurve(_842,this.distance);this.addCurve(_843,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(p){var _844=this.distance;var _845=jsts.geomgraph.Position.LEFT;if(this.distance<0){_844=-this.distance;_845=jsts.geomgraph.Position.RIGHT;}var _846=p.getExteriorRing();var _847=jsts.geom.CoordinateArrays.removeRepeatedPoints(_846.getCoordinates());if(this.distance<0&&this.isErodedCompletely(_846,this.distance)){return;}if(this.distance<=0&&_847.length<3){return;}this.addPolygonRing(_847,_844,_845,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);var _848=jsts.geom.CoordinateArrays.removeRepeatedPoints(hole.getCoordinates());if(this.distance>0&&this.isErodedCompletely(hole,-this.distance)){continue;}this.addPolygonRing(_848,_844,jsts.geomgraph.Position.opposite(_845),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR);}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(_849,_84a,side,_84b,_84c){if(_84a==0&&_849.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE){return;}var _84d=_84b;var _84e=_84c;if(_849.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(_849)){_84d=_84c;_84e=_84b;side=jsts.geomgraph.Position.opposite(side);}var _84f=this.curveBuilder.getRingCurve(_849,side,_84a);this.addCurve(_84f,_84d,_84e);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(ring,_850){var _851=ring.getCoordinates();var _852=0;if(_851.length<4){return _850<0;}if(_851.length==4){return this.isTriangleErodedCompletely(_851,_850);}var env=ring.getEnvelopeInternal();var _853=Math.min(env.getHeight(),env.getWidth());if(_850<0&&2*Math.abs(_850)>_853){return true;}return false;};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(_854,_855){var tri=new jsts.geom.Triangle(_854[0],_854[1],_854[2]);var _856=tri.inCentre();var _857=jsts.algorithm.CGAlgorithms.distancePointLine(_856,tri.p0,tri.p1);return _857<Math.abs(_855);};jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList();this.nodes=new javascript.util.ArrayList();this.finder=new jsts.operation.buffer.RightmostEdgeFinder();};jsts.operation.buffer.BufferSubgraph.prototype.finder=null;jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null;jsts.operation.buffer.BufferSubgraph.prototype.nodes=null;jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null;jsts.operation.buffer.BufferSubgraph.prototype.env=null;jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList;};jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes;};jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(this.env===null){var _858=new jsts.geom.Envelope();for(var it=this.dirEdgeList.iterator();it.hasNext();){var _859=it.next();var pts=_859.getEdge().getCoordinates();for(var j=0;j<pts.length-1;j++){_858.expandToInclude(pts[j]);}}this.env=_858;}return this.env;};jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord;};jsts.operation.buffer.BufferSubgraph.prototype.create=function(node){this.addReachable(node);this.finder.findEdge(this.dirEdgeList);this.rightMostCoord=this.finder.getCoordinate();};jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(_85a){var _85b=[];_85b.push(_85a);while(_85b.length!==0){var node=_85b.pop();this.add(node,_85b);}};jsts.operation.buffer.BufferSubgraph.prototype.add=function(node,_85c){node.setVisited(true);this.nodes.add(node);for(var i=node.getEdges().iterator();i.hasNext();){var de=i.next();this.dirEdgeList.add(de);var sym=de.getSym();var _85d=sym.getNode();if(!_85d.isVisited()){_85c.push(_85d);}}};jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var it=this.dirEdgeList.iterator();it.hasNext();){var de=it.next();de.setVisited(false);}};jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(_85e){this.clearVisitedEdges();var de=this.finder.getEdge();var n=de.getNode();var _85f=de.getLabel();de.setEdgeDepths(jsts.geomgraph.Position.RIGHT,_85e);this.copySymDepths(de);this.computeDepths(de);};jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(_860){var _861=[];var _862=[];var _863=_860.getNode();_862.push(_863);_861.push(_863);_860.setVisited(true);while(_862.length!==0){var n=_862.shift();_861.push(n);this.computeNodeDepth(n);for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();var sym=de.getSym();if(sym.isVisited()){continue;}var _864=sym.getNode();if(_861.indexOf(_864)===-1){_862.push(_864);_861.push(_864);}}}};jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(n){var _865=null;for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();if(de.isVisited()||de.getSym().isVisited()){_865=de;break;}}if(_865==null){throw new jsts.error.TopologyError("unable to find edge to compute depths at "+n.getCoordinate());}n.getEdges().computeDepths(_865);for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();de.setVisited(true);this.copySymDepths(de);}};jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(de){var sym=de.getSym();sym.setDepth(jsts.geomgraph.Position.LEFT,de.getDepth(jsts.geomgraph.Position.RIGHT));sym.setDepth(jsts.geomgraph.Position.RIGHT,de.getDepth(jsts.geomgraph.Position.LEFT));};jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var it=this.dirEdgeList.iterator();it.hasNext();){var de=it.next();if(de.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&de.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!de.isInteriorAreaEdge()){de.setInResult(true);}}};jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(o){var _866=o;if(this.rightMostCoord.x<_866.rightMostCoord.x){return -1;}if(this.rightMostCoord.x>_866.rightMostCoord.x){return 1;}return 0;};jsts.simplify.DPTransformer=function(_867,_868){this.distanceTolerance=_867;this.isEnsureValidTopology=_868;};jsts.simplify.DPTransformer.prototype=new jsts.geom.util.GeometryTransformer();jsts.simplify.DPTransformer.prototype.distanceTolerance=null;jsts.simplify.DPTransformer.prototype.isEnsureValidTopology=null;jsts.simplify.DPTransformer.prototype.transformCoordinates=function(_869,_86a){var _86b=_869;var _86c=null;if(_86b.length==0){_86c=[];}else{_86c=jsts.simplify.DouglasPeuckerLineSimplifier.simplify(_86b,this.distanceTolerance);}return _86c;};jsts.simplify.DPTransformer.prototype.transformPolygon=function(geom,_86d){if(geom.isEmpty()){return null;}var _86e=jsts.geom.util.GeometryTransformer.prototype.transformPolygon.apply(this,arguments);if(_86d instanceof jsts.geom.MultiPolygon){return _86e;}return this.createValidArea(_86e);};jsts.simplify.DPTransformer.prototype.transformLinearRing=function(geom,_86f){var _870=_86f instanceof jsts.geom.Polygon;var _871=jsts.geom.util.GeometryTransformer.prototype.transformLinearRing.apply(this,arguments);if(_870&&!(_871 instanceof jsts.geom.LinearRing)){return null;}return _871;};jsts.simplify.DPTransformer.prototype.transformMultiPolygon=function(geom,_872){var _873=jsts.geom.util.GeometryTransformer.prototype.transformMultiPolygon.apply(this,arguments);return this.createValidArea(_873);};jsts.simplify.DPTransformer.prototype.createValidArea=function(_874){if(this.isEnsureValidTopology){return _874.buffer(0);}return _874;};jsts.geom.util.GeometryExtracter=function(clz,_875){this.clz=clz;this.comps=_875;};jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.GeometryExtracter.prototype.clz=null;jsts.geom.util.GeometryExtracter.prototype.comps=null;jsts.geom.util.GeometryExtracter.extract=function(geom,clz,list){list=list||new javascript.util.ArrayList();if(geom instanceof clz){list.add(geom);}else{if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){geom.apply(new jsts.geom.util.GeometryExtracter(clz,list));}}return list;};jsts.geom.util.GeometryExtracter.prototype.filter=function(geom){if(this.clz===null||geom instanceof this.clz){this.comps.add(geom);}};(function(){var _876=jsts.operation.overlay.OverlayOp;var _877=jsts.operation.overlay.snap.SnapOverlayOp;var _878=function(g1,g2){this.geom=[];this.geom[0]=g1;this.geom[1]=g2;};_878.overlayOp=function(g0,g1,_879){var op=new _878(g0,g1);return op.getResultGeometry(_879);};_878.intersection=function(g0,g1){return overlayOp(g0,g1,_876.INTERSECTION);};_878.union=function(g0,g1){return overlayOp(g0,g1,_876.UNION);};_878.difference=function(g0,g1){return overlayOp(g0,g1,_876.DIFFERENCE);};_878.symDifference=function(g0,g1){return overlayOp(g0,g1,_876.SYMDIFFERENCE);};_878.prototype.geom=null;_878.prototype.getResultGeometry=function(_87a){var _87b=null;var _87c=false;var _87d=null;try{_87b=_876.overlayOp(this.geom[0],this.geom[1],_87a);var _87e=true;if(_87e){_87c=true;}}catch(ex){_87d=ex;}if(!_87c){try{_87b=_877.overlayOp(this.geom[0],this.geom[1],_87a);}catch(ex){throw _87d;}}return _87b;};jsts.operation.overlay.snap.SnapIfNeededOverlayOp=_878;})();(function(){var _87f=jsts.geom.util.GeometryExtracter;var _880=jsts.operation.union.CascadedPolygonUnion;var _881=jsts.operation.union.PointGeometryUnion;var _882=jsts.operation.overlay.OverlayOp;var _883=jsts.operation.overlay.snap.SnapIfNeededOverlayOp;var _884=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(_885,_886){this.polygons=new _884();this.lines=new _884();this.points=new _884();if(_886){this.geomFact=_886;}this.extract(_885);};jsts.operation.union.UnaryUnionOp.union=function(_887,_888){var op=new jsts.operation.union.UnaryUnionOp(_887,_888);return op.union();};jsts.operation.union.UnaryUnionOp.prototype.polygons=null;jsts.operation.union.UnaryUnionOp.prototype.lines=null;jsts.operation.union.UnaryUnionOp.prototype.points=null;jsts.operation.union.UnaryUnionOp.prototype.geomFact=null;jsts.operation.union.UnaryUnionOp.prototype.extract=function(_889){if(_889 instanceof _884){for(var i=_889.iterator();i.hasNext();){var geom=i.next();this.extract(geom);}}else{if(this.geomFact===null){this.geomFact=_889.getFactory();}_87f.extract(_889,jsts.geom.Polygon,this.polygons);_87f.extract(_889,jsts.geom.LineString,this.lines);_87f.extract(_889,jsts.geom.Point,this.points);}};jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(this.geomFact===null){return null;}var _88a=null;if(this.points.size()>0){var _88b=this.geomFact.buildGeometry(this.points);_88a=this.unionNoOpt(_88b);}var _88c=null;if(this.lines.size()>0){var _88d=this.geomFact.buildGeometry(this.lines);_88c=this.unionNoOpt(_88d);}var _88e=null;if(this.polygons.size()>0){_88e=_880.union(this.polygons);}var _88f=this.unionWithNull(_88c,_88e);var _890=null;if(_88a===null){_890=_88f;}else{if(_88f===null){_890=_88a;}else{_890=_881(_88a,_88f);}}if(_890===null){return this.geomFact.createGeometryCollection(null);}return _890;};jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(g0,g1){if(g0===null&&g1===null){return null;}if(g1===null){return g0;}if(g0===null){return g1;}return g0.union(g1);};jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(g0){var _891=this.geomFact.createPoint(null);return _883.overlayOp(g0,_891,_882.UNION);};}());jsts.index.kdtree.KdNode=function(){this.left=null;this.right=null;this.count=1;if(arguments.length===2){this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]);}else{if(arguments.length===3){this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2]);}}};jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(x,y,data){this.p=new jsts.geom.Coordinate(x,y);this.data=data;};jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(p,data){this.p=p;this.data=data;};jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x;};jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y;};jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p;};jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data;};jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left;};jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right;};jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1;};jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count;};jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1;};jsts.index.kdtree.KdNode.prototype.setLeft=function(left){this.left=left;};jsts.index.kdtree.KdNode.prototype.setRight=function(_892){this.right=_892;};jsts.algorithm.InteriorPointPoint=function(_893){this.minDistance=Number.MAX_VALUE;this.interiorPoint=null;this.centroid=_893.getCentroid().getCoordinate();this.add(_893);};jsts.algorithm.InteriorPointPoint.prototype.add=function(_894){if(_894 instanceof jsts.geom.Point){this.addPoint(_894.getCoordinate());}else{if(_894 instanceof jsts.geom.GeometryCollection){for(var i=0;i<_894.getNumGeometries();i++){this.add(_894.getGeometryN(i));}}}};jsts.algorithm.InteriorPointPoint.prototype.addPoint=function(_895){var dist=_895.distance(this.centroid);if(dist<this.minDistance){this.interiorPoint=new jsts.geom.Coordinate(_895);this.minDistance=dist;}};jsts.algorithm.InteriorPointPoint.prototype.getInteriorPoint=function(){return this.interiorPoint;};(function(){jsts.geom.MultiLineString=function(_896,_897){this.geometries=_896||[];this.factory=_897;};jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString;jsts.geom.MultiLineString.prototype.getBoundary=function(){return (new jsts.operation.BoundaryOp(this)).getBoundary();};jsts.geom.MultiLineString.prototype.equalsExact=function(_898,_899){if(!this.isEquivalentClass(_898)){return false;}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,_898,_899);};jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString";})();jsts.io.olParser=function(_89a){this.geometryFactory=_89a||new jsts.geom.GeometryFactory();};jsts.io.olParser.prototype.read=function(_89b){if(_89b instanceof ol.geom.Point){return this.convertFromPoint(_89b);}else{if(_89b instanceof ol.geom.LineString){return this.convertFromLineString(_89b);}else{if(_89b instanceof ol.geom.LinearRing){return this.convertFromLinearRing(_89b);}else{if(_89b instanceof ol.geom.Polygon){return this.convertFromPolygon(_89b);}else{if(_89b instanceof ol.geom.MultiPoint){return this.convertFromMultiPoint(_89b);}else{if(_89b instanceof ol.geom.MultiLineString){return this.convertFromMultiLineString(_89b);}else{if(_89b instanceof ol.geom.MultiPolygon){return this.convertFromMultiPolygon(_89b);}else{if(_89b instanceof ol.geom.GeometryCollection){return this.convertFromCollection(_89b);}}}}}}}}};jsts.io.olParser.prototype.convertFromPoint=function(_89c){var _89d=_89c.getCoordinates();return this.geometryFactory.createPoint(new jsts.geom.Coordinate(_89d[0],_89d[1]));};jsts.io.olParser.prototype.convertFromLineString=function(_89e){return this.geometryFactory.createLineString(_89e.getCoordinates().map(function(_89f){return new jsts.geom.Coordinate(_89f[0],_89f[1]);}));};jsts.io.olParser.prototype.convertFromLinearRing=function(_8a0){return this.geometryFactory.createLinearRing(_8a0.getCoordinates().map(function(_8a1){return new jsts.geom.Coordinate(_8a1[0],_8a1[1]);}));};jsts.io.olParser.prototype.convertFromPolygon=function(_8a2){var _8a3=_8a2.getLinearRings();var i;var _8a4=null;var _8a5=[];for(i=0;i<_8a3.length;i++){var _8a6=this.convertFromLinearRing(_8a3[i]);if(i===0){_8a4=_8a6;}else{_8a5.push(_8a6);}}return this.geometryFactory.createPolygon(_8a4,_8a5);};jsts.io.olParser.prototype.convertFromMultiPoint=function(_8a7){var _8a8=_8a7.getPoints().map(function(_8a9){return this.convertFromPoint(_8a9);},this);return this.geometryFactory.createMultiPoint(_8a8);};jsts.io.olParser.prototype.convertFromMultiLineString=function(_8aa){var _8ab=_8aa.getLineStrings().map(function(_8ac){return this.convertFromLineString(_8ac);},this);return this.geometryFactory.createMultiLineString(_8ab);};jsts.io.olParser.prototype.convertFromMultiPolygon=function(_8ad){var _8ae=_8ad.getPolygons().map(function(_8af){return this.convertFromPolygon(_8af);},this);return this.geometryFactory.createMultiPolygon(_8ae);};jsts.io.olParser.prototype.convertFromCollection=function(_8b0){var _8b1=_8b0.getGeometries().map(function(_8b2){return this.read(_8b2);},this);return this.geometryFactory.createGeometryCollection(_8b1);};jsts.io.olParser.prototype.write=function(_8b3){if(_8b3.CLASS_NAME==="jsts.geom.Point"){return this.convertToPoint(_8b3.coordinate);}else{if(_8b3.CLASS_NAME==="jsts.geom.LineString"){return this.convertToLineString(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.LinearRing"){return this.convertToLinearRing(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.Polygon"){return this.convertToPolygon(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.MultiPoint"){return this.convertToMultiPoint(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.MultiLineString"){return this.convertToMultiLineString(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.MultiPolygon"){return this.convertToMultiPolygon(_8b3);}else{if(_8b3.CLASS_NAME==="jsts.geom.GeometryCollection"){return this.convertToCollection(_8b3);}}}}}}}}};jsts.io.olParser.prototype.convertToPoint=function(_8b4){return new ol.geom.Point([_8b4.x,_8b4.y]);};jsts.io.olParser.prototype.convertToLineString=function(_8b5){var i;var _8b6=[];for(i=0;i<_8b5.points.length;i++){var _8b7=_8b5.points[i];_8b6.push(this.convertToPoint(_8b7));}return new new ol.geom.LineString(_8b6);};jsts.io.olParser.prototype.convertToLinearRing=function(_8b8){var i;var _8b9=[];for(i=0;i<_8b8.points.length;i++){var _8ba=_8b8.points[i];_8b9.push([_8ba.x,_8ba.y]);}return new ol.geom.LinearRing(_8b9);};jsts.io.olParser.prototype.convertToPolygon=function(_8bb){var i;var _8bc=[];_8bc.push(this.convertToLinearRing(_8bb.shell).getCoordinates());for(i=0;i<_8bb.holes.length;i++){var ring=_8bb.holes[i];_8bc.push(this.convertToLinearRing(ring).getCoordinates());}return new ol.geom.Polygon(_8bc);};jsts.io.olParser.prototype.convertToMultiPoint=function(_8bd){var i;var _8be=[];for(i=0;i<_8bd.geometries.length;i++){var _8bf=_8bd.geometries[i].coordinate;_8be.push(new ol.geom.Point([_8bf.x,_8bf.y]));}return new new ol.geom.MultiPoint(_8be);};jsts.io.olParser.prototype.convertToMultiLineString=function(_8c0){var i;var _8c1=[];for(i=0;i<_8c0.geometries.length;i++){_8c1.push(this.convertToLineString(_8c0.geometries[i]));}return new ol.geom.MultiLineString(_8c1);};jsts.io.olParser.prototype.convertToMultiPolygon=function(_8c2){var i;var _8c3=[];for(i=0;i<_8c2.geometries.length;i++){_8c3.push(this.convertToPolygon(_8c2.geometries[i]));}return new ol.geom.MultiPolygon(_8c3);};jsts.io.olParser.prototype.convertToCollection=function(_8c4){var i;var _8c5=[];for(i=0;i<_8c4.geometries.length;i++){var _8c6=_8c4.geometries[i];var _8c7=this.write(_8c6);_8c5.push(_8c7);}return new ol.geom.GeometryCollection(_8c5);};(function(){var _8c8=jsts.index.bintree.Interval;var Root=jsts.index.bintree.Root;var _8c9=function(){this.root=new Root();this.minExtent=1;};_8c9.ensureExtent=function(_8ca,_8cb){var min,max;min=_8ca.getMin();max=_8ca.getMax();if(min!==max){return _8ca;}if(min===max){min=min-(_8cb/2);max=min+(_8cb/2);}return new _8c8(min,max);};_8c9.prototype.depth=function(){if(this.root!==null){return this.root.depth();}return 0;};_8c9.prototype.size=function(){if(this.root!==null){return this.root.size();}return 0;};_8c9.prototype.nodeSize=function(){if(this.root!==null){return this.root.nodeSize();}return 0;};_8c9.prototype.insert=function(_8cc,item){this.collectStats(_8cc);var _8cd=_8c9.ensureExtent(_8cc,this.minExtent);this.root.insert(_8cd,item);};_8c9.prototype.remove=function(_8ce,item){var _8cf=_8c9.ensureExtent(_8ce,this.minExtent);return this.root.remove(_8cf,item);};_8c9.prototype.iterator=function(){var _8d0=new javascript.util.ArrayList();this.root.addAllItems(_8d0);return _8d0.iterator();};_8c9.prototype.query=function(){if(arguments.length===2){this.queryAndAdd(arguments[0],arguments[1]);}else{var x=arguments[0];if(!x instanceof _8c8){x=new _8c8(x,x);}return this.queryInterval(x);}};_8c9.prototype.queryInterval=function(_8d1){var _8d2=new javascript.util.ArrayList();this.query(_8d1,_8d2);return _8d2;};_8c9.prototype.queryAndAdd=function(_8d3,_8d4){this.root.addAllItemsFromOverlapping(_8d3,_8d4);};_8c9.prototype.collectStats=function(_8d5){var del=_8d5.getWidth();if(del<this.minExtent&&del>0){this.minExtent=del;}};jsts.index.bintree.Bintree=_8c9;})();jsts.algorithm.InteriorPointArea=function(_8d6){this.factory;this.interiorPoint=null;this.maxWidth=0;this.factory=_8d6.getFactory();this.add(_8d6);};jsts.algorithm.InteriorPointArea.avg=function(a,b){return (a+b)/2;};jsts.algorithm.InteriorPointArea.prototype.getInteriorPoint=function(){return this.interiorPoint;};jsts.algorithm.InteriorPointArea.prototype.add=function(_8d7){if(_8d7 instanceof jsts.geom.Polygon){this.addPolygon(_8d7);}else{if(_8d7 instanceof jsts.geom.GeometryCollection){for(var i=0;i<_8d7.getNumGeometries();i++){this.add(_8d7.getGeometryN(i));}}}};jsts.algorithm.InteriorPointArea.prototype.addPolygon=function(_8d8){if(_8d8.isEmpty()){return;}var _8d9;var _8da=0;var _8db=this.horizontalBisector(_8d8);if(_8db.getLength()==0){_8da=0;_8d9=_8db.getCoordinate();}else{var _8dc=_8db.intersection(_8d8);var _8dd=this.widestGeometry(_8dc);_8da=_8dd.getEnvelopeInternal().getWidth();_8d9=this.centre(_8dd.getEnvelopeInternal());}if(this.interiorPoint==null||_8da>this.maxWidth){this.interiorPoint=_8d9;this.maxWidth=_8da;}};jsts.algorithm.InteriorPointArea.prototype.widestGeometry=function(obj){if(obj instanceof jsts.geom.GeometryCollection){var gc=obj;if(gc.isEmpty()){return gc;}var _8de=gc.getGeometryN(0);for(var i=1;i<gc.getNumGeometries();i++){if(gc.getGeometryN(i).getEnvelopeInternal().getWidth()>_8de.getEnvelopeInternal().getWidth()){_8de=gc.getGeometryN(i);}}return _8de;}else{if(obj instanceof jsts.geom.Geometry){return obj;}}};jsts.algorithm.InteriorPointArea.prototype.horizontalBisector=function(_8df){var _8e0=_8df.getEnvelopeInternal();var _8e1=jsts.algorithm.SafeBisectorFinder.getBisectorY(_8df);return this.factory.createLineString([new jsts.geom.Coordinate(_8e0.getMinX(),_8e1),new jsts.geom.Coordinate(_8e0.getMaxX(),_8e1)]);};jsts.algorithm.InteriorPointArea.prototype.centre=function(_8e2){return new jsts.geom.Coordinate(jsts.algorithm.InteriorPointArea.avg(_8e2.getMinX(),_8e2.getMaxX()),jsts.algorithm.InteriorPointArea.avg(_8e2.getMinY(),_8e2.getMaxY()));};jsts.algorithm.SafeBisectorFinder=function(poly){this.poly;this.centreY;this.hiY=Number.MAX_VALUE;this.loY=-Number.MAX_VALUE;this.poly=poly;this.hiY=poly.getEnvelopeInternal().getMaxY();this.loY=poly.getEnvelopeInternal().getMinY();this.centreY=jsts.algorithm.InteriorPointArea.avg(this.loY,this.hiY);};jsts.algorithm.SafeBisectorFinder.getBisectorY=function(poly){var _8e3=new jsts.algorithm.SafeBisectorFinder(poly);return _8e3.getBisectorY();};jsts.algorithm.SafeBisectorFinder.prototype.getBisectorY=function(){this.process(this.poly.getExteriorRing());for(var i=0;i<this.poly.getNumInteriorRing();i++){this.process(this.poly.getInteriorRingN(i));}var _8e4=jsts.algorithm.InteriorPointArea.avg(this.hiY,this.loY);return _8e4;};jsts.algorithm.SafeBisectorFinder.prototype.process=function(line){var seq=line.getCoordinateSequence();for(var i=0;i<seq.length;i++){var y=seq[i].y;this.updateInterval(y);}};jsts.algorithm.SafeBisectorFinder.prototype.updateInterval=function(y){if(y<=this.centreY){if(y>this.loY){this.loY=y;}}else{if(y>this.centreY){if(y<this.hiY){this.hiY=y;}}}};jsts.operation.buffer.BufferParameters=function(_8e5,_8e6,_8e7,_8e8){if(_8e5){this.setQuadrantSegments(_8e5);}if(_8e6){this.setEndCapStyle(_8e6);}if(_8e7){this.setJoinStyle(_8e7);}if(_8e8){this.setMitreLimit(_8e8);}};jsts.operation.buffer.BufferParameters.CAP_ROUND=1;jsts.operation.buffer.BufferParameters.CAP_FLAT=2;jsts.operation.buffer.BufferParameters.CAP_SQUARE=3;jsts.operation.buffer.BufferParameters.JOIN_ROUND=1;jsts.operation.buffer.BufferParameters.JOIN_MITRE=2;jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3;jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8;jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5;jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS;jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND;jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND;jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT;jsts.operation.buffer.BufferParameters.prototype._isSingleSided=false;jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments;};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(_8e9){this.quadrantSegments=_8e9;};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(_8ea){this.quadrantSegments=_8ea;if(this.quadrantSegments===0){this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL;}if(this.quadrantSegments<0){this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE;this.mitreLimit=Math.abs(this.quadrantSegments);}if(_8ea<=0){this.quadrantSegments=1;}if(this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS;}};jsts.operation.buffer.BufferParameters.bufferDistanceError=function(_8eb){var _8ec=Math.PI/2/_8eb;return 1-Math.cos(_8ec/2);};jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle;};jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(_8ed){this.endCapStyle=_8ed;};jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle;};jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(_8ee){this.joinStyle=_8ee;};jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit;};jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(_8ef){this.mitreLimit=_8ef;};jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(_8f0){this._isSingleSided=_8f0;};jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided;};(function(){jsts.geom.util.ShortCircuitedGeometryVisitor=function(){};jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=false;jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.applyTo=function(geom){for(var i=0;i<geom.getNumGeometries()&&!this.isDone;i++){var _8f1=geom.getGeometryN(i);if(!(_8f1 instanceof jsts.geom.GeometryCollection)){this.visit(_8f1);if(this.isDone()){this.isDone=true;return;}}else{this.applyTo(_8f1);}}};jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.visit=function(_8f2){};jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=function(){};})();(function(){var _8f3=function(_8f4){this.rectEnv=_8f4;};_8f3.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();_8f3.constructor=_8f3;_8f3.prototype.rectEnv=null;_8f3.prototype.intersects=false;_8f3.prototype.intersects=function(){return this.intersects;};_8f3.prototype.visit=function(_8f5){var _8f6=_8f5.getEnvelopeInternal();if(!this.rectEnv.intersects(_8f6)){return;}if(this.rectEnv.contains(_8f6)){this.intersects=true;return;}if(_8f6.getMinX()>=rectEnv.getMinX()&&_8f6.getMaxX()<=rectEnv.getMaxX()){this.intersects=true;return;}if(_8f6.getMinY()>=rectEnv.getMinY()&&_8f6.getMaxY()<=rectEnv.getMaxY()){this.intersects=true;return;}};_8f3.prototype.isDone=function(){return this.intersects==true;};var _8f7=function(_8f8){this.rectSeq=_8f8.getExteriorRing().getCoordinateSequence();this.rectEnv=_8f8.getEnvelopeInternal();};_8f7.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();_8f7.constructor=_8f7;_8f7.prototype.rectSeq=null;_8f7.prototype.rectEnv=null;_8f7.prototype.containsPoint=false;_8f7.prototype.containsPoint=function(){return this.containsPoint;};_8f7.prototype.visit=function(geom){if(!(geom instanceof jsts.geom.Polygon)){return;}var _8f9=geom.getEnvelopeInternal();if(!this.rectEnv.intersects(_8f9)){return;}var _8fa=new jsts.geom.Coordinate();for(var i=0;i<4;i++){this.rectSeq.getCoordinate(i,_8fa);if(!_8f9.contains(_8fa)){continue;}if(SimplePointInAreaLocator.containsPointInPolygon(_8fa,geom)){this.containsPoint=true;return;}}};_8f7.prototype.isDone=function(){return this.containsPoint==true;};var _8fb=function(_8fc){this.rectEnv=_8fc.getEnvelopeInternal();this.rectIntersector=new RectangleLineIntersector(rectEnv);};_8fb.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();_8fb.constructor=_8fb;_8fb.prototype.rectEnv=null;_8fb.prototype.rectIntersector=null;_8fb.prototype.hasIntersection=false;_8fb.prototype.p0=null;_8fb.prototype.p1=null;_8fb.prototype.intersects=function(){return this.hasIntersection;};_8fb.prototype.visit=function(geom){var _8fd=geom.getEnvelopeInternal();if(!this.rectEnv.intersects(_8fd)){return;}var _8fe=LinearComponentExtracter.getLines(geom);this.checkIntersectionWithLineStrings(_8fe);};_8fb.prototype.checkIntersectionWithLineStrings=function(_8ff){for(var i=_8ff.iterator();i.hasNext();){var _900=i.next();this.checkIntersectionWithSegments(_900);if(this.hasIntersection){return;}}};_8fb.prototype.checkIntersectionWithSegments=function(_901){var seq1=_901.getCoordinateSequence();for(var j=1;j<seq1.length;j++){this.p0=seq1[j-1];this.p1=seq1[j];if(rectIntersector.intersects(p0,p1)){this.hasIntersection=true;return;}}};_8fb.prototype.isDone=function(){return this.hasIntersection==true;};jsts.operation.predicate.RectangleIntersects=function(_902){this.rectangle=_902;this.rectEnv=_902.getEnvelopeInternal();};jsts.operation.predicate.RectangleIntersects.intersects=function(_903,b){var rp=new jsts.operation.predicate.RectangleIntersects(_903);return rp.intersects(b);};jsts.operation.predicate.RectangleIntersects.prototype.rectangle=null;jsts.operation.predicate.RectangleIntersects.prototype.rectEnv=null;jsts.operation.predicate.RectangleIntersects.prototype.intersects=function(geom){if(!this.rectEnv.intersects(geom.getEnvelopeInternal())){return false;}var _904=new _8f3(this.rectEnv);_904.applyTo(geom);if(_904.intersects()){return true;}var _905=new _8f7(rectangle);_905.applyTo(geom);if(_905.containsPoint()){return true;}var _906=new _8fb(rectangle);_906.applyTo(geom);if(_906.intersects()){return true;}return false;};})();jsts.operation.buffer.BufferBuilder=function(_907){this.bufParams=_907;this.edgeList=new jsts.geomgraph.EdgeList();};jsts.operation.buffer.BufferBuilder.depthDelta=function(_908){var lLoc=_908.getLocation(0,jsts.geomgraph.Position.LEFT);var rLoc=_908.getLocation(0,jsts.geomgraph.Position.RIGHT);if(lLoc===jsts.geom.Location.INTERIOR&&rLoc===jsts.geom.Location.EXTERIOR){return 1;}else{if(lLoc===jsts.geom.Location.EXTERIOR&&rLoc===jsts.geom.Location.INTERIOR){return -1;}}return 0;};jsts.operation.buffer.BufferBuilder.prototype.bufParams=null;jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null;jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null;jsts.operation.buffer.BufferBuilder.prototype.geomFact=null;jsts.operation.buffer.BufferBuilder.prototype.graph=null;jsts.operation.buffer.BufferBuilder.prototype.edgeList=null;jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(pm){this.workingPrecisionModel=pm;};jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(_909){this.workingNoder=_909;};jsts.operation.buffer.BufferBuilder.prototype.buffer=function(g,_90a){var _90b=this.workingPrecisionModel;if(_90b===null){_90b=g.getPrecisionModel();}this.geomFact=g.getFactory();var _90c=new jsts.operation.buffer.OffsetCurveBuilder(_90b,this.bufParams);var _90d=new jsts.operation.buffer.OffsetCurveSetBuilder(g,_90a,_90c);var _90e=_90d.getCurves();if(_90e.size()<=0){return this.createEmptyResultGeometry();}this.computeNodedEdges(_90e,_90b);this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());this.graph.addEdges(this.edgeList.getEdges());var _90f=this.createSubgraphs(this.graph);var _910=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(_90f,_910);var _911=_910.getPolygons();if(_911.size()<=0){return this.createEmptyResultGeometry();}var _912=this.geomFact.buildGeometry(_911);return _912;};jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(_913){if(this.workingNoder!==null){return this.workingNoder;}var _914=new jsts.noding.MCIndexNoder();var li=new jsts.algorithm.RobustLineIntersector();li.setPrecisionModel(_913);_914.setSegmentIntersector(new jsts.noding.IntersectionAdder(li));return _914;};jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(_915,_916){var _917=this.getNoder(_916);_917.computeNodes(_915);var _918=_917.getNodedSubstrings();for(var i=_918.iterator();i.hasNext();){var _919=i.next();var _91a=_919.getData();var edge=new jsts.geomgraph.Edge(_919.getCoordinates(),new jsts.geomgraph.Label(_91a));this.insertUniqueEdge(edge);}};jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(e){var _91b=this.edgeList.findEqualEdge(e);if(_91b!=null){var _91c=_91b.getLabel();var _91d=e.getLabel();if(!_91b.isPointwiseEqual(e)){_91d=new jsts.geomgraph.Label(e.getLabel());_91d.flip();}_91c.merge(_91d);var _91e=jsts.operation.buffer.BufferBuilder.depthDelta(_91d);var _91f=_91b.getDepthDelta();var _920=_91f+_91e;_91b.setDepthDelta(_920);}else{this.edgeList.add(e);e.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(e.getLabel()));}};jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(_921){var _922=[];for(var i=_921.getNodes().iterator();i.hasNext();){var node=i.next();if(!node.isVisited()){var _923=new jsts.operation.buffer.BufferSubgraph();_923.create(node);_922.push(_923);}}var _924=function(a,b){return a.compareTo(b);};_922.sort(_924);_922.reverse();return _922;};jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(_925,_926){var _927=[];for(var i=0;i<_925.length;i++){var _928=_925[i];var p=_928.getRightmostCoordinate();var _929=new jsts.operation.buffer.SubgraphDepthLocater(_927);var _92a=_929.getDepth(p);_928.computeDepth(_92a);_928.findResultEdges();_927.push(_928);_926.add(_928.getDirectedEdges(),_928.getNodes());}};jsts.operation.buffer.BufferBuilder.convertSegStrings=function(it){var fact=new jsts.geom.GeometryFactory();var _92b=new javascript.util.ArrayList();while(it.hasNext()){var ss=it.next();var line=fact.createLineString(ss.getCoordinates());_92b.add(line);}return fact.buildGeometry(_92b);};jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var _92c=this.geomFact.createPolygon(null,null);return _92c;};jsts.noding.SegmentPointComparator=function(){};jsts.noding.SegmentPointComparator.compare=function(_92d,p0,p1){if(p0.equals2D(p1)){return 0;}var _92e=jsts.noding.SegmentPointComparator.relativeSign(p0.x,p1.x);var _92f=jsts.noding.SegmentPointComparator.relativeSign(p0.y,p1.y);switch(_92d){case 0:return jsts.noding.SegmentPointComparator.compareValue(_92e,_92f);case 1:return jsts.noding.SegmentPointComparator.compareValue(_92f,_92e);case 2:return jsts.noding.SegmentPointComparator.compareValue(_92f,-_92e);case 3:return jsts.noding.SegmentPointComparator.compareValue(-_92e,_92f);case 4:return jsts.noding.SegmentPointComparator.compareValue(-_92e,-_92f);case 5:return jsts.noding.SegmentPointComparator.compareValue(-_92f,-_92e);case 6:return jsts.noding.SegmentPointComparator.compareValue(-_92f,_92e);case 7:return jsts.noding.SegmentPointComparator.compareValue(_92e,-_92f);}return 0;};jsts.noding.SegmentPointComparator.relativeSign=function(x0,x1){if(x0<x1){return -1;}if(x0>x1){return 1;}return 0;};jsts.noding.SegmentPointComparator.compareValue=function(_930,_931){if(_930<0){return -1;}if(_930>0){return 1;}if(_931<0){return -1;}if(_931>0){return 1;}return 0;};jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments);this._relate=new jsts.operation.relate.RelateComputer(this.arg);};jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation();jsts.operation.relate.RelateOp.relate=function(a,b,_932){var _933=new jsts.operation.relate.RelateOp(a,b,_932);var im=_933.getIntersectionMatrix();return im;};jsts.operation.relate.RelateOp.prototype._relate=null;jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM();};jsts.index.chain.MonotoneChain=function(pts,_934,end,_935){this.pts=pts;this.start=_934;this.end=end;this.context=_935;};jsts.index.chain.MonotoneChain.prototype.pts=null;jsts.index.chain.MonotoneChain.prototype.start=null;jsts.index.chain.MonotoneChain.prototype.end=null;jsts.index.chain.MonotoneChain.prototype.env=null;jsts.index.chain.MonotoneChain.prototype.context=null;jsts.index.chain.MonotoneChain.prototype.id=null;jsts.index.chain.MonotoneChain.prototype.setId=function(id){this.id=id;};jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id;};jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context;};jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(this.env==null){var p0=this.pts[this.start];var p1=this.pts[this.end];this.env=new jsts.geom.Envelope(p0,p1);}return this.env;};jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start;};jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end;};jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(_936,ls){ls.p0=this.pts[_936];ls.p1=this.pts[_936+1];};jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){var _937=[];var _938=0;for(var i=this.start;i<=this.end;i++){_937[_938++]=this.pts[i];}return _937;};jsts.index.chain.MonotoneChain.prototype.select=function(_939,mcs){this.computeSelect2(_939,this.start,this.end,mcs);};jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(_93a,_93b,end0,mcs){var p0=this.pts[_93b];var p1=this.pts[end0];mcs.tempEnv1.init(p0,p1);if(end0-_93b===1){mcs.select(this,_93b);return;}if(!_93a.intersects(mcs.tempEnv1)){return;}var mid=parseInt((_93b+end0)/2);if(_93b<mid){this.computeSelect2(_93a,_93b,mid,mcs);}if(mid<end0){this.computeSelect2(_93a,mid,end0,mcs);}};jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(mc,mco){if(arguments.length===6){return this.computeOverlaps2.apply(this,arguments);}this.computeOverlaps2(this.start,this.end,mc,mc.start,mc.end,mco);};jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(_93c,end0,mc,_93d,end1,mco){var p00=this.pts[_93c];var p01=this.pts[end0];var p10=mc.pts[_93d];var p11=mc.pts[end1];if(end0-_93c===1&&end1-_93d===1){mco.overlap(this,_93c,mc,_93d);return;}mco.tempEnv1.init(p00,p01);mco.tempEnv2.init(p10,p11);if(!mco.tempEnv1.intersects(mco.tempEnv2)){return;}var mid0=parseInt((_93c+end0)/2);var mid1=parseInt((_93d+end1)/2);if(_93c<mid0){if(_93d<mid1){this.computeOverlaps2(_93c,mid0,mc,_93d,mid1,mco);}if(mid1<end1){this.computeOverlaps2(_93c,mid0,mc,mid1,end1,mco);}}if(mid0<end0){if(_93d<mid1){this.computeOverlaps2(mid0,end0,mc,_93d,mid1,mco);}if(mid1<end1){this.computeOverlaps2(mid0,end0,mc,mid1,end1,mco);}}};(function(){var _93e=jsts.geom.Location;var _93f=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(_940){var _941=_940;if(_940===undefined||_940===null){this.matrix=[[],[],[]];this.setAll(_93f.FALSE);}else{if(typeof _940==="string"){this.set(_940);}else{if(_941 instanceof jsts.geom.IntersectionMatrix){this.matrix[_93e.INTERIOR][_93e.INTERIOR]=_941.matrix[_93e.INTERIOR][_93e.INTERIOR];this.matrix[_93e.INTERIOR][_93e.BOUNDARY]=_941.matrix[_93e.INTERIOR][_93e.BOUNDARY];this.matrix[_93e.INTERIOR][_93e.EXTERIOR]=_941.matrix[_93e.INTERIOR][_93e.EXTERIOR];this.matrix[_93e.BOUNDARY][_93e.INTERIOR]=_941.matrix[_93e.BOUNDARY][_93e.INTERIOR];this.matrix[_93e.BOUNDARY][_93e.BOUNDARY]=_941.matrix[_93e.BOUNDARY][_93e.BOUNDARY];this.matrix[_93e.BOUNDARY][_93e.EXTERIOR]=_941.matrix[_93e.BOUNDARY][_93e.EXTERIOR];this.matrix[_93e.EXTERIOR][_93e.INTERIOR]=_941.matrix[_93e.EXTERIOR][_93e.INTERIOR];this.matrix[_93e.EXTERIOR][_93e.BOUNDARY]=_941.matrix[_93e.EXTERIOR][_93e.BOUNDARY];this.matrix[_93e.EXTERIOR][_93e.EXTERIOR]=_941.matrix[_93e.EXTERIOR][_93e.EXTERIOR];}}}};jsts.geom.IntersectionMatrix.prototype.matrix=null;jsts.geom.IntersectionMatrix.prototype.add=function(im){var i,j;for(i=0;i<3;i++){for(j=0;j<3;j++){this.setAtLeast(i,j,im.get(i,j));}}};jsts.geom.IntersectionMatrix.matches=function(_942,_943){if(typeof _942==="string"){return jsts.geom.IntersectionMatrix.matches2.call(this,arguments);}if(_943==="*"){return true;}if(_943==="T"&&(_942>=0||_942===_93f.TRUE)){return true;}if(_943==="F"&&_942===_93f.FALSE){return true;}if(_943==="0"&&_942===_93f.P){return true;}if(_943==="1"&&_942===_93f.L){return true;}if(_943==="2"&&_942===_93f.A){return true;}return false;};jsts.geom.IntersectionMatrix.matches2=function(_944,_945){var m=new jsts.geom.IntersectionMatrix(_944);return m.matches(_945);};jsts.geom.IntersectionMatrix.prototype.set=function(row,_946,_947){if(typeof row==="string"){this.set2(row);return;}this.matrix[row][_946]=_947;};jsts.geom.IntersectionMatrix.prototype.set2=function(_948){for(var i=0;i<_948.length();i++){var row=i/3;var col=i%3;this.matrix[row][col]=_93f.toDimensionValue(_948.charAt(i));}};jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(row,_949,_94a){if(arguments.length===1){this.setAtLeast2(arguments[0]);return;}if(this.matrix[row][_949]<_94a){this.matrix[row][_949]=_94a;}};jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(row,_94b,_94c){if(row>=0&&_94b>=0){this.setAtLeast(row,_94b,_94c);}};jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(_94d){var i;for(i=0;i<_94d.length;i++){var row=parseInt(i/3);var col=parseInt(i%3);this.setAtLeast(row,col,jsts.geom.Dimension.toDimensionValue(_94d.charAt(i)));}};jsts.geom.IntersectionMatrix.prototype.setAll=function(_94e){var ai,bi;for(ai=0;ai<3;ai++){for(bi=0;bi<3;bi++){this.matrix[ai][bi]=_94e;}}};jsts.geom.IntersectionMatrix.prototype.get=function(row,_94f){return this.matrix[row][_94f];};jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[_93e.INTERIOR][_93e.INTERIOR]===_93f.FALSE&&this.matrix[_93e.INTERIOR][_93e.BOUNDARY]===_93f.FALSE&&this.matrix[_93e.BOUNDARY][_93e.INTERIOR]===_93f.FALSE&&this.matrix[_93e.BOUNDARY][_93e.BOUNDARY]===_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return !this.isDisjoint();};jsts.geom.IntersectionMatrix.prototype.isTouches=function(_950,_951){if(_950>_951){return this.isTouches(_951,_950);}if((_950==_93f.A&&_951==_93f.A)||(_950==_93f.L&&_951==_93f.L)||(_950==_93f.L&&_951==_93f.A)||(_950==_93f.P&&_951==_93f.A)||(_950==_93f.P&&_951==_93f.L)){return this.matrix[_93e.INTERIOR][_93e.INTERIOR]===_93f.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.BOUNDARY],"T"));}return false;};jsts.geom.IntersectionMatrix.prototype.isCrosses=function(_952,_953){if((_952==_93f.P&&_953==_93f.L)||(_952==_93f.P&&_953==_93f.A)||(_952==_93f.L&&_953==_93f.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.EXTERIOR],"T");}if((_952==_93f.L&&_953==_93f.P)||(_952==_93f.A&&_953==_93f.P)||(_952==_93f.A&&_953==_93f.L)){return jsts.geom.IntersectionMatrix.matches(matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.EXTERIOR][_93e.INTERIOR],"T");}if(_952===_93f.L&&_953===_93f.L){return this.matrix[_93e.INTERIOR][_93e.INTERIOR]===0;}return false;};jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&this.matrix[_93e.INTERIOR][_93e.EXTERIOR]==_93f.FALSE&&this.matrix[_93e.BOUNDARY][_93e.EXTERIOR]==_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&this.matrix[_93e.EXTERIOR][_93e.INTERIOR]==_93f.FALSE&&this.matrix[_93e.EXTERIOR][_93e.BOUNDARY]==_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var _954=jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.BOUNDARY],"T");return _954&&this.matrix[_93e.EXTERIOR][_93e.INTERIOR]==_93f.FALSE&&this.matrix[_93e.EXTERIOR][_93e.BOUNDARY]==_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var _955=jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.BOUNDARY][_93e.BOUNDARY],"T");return _955&&this.matrix[_93e.INTERIOR][_93e.EXTERIOR]===_93f.FALSE&&this.matrix[_93e.BOUNDARY][_93e.EXTERIOR]===_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isEquals=function(_956,_957){if(_956!==_957){return false;}return jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&this.matrix[_93e.EXTERIOR][_93e.INTERIOR]===_93f.FALSE&&this.matrix[_93e.INTERIOR][_93e.EXTERIOR]===_93f.FALSE&&this.matrix[_93e.EXTERIOR][_93e.BOUNDARY]===_93f.FALSE&&this.matrix[_93e.BOUNDARY][_93e.EXTERIOR]===_93f.FALSE;};jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(_958,_959){if((_958==_93f.P&&_959===_93f.P)||(_958==_93f.A&&_959===_93f.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.EXTERIOR][_93e.INTERIOR],"T");}if(_958===_93f.L&&_959===_93f.L){return this.matrix[_93e.INTERIOR][_93e.INTERIOR]==1&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.INTERIOR][_93e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[_93e.EXTERIOR][_93e.INTERIOR],"T");}return false;};jsts.geom.IntersectionMatrix.prototype.matches=function(_95a){if(_95a.length!=9){throw new jsts.error.IllegalArgumentException("Should be length 9: "+_95a);}for(var ai=0;ai<3;ai++){for(var bi=0;bi<3;bi++){if(!jsts.geom.IntersectionMatrix.matches(this.matrix[ai][bi],_95a.charAt(3*ai+bi))){return false;}}}return true;};jsts.geom.IntersectionMatrix.prototype.transpose=function(){var temp=matrix[1][0];this.matrix[1][0]=this.matrix[0][1];this.matrix[0][1]=temp;temp=this.matrix[2][0];this.matrix[2][0]=this.matrix[0][2];this.matrix[0][2]=temp;temp=this.matrix[2][1];this.matrix[2][1]=this.matrix[1][2];this.matrix[1][2]=temp;return this;};jsts.geom.IntersectionMatrix.prototype.toString=function(){var ai,bi,buf="";for(ai=0;ai<3;ai++){for(bi=0;bi<3;bi++){buf+=_93f.toDimensionSymbol(this.matrix[ai][bi]);}}return buf;};})();jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(_95b){this.subdiv=_95b;this.lastEdge=null;this.init();};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge();};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var _95c=this.subdiv.getEdges();return _95c[0];};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(v){if(!this.lastEdge.isLive()){this.init();}var e=this.subdiv.locateFromEdge(v,this.lastEdge);this.lastEdge=e;return e;};jsts.noding.SegmentNodeList=function(edge){this.nodeMap=new javascript.util.TreeMap();this.edge=edge;};jsts.noding.SegmentNodeList.prototype.nodeMap=null;jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator();};jsts.noding.SegmentNodeList.prototype.edge=null;jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge;};jsts.noding.SegmentNodeList.prototype.add=function(_95d,_95e){var _95f=new jsts.noding.SegmentNode(this.edge,_95d,_95e,this.edge.getSegmentOctant(_95e));var ei=this.nodeMap.get(_95f);if(ei!==null){jsts.util.Assert.isTrue(ei.coord.equals2D(_95d),"Found equal nodes with different coordinates");return ei;}this.nodeMap.put(_95f,_95f);return _95f;};jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var _960=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0);this.add(this.edge.getCoordinate(_960),_960);};jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var _961=[];this.findCollapsesFromInsertedNodes(_961);this.findCollapsesFromExistingVertices(_961);for(var i=0;i<_961.length;i++){var _962=_961[i];this.add(this.edge.getCoordinate(_962),_962);}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(_963){for(var i=0;i<this.edge.size()-2;i++){var p0=this.edge.getCoordinate(i);var p1=this.edge.getCoordinate(i+1);var p2=this.edge.getCoordinate(i+2);if(p0.equals2D(p2)){_963.push(i+1);}}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(_964){var _965=[null];var it=this.iterator();var _966=it.next();while(it.hasNext()){var ei=it.next();var _967=this.findCollapseIndex(_966,ei,_965);if(_967){_964.push(_965[0]);}_966=ei;}};jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(ei0,ei1,_968){if(!ei0.coord.equals2D(ei1.coord)){return false;}var _969=ei1.segmentIndex-ei0.segmentIndex;if(!ei1.isInterior()){_969--;}if(_969===1){_968[0]=ei0.segmentIndex+1;return true;}return false;};jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(_96a){this.addEndpoints();this.addCollapsedNodes();var it=this.iterator();var _96b=it.next();while(it.hasNext()){var ei=it.next();var _96c=this.createSplitEdge(_96b,ei);_96a.add(_96c);_96b=ei;}};jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(_96d){var _96e=edge.getCoordinates();var _96f=_96d[0];var pt0=_96f.getCoordinate(0);if(!pt0.equals2D(_96e[0])){throw new Error("bad split edge start point at "+pt0);}var _970=_96d[_96d.length-1];var _971=_970.getCoordinates();var ptn=_971[_971.length-1];if(!ptn.equals2D(_96e[_96e.length-1])){throw new Error("bad split edge end point at "+ptn);}};jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(ei0,ei1){var npts=ei1.segmentIndex-ei0.segmentIndex+2;var _972=this.edge.getCoordinate(ei1.segmentIndex);var _973=ei1.isInterior()||!ei1.coord.equals2D(_972);if(!_973){npts--;}var pts=[];var ipt=0;pts[ipt++]=new jsts.geom.Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++){pts[ipt++]=this.edge.getCoordinate(i);}if(_973){pts[ipt]=ei1.coord;}return new jsts.noding.NodedSegmentString(pts,this.edge.getData());};jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory);};jsts.io.WKTWriter.prototype.write=function(_974){var wkt=this.parser.write(_974);return wkt;};jsts.io.WKTWriter.toLineString=function(p0,p1){if(arguments.length!==2){throw new jsts.error.NotImplementedError();}return "LINESTRING ( "+p0.x+" "+p0.y+", "+p1.x+" "+p1.y+" )";};jsts.io.WKTReader=function(_975){this.geometryFactory=_975||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.WKTParser(this.geometryFactory);};jsts.io.WKTReader.prototype.read=function(wkt){var _976=this.parser.read(wkt);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(_976);}return _976;};jsts.io.WKTReader.prototype.reducePrecision=function(_977){var i,len;if(_977.coordinate){this.precisionModel.makePrecise(_977.coordinate);}else{if(_977.points){for(i=0,len=_977.points.length;i<len;i++){this.precisionModel.makePrecise(_977.points[i]);}}else{if(_977.geometries){for(i=0,len=_977.geometries.length;i<len;i++){this.reducePrecision(_977.geometries[i]);}}}}};jsts.triangulate.quadedge.QuadEdgeSubdivision=function(env,_978){this.tolerance=_978;this.edgeCoincidenceTolerance=_978/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR;this.visitedKey=0;this.quadEdges=[];this.startingEdge;this.tolerance;this.edgeCoincidenceTolerance;this.frameEnv;this.locator=null;this.seg=new jsts.geom.LineSegment();this.triEdges=new Array(3);this.frameVertex=new Array(3);this.createFrame(env);this.startingEdge=this.initSubdiv();this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this);};jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1000;jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(_979,_97a){_97a[0]=_979;_97a[1]=_97a[0].lNext();_97a[2]=_97a[1].lNext();if(_97a[2].lNext()!=_97a[0]){throw new jsts.IllegalArgumentError("Edges do not form a triangle");}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(env){var _97b,_97c,_97d;_97b=env.getWidth();_97c=env.getHeight();_97d=0;if(_97b>_97c){_97d=_97b*10;}else{_97d=_97c*10;}this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((env.getMaxX()+env.getMinX())/2,env.getMaxY()+_97d);this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(env.getMinX()-_97d,env.getMinY()-_97d);this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(env.getMaxX()+_97d,env.getMinY()-_97d);this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate());this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate());};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var ea,eb,ec;ea=this.makeEdge(this.frameVertex[0],this.frameVertex[1]);eb=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);jsts.triangulate.quadedge.QuadEdge.splice(ea.sym(),eb);ec=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);jsts.triangulate.quadedge.QuadEdge.splice(eb.sym(),ec);jsts.triangulate.quadedge.QuadEdge.splice(ec.sym(),ea);return ea;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){if(arguments.length>0){return this.getEdgesByFactory(arguments[0]);}else{return this.quadEdges;}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(_97e){this.locator=_97e;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(o,d){var q=jsts.triangulate.quadedge.QuadEdge.makeEdge(o,d);this.quadEdges.push(q);return q;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(a,b){var q=jsts.triangulate.quadedge.QuadEdge.connect(a,b);this.quadEdges.push(q);return q;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(e){jsts.triangulate.quadedge.QuadEdge.splice(e,e.oPrev());jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),e.sym().oPrev());var eSym,eRot,_97f;e.eSym=e.sym();eRot=e.rot;_97f=e.rot.sym();var idx=this.quadEdges.indexOf(e);if(idx!==-1){this.quadEdges.splice(idx,1);}idx=this.quadEdges.indexOf(eSym);if(idx!==-1){this.quadEdges.splice(idx,1);}idx=this.quadEdges.indexOf(eRot);if(idx!==-1){this.quadEdges.splice(idx,1);}idx=this.quadEdges.indexOf(_97f);if(idx!==-1){this.quadEdges.splice(idx,1);}e.delete_jsts();eSym.delete_jsts();eRot.delete_jsts();_97f.delete_jsts();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(v,_980){var iter=0,_981=this.quadEdges.length,e;e=_980;while(true){iter++;if(iter>_981){throw new jsts.error.LocateFailureError(e.toLineSegment());}if((v.equals(e.orig()))||(v.equals(e.dest()))){break;}else{if(v.rightOf(e)){e=e.sym();}else{if(!v.rightOf(e.oNext())){e=e.oNext();}else{if(!v.rightOf(e.dPrev())){e=e.dPrev();}else{break;}}}}}return e;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){if(arguments.length===1){if(arguments[0] instanceof jsts.triangulate.quadedge.Vertex){return this.locateByVertex(arguments[0]);}else{return this.locateByCoordinate(arguments[0]);}}else{return this.locateByCoordinates(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(v){return this.locator.locate(v);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(p){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(p));};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(p0,p1){var e,base,_982;var e=this.locator.locate(new jsts.triangulate.quadedge.Vertex(p0));if(e===null){return null;}base=e;if(e.dest().getCoordinate().equals2D(p0)){base=e.sym();}_982=base;do{if(_982.dest().getCoordinate().equals2D(p1)){return _982;}_982=_982.oNext();}while(_982!=base);return null;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(v){var e,base,_983;e=this.locate(v);if((v.equals(e.orig(),this.tolerance))||(v.equals(e.dest(),this.tolerance))){return e;}base=this.makeEdge(e.orig(),v);jsts.triangulate.quadedge.QuadEdge.splice(base,e);_983=base;do{base=this.connect(e,base.sym());e=base.oPrev();}while(e.lNext()!=_983);return _983;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(e){if(this.isFrameVertex(e.orig())||this.isFrameVertex(e.dest())){return true;}return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(e){var _984,_985,_986,_987;_984=new Array(3);this.getTriangleEdges(e,_984);_985=new Array(3);this.getTriangleEdges(e.sym(),_985);_986=e.lNext().dest();if(this.isFrameVertex(_986)){return true;}_987=e.sym().lNext().dest();if(this.isFrameVertex(_987)){return true;}return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(v){if(v.equals(this.frameVertex[0])){return true;}if(v.equals(this.frameVertex[1])){return true;}if(v.equals(this.frameVertex[2])){return true;}return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(e,p){this.seg.setCoordinates(e.orig().getCoordinate(),e.dest().getCoordinate());var dist=this.seg.distance(p);return dist<this.edgeCoincidenceTolerance;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(e,v){if((v.equals(e.orig(),this.tolerance))||(v.equals(e.dest(),this.tolerance))){return true;}return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(_988){var _989=[],i,il,qe,v,vd;i=0,il=this.quadEdges.length;for(i;i<il;i++){qe=this.quadEdges[i];v=qe.orig();if(_988||!this.isFrameVertex(v)){_989.push(v);}vd=qe.dest();if(_988||!this.isFrameVertex(vd)){_989.push(vd);}}return _989;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(_98a){var _98b,_98c,i,il,qe,v,qd,vd;_98b=[];_98c=[];i=0,il=this.quadEdges.length;for(i;i<il;i++){qe=this.quadEdges[i];v=qe.orig();if(_98c.indexOf(v)===-1){_98c.push(v);if(_98a||!this.isFrameVertex(v)){_98b.push(qe);}}qd=qe.sym();vd=qd.orig();if(_98c.indexOf(vd)===-1){_98c.push(vd);if(_98a||!this.isFrameVertex(vd)){_98b.push(qd);}}}return _98b;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(_98d){this.visitedKey++;var _98e,_98f,_990,edge,_991;_98e=[];_98f=[];_98f.push(this.startingEdge);_990=[];while(_98f.length>0){edge=_98f.pop();if(_990.indexOf(edge)===-1){_991=edge.getPrimary();if(_98d||!this.isFrameEdge(_991)){_98e.push(_991);}_98f.push(edge.oNext());_98f.push(edge.sym().oNext());_990.push(edge);_990.push(edge.sym());}}return _98e;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(_992,_993){this.visitedKey++;var _994,_995,edge,_996;_994=[];_994.push(this.startingEdge);_995=[];while(_994.length>0){edge=_994.pop();if(_995.indexOf(edge)===-1){_996=this.fetchTriangleToVisit(edge,_994,_993,_995);if(_996!==null){_992.visit(_996);}}}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(edge,_997,_998,_999){var curr,_99a,_99b,sym;curr=edge;_99a=0;_99b=false;do{this.triEdges[_99a]=curr;if(this.isFrameEdge(curr)){_99b=true;}sym=curr.sym();if(_999.indexOf(sym)===-1){_997.push(sym);}_999.push(curr);_99a++;curr=curr.lNext();}while(curr!==edge);if(_99b&&!_998){return null;}return this.triEdges;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(_99c){var _99d=new jsts.triangulate.quadedge.TriangleEdgesListVisitor();this.visitTriangles(_99d,_99c);return _99d.getTriangleEdges();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(_99e){var _99f=new TriangleVertexListVisitor();this.visitTriangles(_99f,_99e);return _99f.getTriangleVertices();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(_9a0){var _9a1=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor();this.visitTriangles(_9a1,_9a0);return _9a1.getTriangles();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(_9a2){var _9a3,_9a4,i,il,qe,_9a5;_9a3=this.getPrimaryEdges(false);_9a4=[];i=0;il=_9a3.length;for(i;i<il;i++){qe=_9a3[i];_9a5=[];_9a5[0]=(qe.orig().getCoordinate());_9a5[1]=(qe.dest().getCoordinate());_9a4[i]=_9a2.createLineString(_9a5);}return _9a2.createMultiLineString(_9a4);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(_9a6){var _9a7,tris,_9a8,i,il;_9a7=this.getTriangleCoordinates(false);tris=new Array(_9a7.length);i=0,il=_9a7.length;for(i;i<il;i++){_9a8=_9a7[i];tris[i]=_9a6.createPolygon(_9a6.createLinearRing(_9a8,null));}return _9a6.createGeometryCollection(tris);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(_9a9){var _9aa=this.getVoronoiCellPolygons(_9a9);return _9a9.createGeometryCollection(_9aa);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(_9ab){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor(),true);var _9ac,_9ad,i,il,qe;_9ac=[];_9ad=this.getVertexUniqueEdges(false);i=0,il=_9ad.length;for(i;i<il;i++){qe=_9ad[i];_9ac.push(this.getVoronoiCellPolygon(qe,_9ab));}return _9ac;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(qe,_9ae){var _9af,_9b0,cc,_9b1,_9b2,v;_9af=[];startQE=qe;do{cc=qe.rot.orig().getCoordinate();_9af.push(cc);qe=qe.oPrev();}while(qe!==startQE);_9b1=new jsts.geom.CoordinateList([],false);_9b1.add(_9af,false);_9b1.closeRing();if(_9b1.size()<4){_9b1.add(_9b1.get(_9b1.size()-1),true);}_9b2=_9ae.createPolygon(_9ae.createLinearRing(_9b1.toArray()),null);v=startQE.orig();return _9b2;};jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){};jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(_9b3){var a,b,c,cc,_9b4,i;a=_9b3[0].orig().getCoordinate();b=_9b3[1].orig().getCoordinate();c=_9b3[2].orig().getCoordinate();cc=jsts.geom.Triangle.circumcentre(a,b,c);_9b4=new jsts.triangulate.quadedge.Vertex(cc);i=0;for(i;i<3;i++){_9b3[i].rot.setOrig(_9b4);}};jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[];};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(_9b5){var _9b6=_9b5.concat();this.triList.push(_9b6);};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList;};jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[];};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(_9b7){var _9b8=[];_9b8.push(trieEdges[0].orig());_9b8.push(trieEdges[1].orig());_9b8.push(trieEdges[2].orig());this.triList.push(_9b8);};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList;};jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],false);this.triCoords=[];};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(_9b9){this.coordList=new jsts.geom.CoordinateList([],false);var i=0,v,pts;for(i;i<3;i++){v=_9b9[i].orig();this.coordList.add(v.getCoordinate());}if(this.coordList.size()>0){this.coordList.closeRing();pts=this.coordList.toArray();if(pts.length!==4){return;}this.triCoords.push(pts);}};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords;};jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var e=arguments[0] instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1];var edge=e.getEdge();var _9ba=e.getCoordinate();var _9bb=e.getDirectedCoordinate();var _9bc=new jsts.geomgraph.Label(e.getLabel());jsts.geomgraph.EdgeEnd.call(this,edge,_9ba,_9bb,_9bc);this.insert(e);};jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd();jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null;jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label;};jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds;};jsts.operation.relate.EdgeEndBundle.prototype.insert=function(e){this.edgeEnds.push(e);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(_9bd){var _9be=false;for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];if(e.getLabel().isArea()){_9be=true;}}if(_9be){this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);}else{this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);}for(var i=0;i<2;i++){this.computeLabelOn(i,_9bd);if(_9be){this.computeLabelSides(i);}}};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(_9bf,_9c0){var _9c1=0;var _9c2=false;for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];var loc=e.getLabel().getLocation(_9bf);if(loc==jsts.geom.Location.BOUNDARY){_9c1++;}if(loc==jsts.geom.Location.INTERIOR){_9c2=true;}}var loc=jsts.geom.Location.NONE;if(_9c2){loc=jsts.geom.Location.INTERIOR;}if(_9c1>0){loc=jsts.geomgraph.GeometryGraph.determineBoundary(_9c0,_9c1);}this.label.setLocation(_9bf,loc);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(_9c3){this.computeLabelSide(_9c3,jsts.geomgraph.Position.LEFT);this.computeLabelSide(_9c3,jsts.geomgraph.Position.RIGHT);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(_9c4,side){for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];if(e.getLabel().isArea()){var loc=e.getLabel().getLocation(_9c4,side);if(loc===jsts.geom.Location.INTERIOR){this.label.setLocation(_9c4,side,jsts.geom.Location.INTERIOR);return;}else{if(loc===jsts.geom.Location.EXTERIOR){this.label.setLocation(_9c4,side,jsts.geom.Location.EXTERIOR);}}}}};jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(im){jsts.geomgraph.Edge.updateIM(this.label,im);};jsts.index.kdtree.KdTree=function(_9c5){var tol=0;if(_9c5!==undefined){tol=_9c5;}this.root=null;this.last=null;this.numberOfNodes=0;this.tolerance=tol;};jsts.index.kdtree.KdTree.prototype.insert=function(){if(arguments.length===1){return this.insertCoordinate.apply(this,arguments[0]);}else{return this.insertWithData.apply(this,arguments[0],arguments[1]);}};jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(p){return this.insertWithData(p,null);};jsts.index.kdtree.KdTree.prototype.insertWithData=function(p,data){if(this.root===null){this.root=new jsts.index.kdtree.KdNode(p,data);return this.root;}var _9c6=this.root,_9c7=this.root,_9c8=true,_9c9=true;while(_9c6!==last){if(_9c8){_9c9=p.x<_9c6.getX();}else{_9c9=p.y<_9c6.getY();}_9c7=_9c6;if(_9c9){_9c6=_9c6.getLeft();}else{_9c6=_9c6.getRight();}if(_9c6!==null){var _9ca=p.distance(_9c6.getCoordinate())<=this.tolerance;if(_9ca){_9c6.increment();return _9c6;}}_9c8=!_9c8;}this.numberOfNodes=numberOfNodes+1;var node=new jsts.index.kdtree.KdNode(p,data);node.setLeft(this.last);node.setRight(this.last);if(_9c9){_9c7.setLeft(node);}else{_9c7.setRight(node);}return node;};jsts.index.kdtree.KdTree.prototype.queryNode=function(_9cb,_9cc,_9cd,odd,_9ce){if(_9cb===_9cc){return;}var min,max,_9cf;if(odd){min=_9cd.getMinX();max=_9cd.getMaxX();_9cf=_9cb.getX();}else{min=_9cd.getMinY();max=_9cd.getMaxY();_9cf=_9cb.getY();}var _9d0=min<_9cf;var _9d1=_9cf<=max;if(_9d0){this.queryNode(_9cb.getLeft(),_9cc,_9cd,!odd,_9ce);}if(_9cd.contains(_9cb.getCoordinate())){_9ce.add(_9cb);}if(_9d1){this.queryNode(_9cb.getRight(),_9cc,_9cd,!odd,_9ce);}};jsts.index.kdtree.KdTree.prototype.query=function(){if(arguments.length===1){return this.queryByEnvelope.apply(this,arguments[0]);}else{return this.queryWithArray.apply(this,arguments[0],arguments[1]);}};jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(_9d2){var _9d3=[];this.queryNode(this.root,this.last,_9d2,true,_9d3);return _9d3;};jsts.index.kdtree.KdTree.prototype.queryWithArray=function(_9d4,_9d5){this.queryNode(this.root,this.last,_9d4,true,_9d5);};jsts.geom.Triangle=function(p0,p1,p2){this.p0=p0;this.p1=p1;this.p2=p2;};jsts.geom.Triangle.isAcute=function(a,b,c){if(!jsts.algorithm.Angle.isAcute(a,b,c)){return false;}if(!jsts.algorithm.Angle.isAcute(b,c,a)){return false;}if(!jsts.algorithm.Angle.isAcute(c,a,b)){return false;}return true;};jsts.geom.Triangle.perpendicularBisector=function(a,b){var dx,dy,l1,l2;dx=b.x-a.x;dy=b.y-a.y;l1=new jsts.algorithm.HCoordinate(a.x+dx/2,a.y+dy/2,1);l2=new jsts.algorithm.HCoordinate(a.x-dy+dx/2,a.y+dx+dy/2,1);return new jsts.algorithm.HCoordinate(l1,l2);};jsts.geom.Triangle.circumcentre=function(a,b,c){var cx,cy,ax,ay,bx,by,_9d6,numx,numy,ccx,ccy;cx=c.x;cy=c.y;ax=a.x-cx;ay=a.y-cy;bx=b.x-cx;by=b.y-cy;_9d6=2*jsts.geom.Triangle.det(ax,ay,bx,by);numx=jsts.geom.Triangle.det(ay,ax*ax+ay*ay,by,bx*bx+by*by);numy=jsts.geom.Triangle.det(ax,ax*ax+ay*ay,bx,bx*bx+by*by);ccx=cx-numx/_9d6;ccy=cy+numy/_9d6;return new jsts.geom.Coordinate(ccx,ccy);};jsts.geom.Triangle.det=function(m00,m01,m10,m11){return m00*m11-m01*m10;};jsts.geom.Triangle.inCentre=function(a,b,c){var len0,len1,len2,_9d7,_9d8,_9d9;len0=b.distance(c);len1=a.distance(c);len2=a.distance(b);_9d7=len0+len1+len2;_9d8=(len0*a.x+len1*b.x+len2*c.x)/_9d7;_9d9=(len0*a.y+len1*b.y+len2*c.y)/_9d7;return new jsts.geom.Coordinate(_9d8,_9d9);};jsts.geom.Triangle.centroid=function(a,b,c){var x,y;x=(a.x+b.x+c.x)/3;y=(a.y+b.y+c.y)/3;return new jsts.geom.Coordinate(x,y);};jsts.geom.Triangle.longestSideLength=function(a,b,c){var _9da,_9db,_9dc,_9dd;_9da=a.distance(b);_9db=b.distance(c);_9dc=c.distance(a);_9dd=_9da;if(_9db>_9dd){_9dd=_9db;}if(_9dc>_9dd){_9dd=_9dc;}return _9dd;};jsts.geom.Triangle.angleBisector=function(a,b,c){var len0,len2,frac,dx,dy,_9de;len0=b.distance(a);len2=b.distance(c);frac=len0/(len0+len2);dx=c.x-a.x;dy=c.y-a.y;_9de=new jsts.geom.Coordinate(a.x+frac*dx,a.y+frac*dy);return _9de;};jsts.geom.Triangle.area=function(a,b,c){return Math.abs(((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2);};jsts.geom.Triangle.signedArea=function(a,b,c){return ((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2;};jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2);};jsts.noding.OrientedCoordinateArray=function(pts){this.pts=pts;this._orientation=jsts.noding.OrientedCoordinateArray.orientation(pts);};jsts.noding.OrientedCoordinateArray.prototype.pts=null;jsts.noding.OrientedCoordinateArray.prototype._orientation=undefined;jsts.noding.OrientedCoordinateArray.orientation=function(pts){return jsts.geom.CoordinateArrays.increasingDirection(pts)===1;};jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(o1){var oca=o1;var comp=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,oca.pts,oca._orientation);return comp;};jsts.noding.OrientedCoordinateArray.compareOriented=function(pts1,_9df,pts2,_9e0){var dir1=_9df?1:-1;var dir2=_9e0?1:-1;var _9e1=_9df?pts1.length:-1;var _9e2=_9e0?pts2.length:-1;var i1=_9df?0:pts1.length-1;var i2=_9e0?0:pts2.length-1;var comp=0;while(true){var _9e3=pts1[i1].compareTo(pts2[i2]);if(_9e3!==0){return _9e3;}i1+=dir1;i2+=dir2;var _9e4=i1===_9e1;var _9e5=i2===_9e2;if(_9e4&&!_9e5){return -1;}if(!_9e4&&_9e5){return 1;}if(_9e4&&_9e5){return 0;}}};jsts.algorithm.CentralEndpointIntersector=function(p00,p01,p10,p11){this.pts=[p00,p01,p10,p11];this.compute();};jsts.algorithm.CentralEndpointIntersector.getIntersection=function(p00,p01,p10,p11){var _9e6=new jsts.algorithm.CentralEndpointIntersector(p00,p01,p10,p11);return _9e6.getIntersection();};jsts.algorithm.CentralEndpointIntersector.prototype.pts=null;jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null;jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var _9e7=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(_9e7,this.pts);};jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt;};jsts.algorithm.CentralEndpointIntersector.average=function(pts){var avg=new jsts.geom.Coordinate();var i,n=pts.length;for(i=0;i<n;i++){avg.x+=pts[i].x;avg.y+=pts[i].y;}if(n>0){avg.x/=n;avg.y/=n;}return avg;};jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(p,pts){var _9e8=Number.MAX_VALUE;var i,_9e9=null,dist;for(i=0;i<pts.length;i++){dist=p.distance(pts[i]);if(dist<_9e8){_9e8=dist;_9e9=pts[i];}}return _9e9;};jsts.operation.buffer.BufferOp=function(g,_9ea){this.argGeom=g;this.bufParams=_9ea?_9ea:new jsts.operation.buffer.BufferParameters();};jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12;jsts.operation.buffer.BufferOp.precisionScaleFactor=function(g,_9eb,_9ec){var env=g.getEnvelopeInternal();var _9ed=Math.max(env.getHeight(),env.getWidth());var _9ee=_9eb>0?_9eb:0;var _9ef=_9ed+2*_9ee;var _9f0=(Math.log(_9ef)/Math.log(10)+1);var _9f1=_9f0-_9ec;var _9f2=Math.pow(10,-_9f1);return _9f2;};jsts.operation.buffer.BufferOp.bufferOp=function(g,_9f3){if(arguments.length>2){return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);}var gBuf=new jsts.operation.buffer.BufferOp(g);var _9f4=gBuf.getResultGeometry(_9f3);return _9f4;};jsts.operation.buffer.BufferOp.bufferOp2=function(g,_9f5,_9f6){if(arguments.length>3){return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);}var _9f7=new jsts.operation.buffer.BufferOp(g,_9f6);var _9f8=_9f7.getResultGeometry(_9f5);return _9f8;};jsts.operation.buffer.BufferOp.bufferOp3=function(g,_9f9,_9fa){if(arguments.length>4){return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);}var _9fb=new jsts.operation.buffer.BufferOp(g);_9fb.setQuadrantSegments(_9fa);var _9fc=_9fb.getResultGeometry(_9f9);return _9fc;};jsts.operation.buffer.BufferOp.bufferOp4=function(g,_9fd,_9fe,_9ff){var _a00=new jsts.operation.buffer.BufferOp(g);_a00.setQuadrantSegments(_9fe);_a00.setEndCapStyle(_9ff);var _a01=_a00.getResultGeometry(_9fd);return _a01;};jsts.operation.buffer.BufferOp.prototype.argGeom=null;jsts.operation.buffer.BufferOp.prototype.distance=null;jsts.operation.buffer.BufferOp.prototype.bufParams=null;jsts.operation.buffer.BufferOp.prototype.resultGeometry=null;jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(_a02){this.bufParams.setEndCapStyle(_a02);};jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(_a03){this.bufParams.setQuadrantSegments(_a03);};jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(dist){this.distance=dist;this.computeGeometry();return this.resultGeometry;};jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){this.bufferOriginalPrecision();if(this.resultGeometry!==null){return;}var _a04=this.argGeom.getPrecisionModel();if(_a04.getType()===jsts.geom.PrecisionModel.FIXED){this.bufferFixedPrecision(_a04);}else{this.bufferReducedPrecision();}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var _a05;var _a06=null;for(_a05=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;_a05>=0;_a05--){try{this.bufferReducedPrecision2(_a05);}catch(ex){_a06=ex;}if(this.resultGeometry!==null){return;}}throw _a06;};jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var _a07=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=_a07.buffer(this.argGeom,this.distance);}catch(e){}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(_a08){var _a09=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,_a08);var _a0a=new jsts.geom.PrecisionModel(_a09);this.bufferFixedPrecision(_a0a);};jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(_a0b){var _a0c=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),_a0b.getScale());var _a0d=new jsts.operation.buffer.BufferBuilder(this.bufParams);_a0d.setWorkingPrecisionModel(_a0b);_a0d.setNoder(_a0c);this.resultGeometry=_a0d.buffer(this.argGeom,this.distance);};(function(){var _a0e=jsts.geom.Location;var _a0f=jsts.geomgraph.Position;var _a10=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(_a11,_a12,_a13){jsts.geomgraph.PlanarGraph.call(this);this.lineEdgeMap=new javascript.util.HashMap();this.ptLocator=new jsts.algorithm.PointLocator();this.argIndex=_a11;this.parentGeom=_a12;this.boundaryNodeRule=_a13||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(_a12!==null){this.add(_a12);}};jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph();jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph;jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleMCSweepLineIntersector();};jsts.geomgraph.GeometryGraph.determineBoundary=function(_a14,_a15){return _a14.isInBoundary(_a15)?_a0e.BOUNDARY:_a0e.INTERIOR;};jsts.geomgraph.GeometryGraph.prototype.parentGeom=null;jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null;jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=true;jsts.geomgraph.GeometryGraph.prototype.argIndex=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null;jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=false;jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null;jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null;jsts.geomgraph.GeometryGraph.prototype.ptLocator=null;jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom;};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){if(this.boundaryNodes===null){this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex);}return this.boundaryNodes;};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule;};jsts.geomgraph.GeometryGraph.prototype.findEdge=function(line){return this.lineEdgeMap.get(line);};jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(_a16){for(var i=this.edges.iterator();i.hasNext();){var e=i.next();e.eiList.addSplitEdges(_a16);}};jsts.geomgraph.GeometryGraph.prototype.add=function(g){if(g.isEmpty()){return;}if(g instanceof jsts.geom.MultiPolygon){this.useBoundaryDeterminationRule=false;}if(g instanceof jsts.geom.Polygon){this.addPolygon(g);}else{if(g instanceof jsts.geom.LineString){this.addLineString(g);}else{if(g instanceof jsts.geom.Point){this.addPoint(g);}else{if(g instanceof jsts.geom.MultiPoint){this.addCollection(g);}else{if(g instanceof jsts.geom.MultiLineString){this.addCollection(g);}else{if(g instanceof jsts.geom.MultiPolygon){this.addCollection(g);}else{if(g instanceof jsts.geom.GeometryCollection){this.addCollection(g);}else{throw new jsts.error.IllegalArgumentError("Geometry type not supported.");}}}}}}}};jsts.geomgraph.GeometryGraph.prototype.addCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.add(g);}};jsts.geomgraph.GeometryGraph.prototype.addEdge=function(e){this.insertEdge(e);var _a17=e.getCoordinates();this.insertPoint(this.argIndex,_a17[0],_a0e.BOUNDARY);this.insertPoint(this.argIndex,_a17[_a17.length-1],_a0e.BOUNDARY);};jsts.geomgraph.GeometryGraph.prototype.addPoint=function(p){var _a18=p.getCoordinate();this.insertPoint(this.argIndex,_a18,_a0e.INTERIOR);};jsts.geomgraph.GeometryGraph.prototype.addLineString=function(line){var _a19=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());if(_a19.length<2){this.hasTooFewPoints=true;this.invalidPoint=coords[0];return;}var e=new jsts.geomgraph.Edge(_a19,new jsts.geomgraph.Label(this.argIndex,_a0e.INTERIOR));this.lineEdgeMap.put(line,e);this.insertEdge(e);_a10.isTrue(_a19.length>=2,"found LineString with single point");this.insertBoundaryPoint(this.argIndex,_a19[0]);this.insertBoundaryPoint(this.argIndex,_a19[_a19.length-1]);};jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(lr,_a1a,_a1b){if(lr.isEmpty()){return;}var _a1c=jsts.geom.CoordinateArrays.removeRepeatedPoints(lr.getCoordinates());if(_a1c.length<4){this.hasTooFewPoints=true;this.invalidPoint=_a1c[0];return;}var left=_a1a;var _a1d=_a1b;if(jsts.algorithm.CGAlgorithms.isCCW(_a1c)){left=_a1b;_a1d=_a1a;}var e=new jsts.geomgraph.Edge(_a1c,new jsts.geomgraph.Label(this.argIndex,_a0e.BOUNDARY,left,_a1d));this.lineEdgeMap.put(lr,e);this.insertEdge(e);this.insertPoint(this.argIndex,_a1c[0],_a0e.BOUNDARY);};jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(p){this.addPolygonRing(p.getExteriorRing(),_a0e.EXTERIOR,_a0e.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);this.addPolygonRing(hole,_a0e.INTERIOR,_a0e.EXTERIOR);}};jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(g,li,_a1e){var si=new jsts.geomgraph.index.SegmentIntersector(li,_a1e,true);si.setBoundaryNodes(this.getBoundaryNodes(),g.getBoundaryNodes());var esi=this.createEdgeSetIntersector();esi.computeIntersections(this.edges,g.edges,si);return si;};jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(li,_a1f){var si=new jsts.geomgraph.index.SegmentIntersector(li,true,false);var esi=this.createEdgeSetIntersector();if(!_a1f&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)){esi.computeIntersections(this.edges,si,false);}else{esi.computeIntersections(this.edges,si,true);}this.addSelfIntersectionNodes(this.argIndex);return si;};jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(_a20,_a21,_a22){var n=this.nodes.addNode(_a21);var lbl=n.getLabel();if(lbl==null){n.label=new jsts.geomgraph.Label(_a20,_a22);}else{lbl.setLocation(_a20,_a22);}};jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(_a23,_a24){var n=this.nodes.addNode(_a24);var lbl=n.getLabel();var _a25=1;var loc=_a0e.NONE;if(lbl!==null){loc=lbl.getLocation(_a23,_a0f.ON);}if(loc===_a0e.BOUNDARY){_a25++;}var _a26=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,_a25);lbl.setLocation(_a23,_a26);};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(_a27){for(var i=this.edges.iterator();i.hasNext();){var e=i.next();var eLoc=e.getLabel().getLocation(_a27);for(var eiIt=e.eiList.iterator();eiIt.hasNext();){var ei=eiIt.next();this.addSelfIntersectionNode(_a27,ei.coord,eLoc);}}};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(_a28,_a29,loc){if(this.isBoundaryNode(_a28,_a29)){return;}if(loc===_a0e.BOUNDARY&&this.useBoundaryDeterminationRule){this.insertBoundaryPoint(_a28,_a29);}else{this.insertPoint(_a28,_a29,loc);}};jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint;};})();jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[];};jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null;jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0;jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(_a2a){this.precisionModel=_a2a;};jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(_a2b){this.minimimVertexDistance=_a2b;};jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(pt){var _a2c=new jsts.geom.Coordinate(pt);this.precisionModel.makePrecise(_a2c);if(this.isRedundant(_a2c)){return;}this.ptList.push(_a2c);};jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(pt,_a2d){if(_a2d){for(var i=0;i<pt.length;i++){this.addPt(pt[i]);}}else{for(var i=pt.length-1;i>=0;i--){this.addPt(pt[i]);}}};jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(pt){if(this.ptList.length<1){return false;}var _a2e=this.ptList[this.ptList.length-1];var _a2f=pt.distance(_a2e);if(_a2f<this.minimimVertexDistance){return true;}return false;};jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(this.ptList.length<1){return;}var _a30=new jsts.geom.Coordinate(this.ptList[0]);var _a31=this.ptList[this.ptList.length-1];var _a32=null;if(this.ptList.length>=2){_a32=this.ptList[this.ptList.length-2];}if(_a30.equals(_a31)){return;}this.ptList.push(_a30);};jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){};jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList;};jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate(),new jsts.geom.Coordinate()];};jsts.algorithm.distance.PointPairDistance.prototype.pt=null;jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN;jsts.algorithm.distance.PointPairDistance.prototype.isNull=true;jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(p0,p1,_a33){if(p0===undefined){this.isNull=true;return;}this.pt[0].setCoordinate(p0);this.pt[1].setCoordinate(p1);this.distance=_a33!==undefined?_a33:p0.distance(p1);this.isNull=false;};jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance;};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt;};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(i){return this.pt[i];};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(_a34){if(arguments.length===2){this.setMaximum2.apply(this,arguments);return;}this.setMaximum(_a34.pt[0],_a34.pt[1]);};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(p0,p1){if(this.isNull){this.initialize(p0,p1);return;}var dist=p0.distance(p1);if(dist>this.distance){this.initialize(p0,p1,dist);}};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(_a35){if(arguments.length===2){this.setMinimum2.apply(this,arguments);return;}this.setMinimum(_a35.pt[0],_a35.pt[1]);};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(p0,p1){if(this.isNull){this.initialize(p0,p1);return;}var dist=p0.distance(p1);if(dist<this.distance){this.initialize(p0,p1,dist);}};(function(){var _a36=jsts.algorithm.distance.PointPairDistance;var _a37=jsts.algorithm.distance.DistanceToPoint;var _a38=function(geom){this.maxPtDist=new _a36();this.minPtDist=new _a36();this.euclideanDist=new _a37();this.geom=geom;};_a38.prototype=new jsts.geom.CoordinateFilter();_a38.prototype.maxPtDist=new _a36();_a38.prototype.minPtDist=new _a36();_a38.prototype.euclideanDist=new _a37();_a38.prototype.geom;_a38.prototype.filter=function(pt){this.minPtDist.initialize();_a37.computeDistance(this.geom,pt,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist);};_a38.prototype.getMaxPointDistance=function(){return this.maxPtDist;};var _a39=function(geom,_a3a){this.maxPtDist=new _a36();this.minPtDist=new _a36();this.geom=geom;this.numSubSegs=Math.round(1/_a3a);};_a39.prototype=new jsts.geom.CoordinateSequenceFilter();_a39.prototype.maxPtDist=new _a36();_a39.prototype.minPtDist=new _a36();_a39.prototype.geom;_a39.prototype.numSubSegs=0;_a39.prototype.filter=function(seq,_a3b){if(_a3b==0){return;}var p0=seq[_a3b-1];var p1=seq[_a3b];var delx=(p1.x-p0.x)/this.numSubSegs;var dely=(p1.y-p0.y)/this.numSubSegs;for(var i=0;i<this.numSubSegs;i++){var x=p0.x+i*delx;var y=p0.y+i*dely;var pt=new jsts.geom.Coordinate(x,y);this.minPtDist.initialize();_a37.computeDistance(this.geom,pt,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist);}};_a39.prototype.isGeometryChanged=function(){return false;};_a39.prototype.isDone=function(){return false;};_a39.prototype.getMaxPointDistance=function(){return this.maxPtDist;};jsts.algorithm.distance.DiscreteHausdorffDistance=function(g0,g1){this.g0=g0;this.g1=g1;this.ptDist=new jsts.algorithm.distance.PointPairDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0;jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(g0,g1,_a3c){var dist=new jsts.algorithm.distance.DiscreteHausdorffDistance(g0,g1);if(_a3c!==undefined){dist.setDensifyFraction(_a3c);}return dist.distance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(_a3d){if(_a3d>1||_a3d<=0){throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]");}this.densifyFrac=_a3d;};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){this.compute(this.g0,this.g1);return ptDist.getDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){this.computeOrientedDistance(this.g0,this.g1,this.ptDist);return this.ptDist.getDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(g0,g1){this.computeOrientedDistance(g0,g1,this.ptDist);this.computeOrientedDistance(g1,g0,this.ptDist);};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(_a3e,geom,_a3f){var _a40=new _a38(geom);_a3e.apply(_a40);_a3f.setMaximum(_a40.getMaxPointDistance());if(this.densifyFrac>0){var _a41=new _a39(geom,this.densifyFrac);_a3e.apply(_a41);_a3f.setMaximum(_a41.getMaxPointDistance());}};})();jsts.algorithm.MinimumBoundingCircle=function(geom){this.input=null;this.extremalPts=null;this.centre=null;this.radius=0;this.input=geom;};jsts.algorithm.MinimumBoundingCircle.prototype.getCircle=function(){this.compute();if(this.centre===null){return this.input.getFactory().createPolygon(null,null);}var _a42=this.input.getFactory().createPoint(this.centre);if(this.radius===0){return _a42;}return _a42.buffer(this.radius);};jsts.algorithm.MinimumBoundingCircle.prototype.getExtremalPoints=function(){this.compute();return this.extremalPts;};jsts.algorithm.MinimumBoundingCircle.prototype.getCentre=function(){this.compute();return this.centre;};jsts.algorithm.MinimumBoundingCircle.prototype.getRadius=function(){this.compute();return this.radius;};jsts.algorithm.MinimumBoundingCircle.prototype.computeCentre=function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new jsts.geom.Coordinate((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=jsts.geom.Triangle.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2]);break;}};jsts.algorithm.MinimumBoundingCircle.prototype.compute=function(){if(this.extremalPts!==null){return;}this.computeCirclePoints();this.computeCentre();if(this.centre!==null){this.radius=this.centre.distance(this.extremalPts[0]);}};jsts.algorithm.MinimumBoundingCircle.prototype.computeCirclePoints=function(){if(this.input.isEmpty()){this.extremalPts=[];return;}var pts;if(this.input.getNumPoints()===1){pts=this.input.getCoordinates();this.extremalPts=[new jsts.geom.Coordinate(pts[0])];return;}var _a43=this.input.convexHull();var _a44=_a43.getCoordinates();pts=_a44;if(_a44[0].equals2D(_a44[_a44.length-1])){pts=[];jsts.geom.CoordinateArrays.copyDeep(_a44,0,pts,0,_a44.length-1);}if(pts.length<=2){this.extremalPts=jsts.geom.CoordinateArrays.copyDeep(pts);return;}var P=jsts.algorithm.MinimumBoundingCircle.lowestPoint(pts);var Q=jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX(pts,P);for(var i=0;i<pts.length;i++){var R=jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment(pts,P,Q);if(jsts.algorithm.Angle.isObtuse(P,R,Q)){this.extremalPts=[new jsts.geom.Coordinate(P),new jsts.geom.Coordinate(Q)];return;}if(jsts.algorithm.Angle.isObtuse(R,P,Q)){P=R;continue;}if(jsts.algorithm.Angle.isObtuse(R,Q,P)){Q=R;continue;}this.extremalPts=[new jsts.geom.Coordinate(P),new jsts.geom.Coordinate(Q),new jsts.geom.Coordinate(R)];return;}throw new Error("Logic failure in Minimum Bounding Circle algorithm!");};jsts.algorithm.MinimumBoundingCircle.lowestPoint=function(pts){var min=pts[0];for(var i=1;i<pts.length;i++){if(pts[i].y<min.y){min=pts[i];}}return min;};jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX=function(pts,P){var _a45=Number.MAX_VALUE;var _a46=null;for(var i=0;i<pts.length;i++){var p=pts[i];if(p===P){continue;}var dx=p.x-P.x;var dy=p.y-P.y;if(dy<0){dy=-dy;}var len=Math.sqrt(dx*dx+dy*dy);var sin=dy/len;if(sin<_a45){_a45=sin;_a46=p;}}return _a46;};jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment=function(pts,P,Q){var _a47=Number.MAX_VALUE;var _a48=null;for(var i=0;i<pts.length;i++){var p=pts[i];if(p===P){continue;}if(p===Q){continue;}var ang=jsts.algorithm.Angle.angleBetween(P,p,Q);if(ang<_a47){_a47=ang;_a48=p;}}return _a48;};jsts.noding.ScaledNoder=function(_a49,_a4a,_a4b,_a4c){this.offsetX=_a4b?_a4b:0;this.offsetY=_a4c?_a4c:0;this.noder=_a49;this.scaleFactor=_a4a;this.isScaled=!this.isIntegerPrecision();};jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder();jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder;jsts.noding.ScaledNoder.prototype.noder=null;jsts.noding.ScaledNoder.prototype.scaleFactor=undefined;jsts.noding.ScaledNoder.prototype.offsetX=undefined;jsts.noding.ScaledNoder.prototype.offsetY=undefined;jsts.noding.ScaledNoder.prototype.isScaled=false;jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return this.scaleFactor===1;};jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var _a4d=this.noder.getNodedSubstrings();if(this.isScaled){this.rescale(_a4d);}return _a4d;};jsts.noding.ScaledNoder.prototype.computeNodes=function(_a4e){var _a4f=_a4e;if(this.isScaled){_a4f=this.scale(_a4e);}this.noder.computeNodes(_a4f);};jsts.noding.ScaledNoder.prototype.scale=function(_a50){if(_a50 instanceof Array){return this.scale2(_a50);}var _a51=new javascript.util.ArrayList();for(var i=_a50.iterator();i.hasNext();){var ss=i.next();_a51.add(new jsts.noding.NodedSegmentString(this.scale(ss.getCoordinates()),ss.getData()));}return _a51;};jsts.noding.ScaledNoder.prototype.scale2=function(pts){var _a52=[];for(var i=0;i<pts.length;i++){_a52[i]=new jsts.geom.Coordinate(Math.round((pts[i].x-this.offsetX)*this.scaleFactor),Math.round((pts[i].y-this.offsetY)*this.scaleFactor));}var _a53=jsts.geom.CoordinateArrays.removeRepeatedPoints(_a52);return _a53;};jsts.noding.ScaledNoder.prototype.rescale=function(_a54){if(_a54 instanceof Array){this.rescale2(_a54);return;}for(var i=_a54.iterator();i.hasNext();){var ss=i.next();this.rescale(ss.getCoordinates());}};jsts.noding.ScaledNoder.prototype.rescale2=function(pts){for(var i=0;i<pts.length;i++){pts[i].x=pts[i].x/this.scaleFactor+this.offsetX;pts[i].y=pts[i].y/this.scaleFactor+this.offsetY;}};(function(){var _a55=javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(li,_a56,_a57){this.li=li;this.includeProper=_a56;this.recordIsolated=_a57;};jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1;};jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=false;jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null;jsts.geomgraph.index.SegmentIntersector.prototype.li=null;jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null;jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null;jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null;jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0;jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0;jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null;jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(_a58,_a59){this.bdyNodes=[];this.bdyNodes[0]=_a58;this.bdyNodes[1]=_a59;};jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint;};jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection;};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper;};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior;};jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(e0,_a5a,e1,_a5b){if(e0===e1){if(this.li.getIntersectionNum()===1){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(_a5a,_a5b)){return true;}if(e0.isClosed()){var _a5c=e0.getNumPoints()-1;if((_a5a===0&&_a5b===_a5c)||(_a5b===0&&_a5a===_a5c)){return true;}}}}return false;};jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(e0,_a5d,e1,_a5e){if(e0===e1&&_a5d===_a5e){return;}this.numTests++;var p00=e0.getCoordinates()[_a5d];var p01=e0.getCoordinates()[_a5d+1];var p10=e1.getCoordinates()[_a5e];var p11=e1.getCoordinates()[_a5e+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.recordIsolated){e0.setIsolated(false);e1.setIsolated(false);}this.numIntersections++;if(!this.isTrivialIntersection(e0,_a5d,e1,_a5e)){this._hasIntersection=true;if(this.includeProper||!this.li.isProper()){e0.addIntersections(this.li,_a5d,0);e1.addIntersections(this.li,_a5e,1);}if(this.li.isProper()){this.properIntersectionPoint=this.li.getIntersection(0).clone();this.hasProper=true;if(!this.isBoundaryPoint(this.li,this.bdyNodes)){this.hasProperInterior=true;}}}}};jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(li,_a5f){if(_a5f===null){return false;}if(_a5f instanceof Array){if(this.isBoundaryPoint(li,_a5f[0])){return true;}if(this.isBoundaryPoint(li,_a5f[1])){return true;}return false;}else{for(var i=_a5f.iterator();i.hasNext();){var node=i.next();var pt=node.getCoordinate();if(li.isIntersection(pt)){return true;}}return false;}};})();